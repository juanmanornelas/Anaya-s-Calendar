<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anaya's Scheduler</title>
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Team Calendar">
<meta name="theme-color" content="#2563eb">
<link rel="manifest" id="pwa-manifest">
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Bricolage+Grotesque:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f0f4f8;--bg2:#fff;--bg3:#f7f9fc;--bg4:#e8eef5;
  --border:#dde3ec;--border2:#c8d2e0;
  --text:#1a2236;--text2:#4a5878;--text3:#8a96aa;
  --accent:#e07b1a;--accent2:#f59332;--accent-dim:rgba(224,123,26,.10);
  --blue:#2563eb;--blue2:#1d4ed8;--blue-dim:rgba(37,99,235,.10);
  --green:#16a34a;--green-dim:rgba(22,163,74,.10);
  --red:#dc2626;--red-dim:rgba(220,38,38,.10);
  --yellow:#d97706;--yellow-dim:rgba(217,119,6,.10);
  --purple:#7c3aed;--purple-dim:rgba(124,58,237,.10);
  --r:8px;--r2:12px;
  --sh:0 2px 16px rgba(30,50,90,.10);--sh2:0 4px 24px rgba(30,50,90,.15);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Bricolage Grotesque',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;font-size:14px;}
::-webkit-scrollbar{width:6px;height:6px;}
::-webkit-scrollbar-track{background:var(--bg4);}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:3px;}

/* LOGIN */
.login-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#e8f0fe,#f0f4f8 50%,#fff3e8);}
.login-box{width:420px;background:var(--bg2);border:1px solid var(--border);border-radius:20px;padding:40px;box-shadow:var(--sh2);}
.login-logo-wrap{display:flex;justify-content:center;margin-bottom:14px;}
.login-logo-img{height:76px;width:auto;object-fit:contain;}
.login-title{font-size:22px;font-weight:800;color:var(--accent);text-align:center;margin-bottom:4px;letter-spacing:-.5px;}
.login-sub{color:var(--text2);margin-bottom:22px;font-size:13px;text-align:center;}
.login-label{display:block;font-size:11px;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;}
.login-input{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:10px 14px;color:var(--text);font-family:inherit;font-size:14px;outline:none;transition:border-color .2s;margin-bottom:14px;}
.login-input:focus{border-color:var(--blue);}
.login-btn{width:100%;background:var(--blue);color:#fff;border:none;border-radius:var(--r);padding:12px;font-family:inherit;font-size:15px;font-weight:700;cursor:pointer;transition:background .2s;}
.login-btn:hover{background:var(--blue2);}
.login-error{color:var(--red);font-size:13px;margin-bottom:12px;background:var(--red-dim);border-radius:var(--r);padding:8px 12px;}

/* APP */
.app{display:flex;flex-direction:column;min-height:100vh;}
.navbar{display:flex;align-items:center;background:var(--blue);padding:0 16px;height:54px;position:sticky;top:0;z-index:100;gap:4px;box-shadow:0 2px 8px rgba(37,99,235,.25);}
.nav-logo{font-size:17px;font-weight:800;letter-spacing:-.5px;margin-right:16px;white-space:nowrap;display:flex;align-items:center;gap:8px;}
.nav-logo-img{height:32px;width:auto;object-fit:contain;border-radius:4px;background:#fff;padding:2px 4px;}
.nav-logo-brand{color:var(--accent2);}
.nav-links{display:flex;gap:2px;flex:1;}
.nav-link{padding:6px 12px;border-radius:var(--r);color:rgba(255,255,255,.75);font-size:13px;font-weight:600;cursor:pointer;transition:all .15s;white-space:nowrap;border:none;background:none;font-family:inherit;}
.nav-link:hover{background:rgba(255,255,255,.15);color:#fff;}
.nav-link.active{background:rgba(255,255,255,.2);color:#fff;}
.nav-user{display:flex;align-items:center;gap:8px;margin-left:auto;}
.nav-name{color:rgba(255,255,255,.85);font-size:13px;font-weight:600;}
.nav-role-badge{font-size:10px;font-weight:700;padding:3px 8px;border-radius:20px;text-transform:uppercase;letter-spacing:.5px;}
.nav-role-badge.admin{background:var(--accent-dim);color:var(--accent2);border:1px solid rgba(224,123,26,.3);}
.nav-role-badge.employee{background:rgba(255,255,255,.15);color:#fff;}
.nav-btn{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.3);border-radius:var(--r);padding:5px 10px;color:#fff;font-family:inherit;font-size:12px;cursor:pointer;transition:all .15s;white-space:nowrap;}
.nav-btn:hover{background:rgba(255,255,255,.25);}

/* MAIN */
.main{flex:1;display:flex;overflow:hidden;}

/* SIDEBAR */
.sidebar{width:200px;min-width:200px;background:var(--bg2);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow:hidden;box-shadow:2px 0 8px rgba(30,50,90,.06);}
.sidebar-header{padding:14px;border-bottom:1px solid var(--border);background:var(--bg3);}
.sidebar-title{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--text3);}
.sidebar-count{font-size:20px;font-weight:800;color:var(--text);line-height:1;margin-top:2px;}
.sidebar-count span{color:var(--blue);}
.sidebar-list{flex:1;overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:5px;}
.drag-card{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 10px;cursor:grab;transition:all .15s;user-select:none;}
.drag-card:hover{border-color:var(--blue);background:var(--blue-dim);transform:translateY(-1px);box-shadow:0 3px 10px rgba(37,99,235,.15);}
.drag-card.dragging{opacity:.4;cursor:grabbing;}
.drag-card-name{font-size:12px;font-weight:700;color:var(--text);}
.drag-card-hrs{font-family:'DM Mono',monospace;font-size:11px;color:var(--text3);margin-top:3px;}
.drag-card-hrs.over{color:var(--yellow);}

/* STAGE PILLS */
.stage-pill{font-size:10px;font-weight:700;padding:2px 8px;border-radius:20px;text-transform:uppercase;letter-spacing:.3px;white-space:nowrap;}

/* SCHEDULE */
.schedule-area{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.schedule-toolbar{display:flex;align-items:center;gap:10px;padding:10px 14px;border-bottom:1px solid var(--border);background:var(--bg2);flex-wrap:wrap;}
.week-nav{display:flex;align-items:center;gap:6px;}
.week-btn{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text2);font-size:16px;transition:all .15s;}
.week-btn:hover{border-color:var(--blue);color:var(--blue);}
.week-label{font-size:13px;font-weight:700;color:var(--text);min-width:170px;text-align:center;}
.today-btn{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:0 12px;height:30px;font-family:inherit;font-size:12px;font-weight:600;color:var(--text2);cursor:pointer;transition:all .15s;}
.today-btn:hover{border-color:var(--blue);color:var(--blue);}

/* GRID */
.grid-wrap{flex:1;overflow:auto;padding:10px;}
.grid-table{min-width:800px;width:100%;border-collapse:separate;border-spacing:0;}
.grid-th{background:var(--blue);padding:8px 10px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:rgba(255,255,255,.85);text-align:center;border-bottom:2px solid var(--blue2);position:sticky;top:0;z-index:10;white-space:nowrap;}
.grid-th.today-col{color:var(--accent2);background:var(--blue2);}
.grid-th-project{text-align:left;min-width:210px;width:210px;background:var(--blue);position:sticky;left:0;z-index:11;}
.project-row-label{padding:0;border-right:1px solid var(--border);border-bottom:1px solid var(--border);background:var(--bg2);vertical-align:top;position:sticky;left:0;z-index:5;min-width:210px;width:210px;}
.project-label-inner{padding:10px 12px;}
.project-name{font-size:13px;font-weight:800;color:var(--text);line-height:1.2;}
.project-addr{font-size:11px;color:var(--text2);margin-top:2px;}
.project-summary{font-size:11px;color:var(--text3);margin-top:3px;font-style:italic;}
.project-meta{display:flex;align-items:center;gap:5px;margin-top:6px;flex-wrap:wrap;}
.project-badge{font-family:'DM Mono',monospace;font-size:10px;color:var(--text3);}

/* DAY CELLS */
.day-cell{border-right:1px solid var(--border);border-bottom:1px solid var(--border);vertical-align:top;min-height:70px;padding:5px;background:var(--bg2);transition:background .15s;cursor:default;position:relative;min-width:100px;}
.day-cell.today-col{background:#fffbf5;}
.day-cell.drag-over{background:var(--blue-dim);outline:2px dashed var(--blue);outline-offset:-2px;}
.day-hours-total{font-family:'DM Mono',monospace;font-size:10px;color:var(--text3);margin-bottom:3px;}
.drop-hint{font-size:10px;color:var(--text3);text-align:center;padding:6px 4px;border:1px dashed var(--border2);border-radius:6px;margin-top:2px;opacity:0;transition:opacity .2s;pointer-events:none;}
.day-cell:hover .drop-hint{opacity:1;}
.day-cell.drag-over .drop-hint{opacity:1;color:var(--blue);border-color:var(--blue);}

/* ASSIGN BLOCKS */
.assign-block{background:var(--blue-dim);border:1px solid rgba(37,99,235,.2);border-radius:6px;padding:5px 7px;margin-bottom:3px;cursor:pointer;transition:all .15s;}
.assign-block:hover{border-color:var(--blue);background:rgba(37,99,235,.15);box-shadow:0 2px 6px rgba(37,99,235,.15);}
.assign-block.dragging{opacity:.4;}
.assign-worker-name{font-size:11px;font-weight:700;color:var(--blue);line-height:1.2;}
.assign-meta{display:flex;align-items:center;justify-content:space-between;margin-top:3px;}
.assign-hours{font-family:'DM Mono',monospace;font-size:10px;color:var(--text2);}
.assign-task-tag{font-size:9px;font-weight:700;color:var(--accent);max-width:60px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}

/* TASK DROPDOWN */
.task-section{border:1px solid var(--border);border-radius:var(--r);overflow:hidden;margin-top:6px;}
.task-section-hdr{display:flex;align-items:center;justify-content:space-between;padding:9px 12px;background:var(--bg3);cursor:pointer;user-select:none;}
.task-section-title{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text2);}
.task-arrow{font-size:10px;color:var(--text3);transition:transform .2s;}
.task-arrow.open{transform:rotate(90deg);}
.task-body{padding:10px 12px;background:var(--bg2);}
.task-select{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;color:var(--text);font-family:inherit;font-size:14px;outline:none;cursor:pointer;}
.task-select:focus{border-color:var(--blue);}
.task-readonly{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;font-size:14px;color:var(--text);}
.task-none{font-size:12px;color:var(--text3);font-style:italic;}
.task-mgr-item{display:flex;align-items:center;gap:6px;padding:6px 8px;background:var(--bg3);border:1px solid var(--border);border-radius:6px;margin-bottom:4px;}
.task-mgr-name{flex:1;font-size:13px;color:var(--text);}
.task-del-btn{background:none;border:none;color:var(--text3);cursor:pointer;font-size:16px;padding:0;line-height:1;transition:color .15s;}
.task-del-btn:hover{color:var(--red);}
.task-add-row{display:flex;gap:6px;margin-top:6px;}
.task-add-input{flex:1;background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:7px 10px;color:var(--text);font-family:inherit;font-size:13px;outline:none;}
.task-add-input:focus{border-color:var(--blue);}
.task-add-btn{background:var(--blue);color:#fff;border:none;border-radius:6px;padding:7px 12px;font-family:inherit;font-size:12px;font-weight:700;cursor:pointer;}
.task-add-btn:hover{background:var(--blue2);}

/* PAGES */
.page{padding:22px;overflow-y:auto;flex:1;}
.page-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:22px;flex-wrap:wrap;gap:10px;}
.page-title{font-size:21px;font-weight:800;letter-spacing:-.5px;}
.btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:var(--r);font-family:inherit;font-size:13px;font-weight:600;cursor:pointer;transition:all .15s;border:1px solid transparent;}
.btn-primary{background:var(--blue);color:#fff;border-color:var(--blue);}
.btn-primary:hover{background:var(--blue2);}
.btn-ghost{background:var(--bg3);color:var(--text2);border-color:var(--border);}
.btn-ghost:hover{border-color:var(--blue);color:var(--blue);}
.btn-danger{background:var(--red-dim);color:var(--red);border-color:var(--red);}
.btn-danger:hover{background:var(--red);color:#fff;}
.btn-sm{padding:5px 10px;font-size:12px;}
.btn-green{background:var(--green);color:#fff;border-color:var(--green);}
.btn-green:hover{filter:brightness(0.9);}

.card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r2);overflow:hidden;box-shadow:0 1px 6px rgba(30,50,90,.07);}
.table{width:100%;border-collapse:collapse;}
.table th{padding:11px 14px;text-align:left;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text3);border-bottom:1px solid var(--border);background:var(--bg3);}
.table td{padding:11px 14px;border-bottom:1px solid var(--border);font-size:13px;color:var(--text);vertical-align:middle;}
.table tr:last-child td{border-bottom:none;}
.table tr:hover td{background:var(--bg3);}
.mono{font-family:'DM Mono',monospace;font-size:12px;}
.progress-bar{height:5px;background:var(--bg4);border-radius:3px;overflow:hidden;}
.progress-fill{height:100%;background:var(--accent);border-radius:3px;transition:width .3s;}
.progress-fill.done{background:var(--green);}
.empty-state{text-align:center;padding:56px 20px;color:var(--text3);}
.empty-icon{font-size:38px;margin-bottom:12px;}
.empty-text{font-size:15px;font-weight:600;color:var(--text2);margin-bottom:4px;}
.empty-sub{font-size:13px;}
.tag{font-size:10px;font-weight:700;padding:2px 7px;border-radius:20px;background:var(--bg4);color:var(--text2);text-transform:uppercase;letter-spacing:.3px;}
.info-box{background:var(--blue-dim);border:1px solid rgba(37,99,235,.2);border-radius:var(--r);padding:10px 14px;font-size:13px;color:var(--text2);margin-bottom:14px;}

/* MODAL */
.modal-overlay{position:fixed;inset:0;background:rgba(30,50,90,.45);backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px;}
.modal{background:var(--bg2);border:1px solid var(--border);border-radius:16px;width:100%;max-width:500px;box-shadow:var(--sh2);animation:modal-in .2s ease;max-height:90vh;overflow-y:auto;}
@keyframes modal-in{from{transform:scale(.95) translateY(10px);opacity:0;}to{transform:scale(1) translateY(0);opacity:1;}}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px 22px 0;}
.modal-title{font-size:17px;font-weight:800;}
.modal-close{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text2);font-size:18px;transition:all .15s;}
.modal-close:hover{border-color:var(--red);color:var(--red);}
.modal-body{padding:18px 22px;}
.modal-footer{display:flex;gap:8px;justify-content:flex-end;padding:0 22px 18px;}

/* FORM */
.form-group{margin-bottom:14px;}
.form-label{display:block;font-size:11px;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;margin-bottom:5px;}
.form-input{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;color:var(--text);font-family:inherit;font-size:14px;outline:none;transition:border-color .2s;}
.form-input:focus{border-color:var(--blue);}
.form-select{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;color:var(--text);font-family:inherit;font-size:14px;outline:none;cursor:pointer;}
.form-select:focus{border-color:var(--blue);}
.form-textarea{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;color:var(--text);font-family:inherit;font-size:14px;outline:none;transition:border-color .2s;resize:vertical;min-height:72px;}
.form-textarea:focus{border-color:var(--blue);}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.form-hint{font-size:11px;color:var(--text3);margin-top:4px;}

/* TOAST */
.toast-container{position:fixed;bottom:22px;right:22px;z-index:2000;display:flex;flex-direction:column;gap:7px;}
.toast{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r2);padding:11px 15px;min-width:220px;box-shadow:var(--sh2);display:flex;align-items:center;gap:9px;font-size:13px;font-weight:600;color:var(--text);animation:toast-in .3s ease;}
.toast.success{border-left:4px solid var(--green);}
.toast.error{border-left:4px solid var(--red);}
@keyframes toast-in{from{transform:translateX(100%);opacity:0;}to{transform:translateX(0);opacity:1;}}
.confirm-msg{color:var(--text2);font-size:14px;line-height:1.6;}

/* DETAIL STATS */
.detail-stat{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:12px 14px;}
.detail-stat-label{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text3);margin-bottom:3px;}
.detail-stat-value{font-size:20px;font-weight:800;font-family:'DM Mono',monospace;color:var(--text);}
.detail-stat-value.accent{color:var(--accent);}

/* STAGE MANAGER */
.stage-chip{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:20px;font-size:12px;font-weight:700;margin:3px;border:1px solid;}
.stage-chip-del{background:none;border:none;cursor:pointer;font-size:14px;line-height:1;padding:0 0 0 2px;opacity:.6;}
.stage-chip-del:hover{opacity:1;}
.color-row{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px;}
.color-swatch{width:24px;height:24px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:transform .1s;}
.color-swatch:hover{transform:scale(1.2);}
.color-swatch.selected{border-color:var(--text);}

/* IMPORT/EXPORT PANEL */
.ie-panel{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r2);padding:16px;margin-bottom:16px;}
.ie-panel-title{font-size:13px;font-weight:800;margin-bottom:10px;color:var(--text);}
.ie-row{display:flex;gap:8px;align-items:flex-start;flex-wrap:wrap;}
.ie-hint{font-size:11px;color:var(--text3);margin-top:8px;line-height:1.6;}

@media(max-width:768px){
  .sidebar{display:none;}
  .navbar{padding:0 10px;}
  .nav-link{padding:5px 8px;font-size:12px;}
  .page{padding:14px;}
  .form-row{grid-template-columns:1fr;}
  .grid-th-project,.project-row-label{min-width:140px;width:140px;}
  .day-cell{min-width:80px;}
  .week-label{font-size:12px;min-width:130px;}
  .modal{margin:0 8px;}
}
</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script>
const {useState,useEffect,useCallback,useMemo,useRef}=React;

const LOGO_B64='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8JY4hry07rgPCsXLH/oH0IJ0+FNml8pxf5QXVu20xmXc7ZUW+puMToaiMxvHJjmI0KhXcf8Aon0JuP8A0T6EH6nkfNM+V51c8klSrsm2WovOeFhbC0ltPNysh6mgKN7LZbnea6Oit1HNUTSEBrWNJV+tkDJGTANtdiS+N/0xWMAbGR+RZ/UoLGjmREQEREBERAREQEREBERAREQEREBERAREQEREBERB+Joo5ozHKxr2HnDhqCsWr8uMDV1Q6oqsL2qSV3O40zdT9SyxEEd1mSmWVU/elwnQa/3YwF8PeJys/ZSj9CktEEfW3JjLW3VTammwrQiRp4FzA71rO6Smp6WFsFNCyGJvxWMboB5l9kQePiTDFhxHSmmvdrpa6PqmjDtPJqsNdkVla5xccKUep6m6KSkQRp7xOVn7KUfoT3icrP2Uo/QpLRBi2Fsv8HYYdv2SwUVJJ/xGxDeHn51lGi5RAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQf/2Q==';
const DAY_NAMES=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
const STAGE_COLORS=[
  {bg:'#dbeafe',text:'#1d4ed8',border:'#93c5fd'},
  {bg:'#dcfce7',text:'#15803d',border:'#86efac'},
  {bg:'#fef9c3',text:'#a16207',border:'#fde047'},
  {bg:'#fee2e2',text:'#b91c1c',border:'#fca5a5'},
  {bg:'#f3e8ff',text:'#7e22ce',border:'#d8b4fe'},
  {bg:'#ffedd5',text:'#c2410c',border:'#fdba74'},
  {bg:'#e0f2fe',text:'#0369a1',border:'#7dd3fc'},
  {bg:'#f0fdf4',text:'#166534',border:'#86efac'},
  {bg:'#fdf2f8',text:'#9d174d',border:'#f9a8d4'},
  {bg:'#f1f5f9',text:'#475569',border:'#cbd5e1'},
];
const DEFAULT_STAGES=[
  {id:'s1',name:'Prep',color:STAGE_COLORS[9]},
  {id:'s2',name:'Primer',color:STAGE_COLORS[0]},
  {id:'s3',name:'Finish',color:STAGE_COLORS[1]},
  {id:'s4',name:'Touch-ups',color:STAGE_COLORS[2]},
  {id:'s5',name:'Epoxy',color:STAGE_COLORS[5]},
  {id:'s6',name:'Roman Clay',color:STAGE_COLORS[8]},
  {id:'s7',name:'Complete',color:STAGE_COLORS[7]},
];

function getToday(){return new Date().toISOString().split('T')[0];}
function nd(d,n){const x=new Date(d);x.setDate(x.getDate()+n);return x.toISOString().split('T')[0];}
function genId(){return Math.random().toString(36).slice(2,10);}
function stageColor(stages,name){const s=stages.find(s=>s.name===name);return s?s.color:{bg:'#f1f5f9',text:'#475569',border:'#cbd5e1'};}

function defaultData(){
  return{
    stages:DEFAULT_STAGES,
    users:[
      {id:'u1',email:'admin@anayas.com',username:'admin',password:'admin123',name:'Admin',role:'ADMIN'},
      {id:'u2',email:'carlos@anayas.com',username:'carlos',password:'worker123',name:'Carlos Rivera',role:'EMPLOYEE',workerId:'w1'},
      {id:'u3',email:'mike@anayas.com',username:'mike',password:'worker123',name:'Mike Chen',role:'EMPLOYEE',workerId:'w2'},
    ],
    workers:[
      {id:'w1',name:'Carlos Rivera',phone:'',isActive:true},
      {id:'w2',name:'Mike Chen',phone:'',isActive:true},
      {id:'w3',name:'Dana Lopez',phone:'',isActive:true},
      {id:'w4',name:'James Park',phone:'',isActive:true},
    ],
    jobs:[
      {id:'j1',name:'Oakwood Colonial',address:'412 Oakwood Dr',customerName:'Smith Family',summary:'Two-story colonial, exterior full repaint',stage:'Primer',estimatedDays:3,sqft:2400,tasks:['Power wash exterior','Sand and scrape peeling paint','Apply primer coat','Paint trim and shutters']},
      {id:'j2',name:'Maple Ave Interior',address:'88 Maple Ave',customerName:'Johnson',summary:'Interior rooms only, 3 bed 2 bath',stage:'Finish',estimatedDays:2,sqft:1200,tasks:['Tape and cover floors','Cut in ceilings','Roll walls']},
      {id:'j3',name:'Sunrise Epoxy',address:'1055 Sunrise Blvd',customerName:'',summary:'Epoxy garage floor, 2-car',stage:'Epoxy',estimatedDays:1,sqft:600,tasks:['Degrease and etch floor','Apply epoxy base coat','Apply top coat']},
      {id:'j4',name:'Cedar Lane Clay',address:'7 Cedar Lane',customerName:'Torres',summary:'Roman clay accent walls',stage:'Roman Clay',estimatedDays:1,sqft:400,tasks:[]},
      {id:'j5',name:'River Rd Exterior',address:'230 River Rd',customerName:'Williams',summary:'Full exterior prep and prime',stage:'Prep',estimatedDays:2,sqft:3100,tasks:[]},
    ],
    assignments:[
      {id:'a1',jobId:'j1',workerId:'w1',scheduledDate:getToday(),plannedHours:6,task:'',notes:''},
      {id:'a2',jobId:'j2',workerId:'w2',scheduledDate:getToday(),plannedHours:4,task:'',notes:''},
      {id:'a3',jobId:'j1',workerId:'w3',scheduledDate:nd(getToday(),1),plannedHours:8,task:'',notes:''},
    ],
  };
}

function loadData(){
  try{
    const saved=localStorage.getItem('anaya_scheduler_data');
    if(saved){const d=JSON.parse(saved);if(d&&d.jobs&&d.workers)return d;}
  }catch(e){}
  return defaultData();
}
function saveData(d){
  try{localStorage.setItem('anaya_scheduler_data',JSON.stringify(d));}catch(e){}
  window.__AS_DATA__=d;
}

function reducer(state,action){
  switch(action.type){
    case 'IMPORT_DATA': return action.data;
    case 'ADD_STAGE': return{...state,stages:[...state.stages,action.stage]};
    case 'DELETE_STAGE': return{...state,stages:state.stages.filter(s=>s.id!==action.id)};
    case 'ADD_JOB': return{...state,jobs:[...state.jobs,action.job]};
    case 'UPDATE_JOB': return{...state,jobs:state.jobs.map(j=>j.id===action.id?{...j,...action.data}:j)};
    case 'DELETE_JOB': return{...state,jobs:state.jobs.filter(j=>j.id!==action.id),assignments:state.assignments.filter(a=>a.jobId!==action.id)};
    case 'ADD_JOB_TASK': return{...state,jobs:state.jobs.map(j=>j.id===action.jobId?{...j,tasks:[...(j.tasks||[]),action.text]}:j)};
    case 'DEL_JOB_TASK': return{...state,jobs:state.jobs.map(j=>j.id===action.jobId?{...j,tasks:(j.tasks||[]).filter((_,i)=>i!==action.idx)}:j)};
    case 'ADD_USER': return{...state,users:[...state.users,action.user]};
    case 'UPDATE_USER': return{...state,users:state.users.map(u=>u.id===action.id?{...u,...action.data}:u)};
    case 'ADD_WORKER': return{...state,workers:[...state.workers,action.worker]};
    case 'UPDATE_WORKER': return{...state,workers:state.workers.map(w=>w.id===action.id?{...w,...action.data}:w)};
    case 'ADD_ASSIGNMENT': return{...state,assignments:[...state.assignments,action.assignment]};
    case 'UPDATE_ASSIGNMENT': return{...state,assignments:state.assignments.map(a=>a.id===action.id?{...a,...action.data}:a)};
    case 'DELETE_ASSIGNMENT': return{...state,assignments:state.assignments.filter(a=>a.id!==action.id)};
    default: return state;
  }
}

function getWeekStart(date){const d=new Date(date),day=d.getDay();d.setDate(d.getDate()+(day===0?-6:1-day));d.setHours(0,0,0,0);return d;}
function addDays(date,n){const d=new Date(date);d.setDate(d.getDate()+n);return d;}
function toDateStr(date){return new Date(date).toISOString().split('T')[0];}
function formatDate(date){return new Date(date).toLocaleDateString('en-US',{month:'short',day:'numeric'});}
function formatWeekRange(ws){const end=addDays(ws,6);const yr=new Date(end).getFullYear();return`${formatDate(ws)} â€“ ${formatDate(end)}, ${yr}`;}

// â”€â”€ SHARED COMPONENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function Toasts({toasts}){
  return React.createElement('div',{className:'toast-container'},
    toasts.map(t=>React.createElement('div',{key:t.id,className:`toast ${t.type}`},
      React.createElement('span',null,t.type==='success'?'âœ“':'âœ•'),t.msg)));
}
function StagePill({stage,stages}){
  const c=stageColor(stages||[],stage);
  return React.createElement('span',{className:'stage-pill',style:{background:c.bg,color:c.text,border:`1px solid ${c.border}`}},stage||'â€”');
}
function Modal({title,onClose,children,footer,wide}){
  useEffect(()=>{const h=e=>{if(e.key==='Escape')onClose();};document.addEventListener('keydown',h);return()=>document.removeEventListener('keydown',h);},[onClose]);
  return React.createElement('div',{className:'modal-overlay',onClick:e=>{if(e.target===e.currentTarget)onClose();}},
    React.createElement('div',{className:'modal',style:wide?{maxWidth:'600px'}:{}},
      React.createElement('div',{className:'modal-header'},
        React.createElement('div',{className:'modal-title'},title),
        React.createElement('button',{className:'modal-close',onClick:onClose},'Ã—')),
      React.createElement('div',{className:'modal-body'},children),
      footer&&React.createElement('div',{className:'modal-footer'},footer)
    )
  );
}
function Confirm({msg,onConfirm,onCancel}){
  return React.createElement(Modal,{title:'Are you sure?',onClose:onCancel,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onCancel},'Cancel'),
    React.createElement('button',{key:'d',className:'btn btn-danger',onClick:onConfirm},'Delete'),
  ]},React.createElement('p',{className:'confirm-msg'},msg));
}

// â”€â”€ TASK DROPDOWN (in assignment modal) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function TaskDropdown({job,value,onChange,isAdmin}){
  const [open,setOpen]=useState(true);
  const tasks=job?.tasks||[];
  return React.createElement('div',{className:'task-section'},
    React.createElement('div',{className:'task-section-hdr',onClick:()=>setOpen(o=>!o)},
      React.createElement('span',{className:'task-section-title'},'ðŸ“‹ Assigned Task'),
      React.createElement('span',{className:'task-arrow'+(open?' open':'')},'â–¶')),
    open&&React.createElement('div',{className:'task-body'},
      tasks.length===0
        ?React.createElement('p',{className:'task-none'},'No tasks set for this job yet'+(isAdmin?' â€” add them via the âš™ button on the Jobs page.':''))
        :isAdmin
          ?React.createElement('select',{className:'task-select',value:value||'',onChange:e=>onChange(e.target.value)},
              React.createElement('option',{value:''},'â€” No specific task â€”'),
              tasks.map((t,i)=>React.createElement('option',{key:i,value:t},t)))
          :(value
              ?React.createElement('div',{className:'task-readonly'},value)
              :React.createElement('p',{className:'task-none'},'No task assigned yet'))
    )
  );
}

// â”€â”€ JOB TASK MANAGER (on Jobs page) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function JobTaskManager({tasks,jobId,dispatch}){
  const [open,setOpen]=useState(false);
  const [newTask,setNewTask]=useState('');
  const add=()=>{const t=newTask.trim();if(!t)return;dispatch({type:'ADD_JOB_TASK',jobId,text:t});setNewTask('');};
  return React.createElement('div',{className:'task-section',style:{marginTop:'10px'}},
    React.createElement('div',{className:'task-section-hdr',onClick:()=>setOpen(o=>!o)},
      React.createElement('span',{className:'task-section-title'},'âš™ Manage Task Options'),
      tasks.length>0&&React.createElement('span',{className:'tag',style:{background:'var(--blue-dim)',color:'var(--blue)',marginLeft:'6px'}},tasks.length),
      React.createElement('span',{className:'task-arrow'+(open?' open':''),style:{marginLeft:'auto'}},'â–¶')),
    open&&React.createElement('div',{className:'task-body'},
      React.createElement('p',{style:{fontSize:'12px',color:'var(--text2)',marginBottom:'8px'}},'Admin sets these task options. When assigning an employee, pick which task they\'re doing. Multiple employees can share or have different tasks.'),
      tasks.map((t,i)=>React.createElement('div',{key:i,className:'task-mgr-item'},
        React.createElement('span',{className:'task-mgr-name'},t),
        React.createElement('button',{className:'task-del-btn',onClick:()=>dispatch({type:'DEL_JOB_TASK',jobId,idx:i})},'Ã—')
      )),
      tasks.length===0&&React.createElement('p',{className:'task-none',style:{marginBottom:'8px'}},'No task options yet.'),
      React.createElement('div',{className:'task-add-row'},
        React.createElement('input',{className:'task-add-input',value:newTask,onChange:e=>setNewTask(e.target.value),onKeyDown:e=>{if(e.key==='Enter')add();},placeholder:'e.g. Roll walls, Cut in ceilingsâ€¦'}),
        React.createElement('button',{className:'task-add-btn',onClick:add},'+ Add'))
    )
  );
}

// â”€â”€ STAGE MANAGER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function StageManager({stages,dispatch,onClose}){
  const [newName,setNewName]=useState('');
  const [selColor,setSelColor]=useState(0);
  const add=()=>{const n=newName.trim();if(!n||stages.find(s=>s.name.toLowerCase()===n.toLowerCase()))return;dispatch({type:'ADD_STAGE',stage:{id:genId(),name:n,color:STAGE_COLORS[selColor]}});setNewName('');};
  return React.createElement(Modal,{title:'Manage Stages',onClose,footer:[React.createElement('button',{key:'c',className:'btn btn-primary',onClick:onClose},'Done')]},
    React.createElement('p',{style:{fontSize:'13px',color:'var(--text2)',marginBottom:'14px'}},'Add or remove stages. They appear in all job dropdowns instantly.'),
    React.createElement('div',{style:{display:'flex',flexWrap:'wrap',marginBottom:'16px',padding:'12px',background:'var(--bg3)',borderRadius:'var(--r)',border:'1px solid var(--border)'}},
      stages.map(s=>React.createElement('span',{key:s.id,className:'stage-chip',style:{background:s.color.bg,color:s.color.text,borderColor:s.color.border}},
        s.name,React.createElement('button',{className:'stage-chip-del',style:{color:s.color.text},onClick:()=>dispatch({type:'DELETE_STAGE',id:s.id})},'Ã—'))),
      stages.length===0&&React.createElement('span',{style:{fontSize:'12px',color:'var(--text3)',fontStyle:'italic'}},'No stages')),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'New Stage Name'),
      React.createElement('input',{className:'form-input',value:newName,onChange:e=>setNewName(e.target.value),onKeyDown:e=>{if(e.key==='Enter')add();},placeholder:'e.g. Caulking, Staining'})),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'6px'}},'Color'),
    React.createElement('div',{className:'color-row'},
      STAGE_COLORS.map((c,i)=>React.createElement('div',{key:i,className:'color-swatch'+(selColor===i?' selected':''),style:{background:c.bg,border:`2px solid ${selColor===i?c.text:c.border}`},onClick:()=>setSelColor(i)}))),
    React.createElement('button',{className:'btn btn-primary',style:{marginTop:'12px',width:'100%'},onClick:add},'+ Add Stage')
  );
}

// â”€â”€ JOB FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function JobForm({job,stages,onSave,onClose}){
  const [form,setForm]=useState(job?{...job}:{name:'',address:'',customerName:'',summary:'',stage:stages[0]?.name||'Prep',estimatedDays:1,sqft:''});
  const set=k=>e=>setForm(f=>({...f,[k]:e.target.value}));
  const submit=()=>{
    if(!form.address.trim())return;
    const days=parseFloat(form.estimatedDays);
    if(isNaN(days)||days<=0)return;
    onSave({...form,estimatedDays:days,sqft:form.sqft?parseInt(form.sqft):null,tasks:form.tasks||[]});
  };
  return React.createElement(Modal,{title:job?'Edit Job':'New Job',onClose,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:submit},job?'Save':'Create Job'),
  ]},
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Project Name *'),
      React.createElement('input',{className:'form-input',value:form.name,onChange:set('name'),placeholder:'e.g. Oakwood Colonial'})),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Address *'),
      React.createElement('input',{className:'form-input',value:form.address,onChange:set('address'),placeholder:'123 Main St'})),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Customer'),
        React.createElement('input',{className:'form-input',value:form.customerName,onChange:set('customerName'),placeholder:'Optional'})),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Stage *'),
        React.createElement('select',{className:'form-select',value:form.stage,onChange:set('stage')},
          stages.map(s=>React.createElement('option',{key:s.id,value:s.name},s.name))))),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Estimated Days *'),
        React.createElement('input',{className:'form-input',type:'number',min:.5,step:.5,value:form.estimatedDays,onChange:set('estimatedDays')})),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Square Footage'),
        React.createElement('input',{className:'form-input',type:'number',min:1,step:1,value:form.sqft||'',onChange:set('sqft'),placeholder:'e.g. 2400'}))),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Project Summary'),
      React.createElement('textarea',{className:'form-textarea',value:form.summary||'',onChange:set('summary'),placeholder:'Short descriptionâ€¦',style:{minHeight:'56px'}}))
  );
}

// â”€â”€ WORKER FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function WorkerForm({worker,workerUser,selfEdit,onSave,onClose}){
  const isEdit=!!worker;
  const [name,setName]=useState(worker?.name||'');
  const [email,setEmail]=useState(workerUser?.username||workerUser?.email||'');
  const [phone,setPhone]=useState(worker?.phone||'');
  const [pw,setPw]=useState('');
  const [pw2,setPw2]=useState('');
  const [err,setErr]=useState('');

  const submit=()=>{
    setErr('');
    if(!selfEdit&&(!name.trim()||!email.trim()))return setErr('Name and username are required.');
    if(!isEdit&&!pw.trim())return setErr('Password is required.');
    if(pw&&pw!==pw2)return setErr('Passwords do not match.');
    onSave({name:name.trim(),username:email.trim(),email:email.trim(),phone:phone.trim(),password:pw||undefined});
  };

  if(selfEdit) return React.createElement(Modal,{title:'Change Password',onClose,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:submit},'Update Password'),
  ]},
    err&&React.createElement('p',{style:{color:'var(--red)',fontSize:'13px',marginBottom:'12px',background:'var(--red-dim)',padding:'8px 12px',borderRadius:'var(--r)'}},err),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'New Password *'),
      React.createElement('input',{className:'form-input',type:'password',value:pw,onChange:e=>setPw(e.target.value),placeholder:'Enter new password'})),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Confirm Password *'),
      React.createElement('input',{className:'form-input',type:'password',value:pw2,onChange:e=>setPw2(e.target.value),placeholder:'Repeat new password'}))
  );

  return React.createElement(Modal,{title:isEdit?'Edit Employee':'Add Employee',onClose,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:submit},isEdit?'Save Changes':'Create Employee'),
  ]},
    !isEdit&&React.createElement('p',{className:'info-box'},'Create an employee and their login. They\'ll sign in with their username & password.'),
    err&&React.createElement('p',{style:{color:'var(--red)',fontSize:'13px',marginBottom:'12px',background:'var(--red-dim)',padding:'8px 12px',borderRadius:'var(--r)'}},err),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Full Name *'),
      React.createElement('input',{className:'form-input',value:name,onChange:e=>setName(e.target.value),placeholder:'Carlos Rivera'})),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Username *'),
        React.createElement('input',{className:'form-input',type:'email',value:email,onChange:e=>setEmail(e.target.value),placeholder:'e.g. carlos'})),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Phone Number'),
        React.createElement('input',{className:'form-input',type:'tel',value:phone,onChange:e=>setPhone(e.target.value),placeholder:'(555) 000-0000'}))),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},isEdit?'New Password':'Password *'),
        React.createElement('input',{className:'form-input',type:'password',value:pw,onChange:e=>setPw(e.target.value),placeholder:isEdit?'Leave blank to keep':'Set password'})),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Confirm'),
        React.createElement('input',{className:'form-input',type:'password',value:pw2,onChange:e=>setPw2(e.target.value),placeholder:'Repeat password'}))),
    isEdit&&React.createElement('p',{className:'form-hint'},'Leave password blank to keep current password.')
  );
}

// â”€â”€ ASSIGNMENT MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function AssignmentModal({assignment,jobs,workers,stages,isAdmin,dispatch,onSave,onDelete,onClose}){
  const job=jobs.find(j=>j.id===assignment.jobId);
  const worker=workers.find(w=>w.id===assignment.workerId);
  const [planned,setPlanned]=useState(assignment.plannedHours);
  const [task,setTask]=useState(assignment.task||'');
  const [notes,setNotes]=useState(assignment.notes||'');
  const [confirm,setConfirm]=useState(false);
  const plannedVal=parseFloat(planned)||assignment.plannedHours;
  const c=stageColor(stages,job?.stage);

  if(confirm) return React.createElement(Confirm,{
    msg:`Remove ${worker?.name} from ${job?.name||job?.address} on this day?`,
    onConfirm:()=>onDelete(assignment.id),onCancel:()=>setConfirm(false)});

  const footer=isAdmin?[
    React.createElement('button',{key:'del',className:'btn btn-danger btn-sm',onClick:()=>setConfirm(true),style:{marginRight:'auto'}},'Remove'),
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:()=>onSave(assignment.id,{plannedHours:plannedVal,task,notes})},'Save'),
  ]:[React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Close')];

  return React.createElement(Modal,{title:'Assignment Details',onClose,footer},
    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'4px'}},
      React.createElement('span',{style:{fontWeight:800,fontSize:'16px'}},job?.name||job?.address),
      job&&React.createElement('span',{className:'stage-pill',style:{background:c.bg,color:c.text,border:`1px solid ${c.border}`}},job.stage)),
    React.createElement('div',{style:{color:'var(--text2)',fontSize:'12px',marginBottom:'16px'}},
      worker?.name,' Â· ',new Date(assignment.scheduledDate+'T12:00:00').toLocaleDateString('en-US',{weekday:'long',month:'short',day:'numeric'})),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'â° Planned Hours'),
      isAdmin
        ?React.createElement('input',{className:'form-input',type:'number',min:.5,step:.5,value:planned,onChange:e=>setPlanned(e.target.value)})
        :React.createElement('div',{style:{background:'var(--blue-dim)',border:'1px solid rgba(37,99,235,.2)',borderRadius:'var(--r)',padding:'10px 14px',fontFamily:'DM Mono',fontSize:'22px',fontWeight:800,color:'var(--blue)'}},plannedVal+'h')),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'ðŸ“ Admin Notes'),
      isAdmin
        ?React.createElement('textarea',{className:'form-textarea',value:notes,onChange:e=>setNotes(e.target.value),style:{minHeight:'56px'},placeholder:'Instructions for this employeeâ€¦'})
        :(notes
            ?React.createElement('div',{style:{background:'var(--yellow-dim)',border:'1px solid rgba(217,119,6,.2)',borderRadius:'var(--r)',padding:'10px 12px',fontSize:'13px',lineHeight:'1.5'}},notes)
            :React.createElement('div',{style:{color:'var(--text3)',fontSize:'12px',fontStyle:'italic'}},'No notes from admin'))),
    job&&React.createElement(TaskDropdown,{job,value:task,onChange:setTask,isAdmin})
  );
}

// â”€â”€ IMPORT / EXPORT PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ImportExportPanel({data,dispatch,toast}){
  const fileRef=useRef();

  const doExport=()=>{
    const json=JSON.stringify(data,null,2);
    const blob=new Blob([json],{type:'application/json'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a');
    a.href=url;
    a.download=`anaya-data-${getToday()}.json`;
    a.click();
    URL.revokeObjectURL(url);
    toast('Data exported!','success');
  };

  const doImport=e=>{
    const file=e.target.files[0];
    if(!file)return;
    const reader=new FileReader();
    reader.onload=ev=>{
      try{
        const parsed=JSON.parse(ev.target.result);
        if(!parsed.jobs||!parsed.workers||!parsed.users)throw new Error('Invalid file');
        dispatch({type:'IMPORT_DATA',data:parsed});
        toast('Data imported successfully!','success');
      }catch(err){
        toast('Invalid data file â€” could not import.','error');
      }
    };
    reader.readAsText(file);
    e.target.value='';
  };

  return React.createElement('div',{className:'ie-panel'},
    React.createElement('div',{className:'ie-panel-title'},'ðŸ’¾ Data Backup / Restore'),
    React.createElement('div',{className:'ie-row'},
      React.createElement('button',{className:'btn btn-primary',onClick:doExport},'â¬‡ Export Data'),
      React.createElement('button',{className:'btn btn-ghost',onClick:()=>fileRef.current.click()},'â¬† Import Data'),
      React.createElement('input',{ref:fileRef,type:'file',accept:'.json',style:{display:'none'},onChange:doImport})
    ),
    React.createElement('p',{className:'ie-hint'},
      'ðŸ“¤ Export saves all your jobs, workers, schedules & stages as a .json file.',React.createElement('br'),
      'ðŸ“¥ Import loads a previously exported file and restores all data.',React.createElement('br'),
      'ðŸ’¡ Send the exported file when asking Claude to update the app â€” your data will be preserved.')
  );
}

// â”€â”€ JOBS PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function JobsPage({data,isAdmin,dispatch,toast}){
  const [showForm,setShowForm]=useState(false);
  const [editJob,setEditJob]=useState(null);
  const [confirmDel,setConfirmDel]=useState(null);
  const [showStages,setShowStages]=useState(false);

  const handleSave=form=>{
    if(editJob){dispatch({type:'UPDATE_JOB',id:editJob.id,data:form});toast('Job updated','success');setEditJob(null);}
    else{dispatch({type:'ADD_JOB',job:{...form,id:genId(),tasks:[]}});toast('Job created','success');setShowForm(false);}
  };

  return React.createElement('div',{className:'page'},
    React.createElement('div',{className:'page-header'},
      React.createElement('div',{className:'page-title'},'Jobs'),
      React.createElement('div',{style:{display:'flex',gap:'8px'}},
        isAdmin&&React.createElement('button',{className:'btn btn-ghost',onClick:()=>setShowStages(true)},'âš™ Stages'),
        isAdmin&&React.createElement('button',{className:'btn btn-primary',onClick:()=>setShowForm(true)},'+ New Job'))),
    isAdmin&&React.createElement(ImportExportPanel,{data,dispatch,toast}),
    data.jobs.length===0
      ?React.createElement('div',{className:'empty-state'},
          React.createElement('div',{className:'empty-icon'},'ðŸ '),
          React.createElement('div',{className:'empty-text'},'No jobs yet'),
          React.createElement('div',{className:'empty-sub'},'Create your first job to get started'))
      :React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'10px'}},
          data.jobs.map(job=>{
            const c=stageColor(data.stages,job.stage);
            return React.createElement('div',{key:job.id,className:'card'},
              React.createElement('div',{style:{padding:'14px 16px'}},
                React.createElement('div',{style:{display:'flex',alignItems:'flex-start',justifyContent:'space-between',gap:'12px',flexWrap:'wrap'}},
                  React.createElement('div',{style:{flex:1}},
                    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'3px',flexWrap:'wrap'}},
                      React.createElement('span',{style:{fontSize:'15px',fontWeight:800}},job.name||job.address),
                      React.createElement('span',{className:'stage-pill',style:{background:c.bg,color:c.text,border:`1px solid ${c.border}`}},job.stage),
                      job.customerName&&React.createElement('span',{className:'tag'},job.customerName)),
                    React.createElement('div',{style:{fontSize:'12px',color:'var(--text2)',marginBottom:'3px'}},job.address),
                    job.summary&&React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',fontStyle:'italic'}},job.summary)),
                  isAdmin&&React.createElement('div',{style:{display:'flex',gap:'6px',flexShrink:0}},
                    React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditJob(job)},'Edit'),
                    React.createElement('button',{className:'btn btn-danger btn-sm',onClick:()=>setConfirmDel(job)},'Del'))),
                React.createElement('div',{style:{display:'grid',gridTemplateColumns:'repeat(2,1fr)',gap:'8px',marginTop:'12px',maxWidth:'380px'}},
                  React.createElement('div',{className:'detail-stat'},
                    React.createElement('div',{className:'detail-stat-label'},'ðŸ“… Est. Days'),
                    React.createElement('div',{className:'detail-stat-value'},job.estimatedDays+(job.estimatedDays===1?' day':' days'))),
                  job.sqft&&React.createElement('div',{className:'detail-stat'},
                    React.createElement('div',{className:'detail-stat-label'},'ðŸ“ Square Footage'),
                    React.createElement('div',{className:'detail-stat-value accent'},Number(job.sqft).toLocaleString()+' sqft'))),
                (job.tasks||[]).length>0&&React.createElement('div',{style:{marginTop:'8px',display:'flex',flexWrap:'wrap',gap:'4px',alignItems:'center'}},
                  React.createElement('span',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text3)',marginRight:'2px'}},'Tasks:'),
                  (job.tasks||[]).map((t,i)=>React.createElement('span',{key:i,className:'tag',style:{background:'var(--blue-dim)',color:'var(--blue)'}},t))),
                isAdmin&&React.createElement(JobTaskManager,{tasks:job.tasks||[],jobId:job.id,dispatch})));
          })),
    showForm&&React.createElement(JobForm,{stages:data.stages,onSave:handleSave,onClose:()=>setShowForm(false)}),
    editJob&&React.createElement(JobForm,{job:editJob,stages:data.stages,onSave:handleSave,onClose:()=>setEditJob(null)}),
    showStages&&React.createElement(StageManager,{stages:data.stages,dispatch,onClose:()=>setShowStages(false)}),
    confirmDel&&React.createElement(Confirm,{
      msg:`Delete "${confirmDel.name||confirmDel.address}"? All assignments will be removed.`,
      onConfirm:()=>{dispatch({type:'DELETE_JOB',id:confirmDel.id});toast('Deleted','success');setConfirmDel(null);},
      onCancel:()=>setConfirmDel(null)})
  );
}

// â”€â”€ WORKERS PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function WorkersPage({data,isAdmin,dispatch,toast}){
  const [showForm,setShowForm]=useState(false);
  const [editWorker,setEditWorker]=useState(null);

  const handleSave=form=>{
    if(editWorker){
      dispatch({type:'UPDATE_WORKER',id:editWorker.id,data:{name:form.name,phone:form.phone||'',isActive:true}});
      const lu=data.users.find(u=>u.workerId===editWorker.id);
      if(lu){const u={name:form.name,username:form.username||form.email,email:form.email};if(form.password)u.password=form.password;dispatch({type:'UPDATE_USER',id:lu.id,data:u});}
      toast('Employee updated','success');setEditWorker(null);
    } else {
      const wId=genId();
      dispatch({type:'ADD_WORKER',worker:{id:wId,name:form.name,phone:form.phone||'',isActive:true}});
      dispatch({type:'ADD_USER',user:{id:genId(),email:form.email,password:form.password,name:form.name,role:'EMPLOYEE',workerId:wId}});
      toast('Employee created','success');setShowForm(false);
    }
  };

  return React.createElement('div',{className:'page'},
    React.createElement('div',{className:'page-header'},
      React.createElement('div',{className:'page-title'},'Employees'),
      isAdmin&&React.createElement('button',{className:'btn btn-primary',onClick:()=>setShowForm(true)},'+ Add Employee')),
    data.workers.length===0
      ?React.createElement('div',{className:'empty-state'},React.createElement('div',{className:'empty-icon'},'ðŸ‘·'),React.createElement('div',{className:'empty-text'},'No employees yet'))
      :React.createElement('div',{className:'card'},
          React.createElement('table',{className:'table'},
            React.createElement('thead',null,
              React.createElement('tr',null,
                React.createElement('th',null,'Name'),
                React.createElement('th',null,'Username'),
                React.createElement('th',null,'Phone Number'),
                isAdmin&&React.createElement('th',null,'Password (admin view)'),
                isAdmin&&React.createElement('th',null,'Actions'))),
            React.createElement('tbody',null,
              data.workers.map(w=>{
                const user=data.users.find(u=>u.workerId===w.id);
                return React.createElement('tr',{key:w.id},
                  React.createElement('td',null,React.createElement('span',{style:{fontWeight:700}},w.name)),
                  React.createElement('td',null,React.createElement('span',{className:'mono',style:{color:'var(--text2)'}},user?.username||user?.email||'â€”')),
                  React.createElement('td',null,React.createElement('span',{className:'mono',style:{color:'var(--text2)'}},w.phone||'â€”')),
                  isAdmin&&React.createElement('td',null,React.createElement('span',{className:'mono',style:{color:'var(--text3)',fontSize:'11px',background:'var(--bg3)',padding:'2px 6px',borderRadius:'4px'}},user?.password||'â€”')),
                  isAdmin&&React.createElement('td',null,React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditWorker(w)},'Edit')));
              })))),
    showForm&&React.createElement(WorkerForm,{onSave:handleSave,onClose:()=>setShowForm(false)}),
    editWorker&&React.createElement(WorkerForm,{worker:editWorker,workerUser:data.users.find(u=>u.workerId===editWorker.id),onSave:handleSave,onClose:()=>setEditWorker(null)})
  );
}

// â”€â”€ SCHEDULER PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function SchedulerPage({data,isAdmin,dispatch,toast}){
  const [weekStart,setWeekStart]=useState(()=>getWeekStart(new Date()));
  const [dragItem,setDragItem]=useState(null);
  const [dragOverCell,setDragOverCell]=useState(null);
  const [editAssign,setEditAssign]=useState(null);

  const days=useMemo(()=>Array.from({length:7},(_,i)=>addDays(weekStart,i)),[weekStart]);
  const todayStr=toDateStr(new Date());
  const activeWorkers=data.workers.filter(w=>w.isActive);

  const assignMap=useMemo(()=>{
    const m={};
    data.assignments.forEach(a=>{const k=`${a.jobId}_${a.scheduledDate}`;if(!m[k])m[k]=[];m[k].push(a);});
    return m;
  },[data.assignments]);

  const workerWeekTotals=useMemo(()=>{
    const m={};
    activeWorkers.forEach(w=>{m[w.id]=0;days.forEach(d=>{data.assignments.filter(a=>a.workerId===w.id&&a.scheduledDate===toDateStr(d)).forEach(a=>{m[w.id]+=a.plannedHours;});});});
    return m;
  },[activeWorkers,days,data.assignments]);

  const activeJobs=data.jobs.filter(j=>j.stage!=='Complete');

  const onDragStartWorker=(e,w)=>{e.dataTransfer.effectAllowed='move';setDragItem({type:'worker',worker:w});};
  const onDragStartAssign=(e,a)=>{e.dataTransfer.effectAllowed='move';setDragItem({type:'assignment',assign:a});e.stopPropagation();};
  const onDragOver=(e,jobId,date)=>{e.preventDefault();e.dataTransfer.dropEffect='move';setDragOverCell({jobId,date});};
  const onDragLeave=()=>setDragOverCell(null);
  const onDragEnd=()=>{setDragItem(null);setDragOverCell(null);};
  const onDrop=(e,jobId,date)=>{
    e.preventDefault();setDragOverCell(null);
    if(!dragItem||!isAdmin)return;
    if(dragItem.type==='worker'){
      if((assignMap[`${jobId}_${date}`]||[]).find(a=>a.workerId===dragItem.worker.id)){toast('Already assigned','error');setDragItem(null);return;}
      dispatch({type:'ADD_ASSIGNMENT',assignment:{id:genId(),jobId,workerId:dragItem.worker.id,scheduledDate:date,plannedHours:2,task:'',notes:''}});
      toast('Assigned â€” click to edit hours','success');
    }else if(dragItem.type==='assignment'){
      const a=dragItem.assign;
      if(a.jobId===jobId&&a.scheduledDate===date){setDragItem(null);return;}
      dispatch({type:'UPDATE_ASSIGNMENT',id:a.id,data:{jobId,scheduledDate:date}});
      toast('Moved','success');
    }
    setDragItem(null);
  };

  return React.createElement('div',{className:'main'},
    isAdmin&&React.createElement('div',{className:'sidebar'},
      React.createElement('div',{className:'sidebar-header'},
        React.createElement('div',{className:'sidebar-title'},'Employees'),
        React.createElement('div',{className:'sidebar-count'},React.createElement('span',null,activeWorkers.length),' active')),
      React.createElement('div',{className:'sidebar-list'},
        React.createElement('div',{style:{fontSize:'11px',color:'var(--text3)',background:'var(--blue-dim)',border:'1px dashed rgba(37,99,235,.3)',borderRadius:'var(--r)',padding:'7px 9px',marginBottom:'4px',lineHeight:'1.5'}},
          'â˜ï¸ Drag an employee onto a project + day cell'),
        activeWorkers.map(w=>{
          const wkHrs=workerWeekTotals[w.id]||0,over=wkHrs>40;
          return React.createElement('div',{key:w.id,className:`drag-card${dragItem?.worker?.id===w.id?' dragging':''}`,draggable:true,onDragStart:e=>onDragStartWorker(e,w),onDragEnd},
            React.createElement('div',{className:'drag-card-name'},w.name),
            React.createElement('div',{className:`drag-card-hrs${over?' over':''}`},over?'âš  ':'',' ',wkHrs.toFixed(1),'h this week'));
        }))),
    React.createElement('div',{className:'schedule-area'},
      React.createElement('div',{className:'schedule-toolbar'},
        React.createElement('div',{className:'week-nav'},
          React.createElement('button',{className:'week-btn',onClick:()=>setWeekStart(s=>addDays(s,-7))},'â€¹'),
          React.createElement('span',{className:'week-label'},formatWeekRange(weekStart)),
          React.createElement('button',{className:'week-btn',onClick:()=>setWeekStart(s=>addDays(s,7))},'â€º')),
        React.createElement('button',{className:'today-btn',onClick:()=>setWeekStart(getWeekStart(new Date()))},'Today'),
        !isAdmin&&React.createElement('span',{className:'tag',style:{marginLeft:'auto',background:'var(--blue-dim)',color:'var(--blue)'}},'ðŸ‘ View Only')),
      React.createElement('div',{className:'grid-wrap'},
        React.createElement('table',{className:'grid-table'},
          React.createElement('thead',null,
            React.createElement('tr',null,
              React.createElement('th',{className:'grid-th grid-th-project'},'Project'),
              ...days.map((d,i)=>{const ds=toDateStr(d),isToday=ds===todayStr;return React.createElement('th',{key:i,className:`grid-th${isToday?' today-col':''}`},DAY_NAMES[i]+' '+formatDate(d));}))),
          React.createElement('tbody',null,
            activeJobs.length===0
              ?React.createElement('tr',null,React.createElement('td',{colSpan:8,style:{textAlign:'center',padding:'40px',color:'var(--text3)'}},'No active jobs â€” add one in the Jobs tab'))
              :activeJobs.map(job=>{
                  const c=stageColor(data.stages,job.stage);
                  return React.createElement('tr',{key:job.id},
                    React.createElement('td',{className:'project-row-label'},
                      React.createElement('div',{className:'project-label-inner'},
                        React.createElement('div',{className:'project-name'},job.name||job.address),
                        React.createElement('div',{className:'project-addr'},job.address),
                        job.summary&&React.createElement('div',{className:'project-summary'},job.summary.length>55?job.summary.slice(0,53)+'â€¦':job.summary),
                        React.createElement('div',{className:'project-meta'},
                          React.createElement('span',{className:'stage-pill',style:{background:c.bg,color:c.text,border:`1px solid ${c.border}`}},job.stage),
                          React.createElement('span',{className:'project-badge'},job.estimatedDays+(job.estimatedDays===1?' day':' days')),
                          job.sqft&&React.createElement('span',{className:'project-badge'},Number(job.sqft).toLocaleString()+' sqft')))),
                    ...days.map((d,i)=>{
                      const ds=toDateStr(d),isToday=ds===todayStr,k=`${job.id}_${ds}`,cells=assignMap[k]||[],dayTotal=cells.reduce((s,a)=>s+a.plannedHours,0),isOver=dragOverCell?.jobId===job.id&&dragOverCell?.date===ds;
                      return React.createElement('td',{key:i,className:`day-cell${isToday?' today-col':''}${isOver?' drag-over':''}`,onDragOver:isAdmin?e=>onDragOver(e,job.id,ds):undefined,onDragLeave:isAdmin?onDragLeave:undefined,onDrop:isAdmin?e=>onDrop(e,job.id,ds):undefined},
                        dayTotal>0&&React.createElement('div',{className:'day-hours-total'},dayTotal+'h'),
                        cells.length===0&&isAdmin&&React.createElement('div',{className:'drop-hint'},'+ drop employee'),
                        cells.map(a=>{
                          const w=data.workers.find(w=>w.id===a.workerId);
                          return React.createElement('div',{key:a.id,className:`assign-block${dragItem?.assign?.id===a.id?' dragging':''}`,draggable:isAdmin,onDragStart:isAdmin?e=>onDragStartAssign(e,a):undefined,onDragEnd,onClick:()=>setEditAssign(a)},
                            React.createElement('div',{className:'assign-worker-name'},w?.name||'?'),
                            React.createElement('div',{className:'assign-meta'},
                              React.createElement('span',{className:'assign-hours'},a.plannedHours+'h'),
                              a.task&&React.createElement('span',{className:'assign-task-tag'},a.task.length>14?a.task.slice(0,13)+'â€¦':a.task)));
                        }));
                    }));
                }))))),
    editAssign&&React.createElement(AssignmentModal,{assignment:editAssign,jobs:data.jobs,workers:data.workers,stages:data.stages,isAdmin,dispatch,
      onSave:(id,updates)=>{dispatch({type:'UPDATE_ASSIGNMENT',id,data:updates});toast('Saved','success');setEditAssign(null);},
      onDelete:(id)=>{dispatch({type:'DELETE_ASSIGNMENT',id});toast('Removed','success');setEditAssign(null);},
      onClose:()=>setEditAssign(null)})
  );
}

// â”€â”€ APP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function App(){
  const [session,setSession]=useState(null);
  const [page,setPage]=useState('schedule');
  const [data,setData]=useState(()=>loadData());
  const [toasts,setToasts]=useState([]);
  const [changePw,setChangePw]=useState(false);

  useEffect(()=>{saveData(data);},[data]);
  const dispatch=useCallback(action=>{setData(d=>{const next=reducer(d,action);saveData(next);return next;});},[]);
  const toast=useCallback((msg,type='success')=>{const id=genId();setToasts(t=>[...t,{id,msg,type}]);setTimeout(()=>setToasts(t=>t.filter(x=>x.id!==id)),3000);},[]);
  const isAdmin=session?.role==='ADMIN';

  if(!session) return React.createElement(LoginPage,{users:data.users,onLogin:setSession});

  const handleChangePw=form=>{
    if(form.password){dispatch({type:'UPDATE_USER',id:session.id,data:{password:form.password}});toast('Password updated','success');}
    setChangePw(false);
  };

  let content;
  if(page==='schedule') content=React.createElement(SchedulerPage,{data,isAdmin,dispatch,toast});
  else if(page==='jobs') content=React.createElement('div',{className:'main'},React.createElement(JobsPage,{data,isAdmin,dispatch,toast}));
  else if(page==='workers'&&isAdmin) content=React.createElement('div',{className:'main'},React.createElement(WorkersPage,{data,isAdmin,dispatch,toast}));

  return React.createElement('div',{className:'app'},
    React.createElement('nav',{className:'navbar'},
      React.createElement('div',{className:'nav-logo'},
        React.createElement('img',{src:`data:image/jpeg;base64,${LOGO_B64}`,className:'nav-logo-img',alt:"Anaya's"}),
        React.createElement('span',{className:'nav-logo-brand'},"Anaya's"),
        React.createElement('span',{style:{color:'rgba(255,255,255,.7)',fontWeight:500,fontSize:'13px'}},'Scheduler')),
      React.createElement('div',{className:'nav-links'},
        React.createElement('button',{className:`nav-link${page==='schedule'?' active':''}`,onClick:()=>setPage('schedule')},'ðŸ“… Schedule'),
        React.createElement('button',{className:`nav-link${page==='jobs'?' active':''}`,onClick:()=>setPage('jobs')},'ðŸ  Jobs'),
        isAdmin&&React.createElement('button',{className:`nav-link${page==='workers'?' active':''}`,onClick:()=>setPage('workers')},'ðŸ‘· Employees')),
      React.createElement('div',{className:'nav-user'},
        React.createElement('span',{className:'nav-name'},session.name),
        React.createElement('span',{className:`nav-role-badge ${session.role.toLowerCase()}`},(session.role==='EMPLOYEE'?'Employee':session.role)),
        React.createElement('button',{className:'nav-btn',style:{fontSize:'11px'},onClick:()=>setChangePw(true)},'ðŸ”‘ Change Password'),
        React.createElement('button',{className:'nav-btn',onClick:()=>setSession(null)},'Sign Out'))),
    content,
    React.createElement(Toasts,{toasts}),
    changePw&&React.createElement(WorkerForm,{selfEdit:true,worker:data.workers.find(w=>w.id===session.workerId),workerUser:session,onSave:handleChangePw,onClose:()=>setChangePw(false)})
  );
}

// â”€â”€ LOGIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function LoginPage({users,onLogin}){
  const [email,setEmail]=useState('');
  const [pw,setPw]=useState('');
  const [err,setErr]=useState('');
  const submit=()=>{const q=email.trim().toLowerCase();const u=users.find(u=>(u.username||'').toLowerCase()===q||u.email.toLowerCase()===q||(u.name||'').toLowerCase()===q);if(!u||u.password!==pw){setErr('Invalid username or password');return;}onLogin(u);};
  const hk=e=>{if(e.key==='Enter')submit();};
  return React.createElement('div',{className:'login-wrap'},
    React.createElement('div',{className:'login-box'},
      React.createElement('div',{className:'login-logo-wrap'},React.createElement('img',{src:`data:image/jpeg;base64,${LOGO_B64}`,className:'login-logo-img',alt:'Logo'})),
      React.createElement('div',{className:'login-title'},"Anaya's Scheduler"),
      React.createElement('p',{className:'login-sub'},'Team Calendar'),
      err&&React.createElement('div',{className:'login-error'},err),
      React.createElement('label',{className:'login-label'},'Username'),
      React.createElement('input',{className:'login-input',type:'text',value:email,onChange:e=>setEmail(e.target.value),onKeyDown:hk,placeholder:'Enter username',autoFocus:true}),
      React.createElement('label',{className:'login-label'},'Password'),
      React.createElement('input',{className:'login-input',type:'password',value:pw,onChange:e=>setPw(e.target.value),onKeyDown:hk,placeholder:'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢'}),
      React.createElement('button',{className:'login-btn',onClick:submit},'Sign In'),
      React.createElement('div',{style:{marginTop:'12px',textAlign:'center'}},
        React.createElement('button',{style:{background:'none',border:'none',color:'var(--text3)',fontSize:'11px',cursor:'pointer',textDecoration:'underline'},onClick:()=>{if(window.confirm('Reset all app data to defaults? This cannot be undone.')){localStorage.removeItem('anaya_scheduler_data');window.location.reload();}}}, 'ðŸ”„ Reset app data (if locked out)'))

    )
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));

// â”€â”€ PWA: Inject manifest inline â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function(){
  const manifest = {
    name: "Team Calendar",
    short_name: "Team Cal",
    start_url: ".",
    display: "standalone",
    background_color: "#f0f4f8",
    theme_color: "#2563eb",
    orientation: "portrait-primary",
    icons: [
      { src: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Crect width='192' height='192' rx='32' fill='%232563eb'/%3E%3Ctext x='50%25' y='55%25' font-size='110' text-anchor='middle' dominant-baseline='middle' fill='white'%3E%F0%9F%93%85%3C/text%3E%3C/svg%3E", sizes: "192x192", type: "image/svg+xml" },
      { src: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' rx='80' fill='%232563eb'/%3E%3Ctext x='50%25' y='55%25' font-size='300' text-anchor='middle' dominant-baseline='middle' fill='white'%3E%F0%9F%93%85%3C/text%3E%3C/svg%3E", sizes: "512x512", type: "image/svg+xml" }
    ]
  };
  const blob = new Blob([JSON.stringify(manifest)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  document.getElementById('pwa-manifest').setAttribute('href', url);
})();

// â”€â”€ PWA: Register inline Service Worker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if('serviceWorker' in navigator){
  const swCode = `
    const CACHE = 'team-calendar-v1';
    self.addEventListener('install', e => {
      self.skipWaiting();
      e.waitUntil(caches.open(CACHE).then(c => c.addAll(['./', location.href])).catch(()=>{}));
    });
    self.addEventListener('activate', e => { e.waitUntil(self.clients.claim()); });
    self.addEventListener('fetch', e => {
      if(e.request.method !== 'GET') return;
      e.respondWith(
        caches.match(e.request).then(cached => cached || fetch(e.request).then(resp => {
          const clone = resp.clone();
          caches.open(CACHE).then(c => c.put(e.request, clone));
          return resp;
        }).catch(() => cached))
      );
    });
  `;
  const swBlob = new Blob([swCode], {type:'text/javascript'});
  const swUrl = URL.createObjectURL(swBlob);
  navigator.serviceWorker.register(swUrl).catch(()=>{});
}

// â”€â”€ PWA: Install prompt banner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let deferredInstallPrompt = null;
window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredInstallPrompt = e;
  const banner = document.createElement('div');
  banner.id = 'pwa-banner';
  banner.style.cssText = 'position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#1d4ed8;color:#fff;padding:10px 18px;border-radius:12px;font-family:inherit;font-size:13px;font-weight:600;display:flex;align-items:center;gap:10px;box-shadow:0 4px 20px rgba(37,99,235,.4);z-index:9999;white-space:nowrap;';
  banner.innerHTML = '<span>ðŸ“² Add to Home Screen</span><button onclick="window.__pwaInstall()" style="background:rgba(255,255,255,.2);border:1px solid rgba(255,255,255,.4);color:#fff;border-radius:8px;padding:5px 12px;font-weight:700;cursor:pointer;font-size:12px;">Install</button><button onclick="document.getElementById(\'pwa-banner\').remove()" style="background:none;border:none;color:rgba(255,255,255,.6);cursor:pointer;font-size:18px;line-height:1;padding:0;">x</button>';
  document.body.appendChild(banner);
});
window.__pwaInstall = async () => {
  if(!deferredInstallPrompt) return;
  deferredInstallPrompt.prompt();
  const {outcome} = await deferredInstallPrompt.userChoice;
  deferredInstallPrompt = null;
  const b = document.getElementById('pwa-banner');
  if(b) b.remove();
};

</script>
</body>
</html>
