<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anaya's Schedule</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Bricolage+Grotesque:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#f0f4f8;--bg2:#fff;--bg3:#f7f9fc;--bg4:#e8eef5;
  --border:#dde3ec;--border2:#c8d2e0;
  --text:#1a2236;--text2:#4a5878;--text3:#8a96aa;
  --accent:#e07b1a;--accent2:#f59332;--accent-dim:rgba(224,123,26,.10);
  --blue:#2563eb;--blue2:#1d4ed8;--blue-dim:rgba(37,99,235,.10);
  --green:#16a34a;--green-dim:rgba(22,163,74,.10);
  --red:#dc2626;--red-dim:rgba(220,38,38,.10);
  --yellow:#d97706;--yellow-dim:rgba(217,119,6,.10);
  --purple:#7c3aed;--purple-dim:rgba(124,58,237,.10);
  --r:8px;--r2:12px;
  --sh:0 2px 16px rgba(30,50,90,.10);--sh2:0 4px 24px rgba(30,50,90,.15);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Bricolage Grotesque',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;font-size:14px;}
::-webkit-scrollbar{width:6px;height:6px;}
::-webkit-scrollbar-track{background:var(--bg4);}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:3px;}

/* LOGIN */
.login-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#e8f0fe,#f0f4f8 50%,#fff3e8);position:relative;}
.login-box{width:420px;background:var(--bg2);border:1px solid var(--border);border-radius:20px;padding:40px;box-shadow:var(--sh2);}
.login-logo-wrap{display:flex;justify-content:center;margin-bottom:14px;}
.login-logo-img{height:76px;width:auto;object-fit:contain;}
.login-title{
  font-size:48px;font-weight:900;color:#f59e0b;text-align:center;margin-bottom:2px;
  letter-spacing:-1px;line-height:1;
  text-shadow:-3px -3px 0 #111, 3px -3px 0 #111, -3px 3px 0 #111, 3px 3px 0 #111,
              -3px 0 0 #111, 3px 0 0 #111, 0 -3px 0 #111, 0 3px 0 #111,
              -2px -2px 0 #111, 2px -2px 0 #111, -2px 2px 0 #111, 2px 2px 0 #111;
  font-family:'Arial Black','Arial',sans-serif;
}
.login-sub{color:var(--text2);margin-bottom:22px;font-size:13px;text-align:center;}
.login-label{display:block;font-size:11px;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;}
.login-input{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:10px 14px;color:var(--text);font-family:inherit;font-size:14px;outline:none;transition:border-color .2s;margin-bottom:14px;}
.login-input:focus{border-color:var(--blue);}
.login-btn{width:100%;background:var(--blue);color:#fff;border:none;border-radius:var(--r);padding:12px;font-family:inherit;font-size:15px;font-weight:700;cursor:pointer;transition:background .2s;}
.login-btn:hover{background:var(--blue2);}
.login-error{color:var(--red);font-size:13px;margin-bottom:12px;background:var(--red-dim);border-radius:var(--r);padding:8px 12px;}
.login-version{position:fixed;bottom:12px;right:16px;font-size:11px;color:var(--text3);font-family:'DM Mono',monospace;opacity:.6;}
.lang-float-btn{
  position:fixed;bottom:20px;left:20px;z-index:9999;
  background:rgba(37,99,235,0.92);color:#fff;
  border:2px solid rgba(255,255,255,0.25);
  border-radius:24px;padding:8px 16px;
  font-family:inherit;font-size:13px;font-weight:700;
  cursor:pointer;box-shadow:0 4px 16px rgba(37,99,235,.4);
  transition:all .2s;backdrop-filter:blur(4px);
}
.lang-float-btn:hover{background:rgba(29,78,216,0.95);transform:translateY(-2px);box-shadow:0 6px 20px rgba(37,99,235,.5);}
.login-fp-link{text-align:center;margin-top:14px;font-size:12px;color:var(--blue);cursor:pointer;text-decoration:underline;}
.login-fp-link:hover{color:var(--blue2);}

/* FORGOT PASSWORD STEPS */
.fp-step{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r2);padding:16px;margin-bottom:14px;}
.fp-step-label{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text3);margin-bottom:8px;}
.fp-back{font-size:12px;color:var(--blue);cursor:pointer;text-align:center;margin-top:12px;text-decoration:underline;}

/* APP */
.app{display:flex;flex-direction:column;min-height:100vh;}
.navbar{display:flex;align-items:center;background:var(--blue);padding:0 16px;height:54px;position:sticky;top:0;z-index:100;gap:4px;box-shadow:0 2px 8px rgba(37,99,235,.25);}
.nav-logo{font-size:17px;font-weight:800;letter-spacing:-.5px;margin-right:16px;white-space:nowrap;display:flex;align-items:center;gap:8px;}
.nav-logo-img{height:32px;width:auto;object-fit:contain;border-radius:6px;}
.nav-logo-brand{color:var(--accent2);font-family:'Bricolage Grotesque',sans-serif;font-weight:800;}
.nav-logo-sub{color:rgba(255,255,255,.7);font-family:'Bricolage Grotesque',sans-serif;font-weight:500;font-size:13px;}
.nav-links{display:flex;gap:2px;flex:1;}
.nav-link{padding:6px 12px;border-radius:var(--r);color:rgba(255,255,255,.75);font-size:13px;font-weight:600;cursor:pointer;transition:all .15s;white-space:nowrap;border:none;background:none;font-family:inherit;}
.nav-link:hover{background:rgba(255,255,255,.15);color:#fff;}
.nav-link.active{background:rgba(255,255,255,.2);color:#fff;}
.nav-user{display:flex;align-items:center;gap:8px;margin-left:auto;}
.nav-name{color:rgba(255,255,255,.85);font-size:13px;font-weight:600;}
.nav-role-badge{font-size:10px;font-weight:700;padding:3px 8px;border-radius:20px;text-transform:uppercase;letter-spacing:.5px;}
.nav-role-badge.admin{background:var(--accent-dim);color:var(--accent2);border:1px solid rgba(224,123,26,.3);}
.nav-role-badge.worker{background:rgba(255,255,255,.15);color:#fff;}
.nav-btn{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.3);border-radius:var(--r);padding:5px 10px;color:#fff;font-family:inherit;font-size:12px;cursor:pointer;transition:all .15s;white-space:nowrap;}
.nav-btn:hover{background:rgba(255,255,255,.25);}

/* MAIN */
.main{flex:1;display:flex;overflow:hidden;}

/* SIDEBAR â€” Projects (admin) */
.sidebar{width:210px;min-width:210px;background:var(--bg2);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow:hidden;box-shadow:2px 0 8px rgba(30,50,90,.06);}
.sidebar-header{padding:14px;border-bottom:1px solid var(--border);background:var(--bg3);}
.sidebar-title{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--text3);}
.sidebar-count{font-size:20px;font-weight:800;color:var(--text);line-height:1;margin-top:2px;}
.sidebar-count span{color:var(--blue);}
.sidebar-list{flex:1;overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:5px;}
.drag-card{border:1px solid var(--border);border-radius:var(--r);padding:9px 10px;cursor:grab;transition:all .15s;user-select:none;position:relative;}
.drag-card:hover{transform:translateY(-1px);box-shadow:0 3px 10px rgba(0,0,0,.15);}
.drag-card.dragging{opacity:.4;cursor:grabbing;}
.drag-card-name{font-size:12px;font-weight:700;color:var(--text);}
.drag-card-addr{font-size:10px;color:var(--text3);margin-top:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.drag-card-hrs{font-family:'DM Mono',monospace;font-size:11px;color:var(--text3);margin-top:3px;}
.drag-card-hrs.over{color:var(--yellow);}

/* STAGE PILLS */
.stage-pill{font-size:10px;font-weight:700;padding:2px 8px;border-radius:20px;text-transform:uppercase;letter-spacing:.3px;white-space:nowrap;}

/* SCHEDULE */
.schedule-area{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.schedule-toolbar{display:flex;align-items:center;gap:10px;padding:10px 14px;border-bottom:1px solid var(--border);background:var(--bg2);flex-wrap:wrap;}
.week-nav{display:flex;align-items:center;gap:6px;}
.week-btn{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text2);font-size:16px;transition:all .15s;}
.week-btn:hover{border-color:var(--blue);color:var(--blue);}
.week-label{font-size:13px;font-weight:700;color:var(--text);min-width:170px;text-align:center;}
.today-btn{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:0 12px;height:30px;font-family:inherit;font-size:12px;font-weight:600;color:var(--text2);cursor:pointer;transition:all .15s;}
.today-btn:hover{border-color:var(--blue);color:var(--blue);}

/* GRID */
.grid-wrap{flex:1;overflow:auto;padding:10px;}
.grid-table{min-width:800px;width:100%;border-collapse:separate;border-spacing:0;}
.grid-th{background:var(--blue);padding:8px 10px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:rgba(255,255,255,.85);text-align:center;border-bottom:2px solid var(--blue2);position:sticky;top:0;z-index:10;white-space:nowrap;}
.grid-th.today-col{color:var(--accent2);background:var(--blue2);}
.grid-th-project{text-align:left;min-width:210px;width:210px;background:var(--blue);position:sticky;left:0;z-index:11;}
.project-row-label{padding:0;border-right:1px solid var(--border);border-bottom:1px solid var(--border);background:var(--bg2);vertical-align:top;position:sticky;left:0;z-index:5;min-width:210px;width:210px;}
.project-label-inner{padding:10px 12px;}
.project-name{font-size:13px;font-weight:800;color:var(--text);line-height:1.2;}
.project-addr{font-size:11px;color:var(--text2);margin-top:2px;}
.project-summary{font-size:11px;color:var(--text3);margin-top:3px;font-style:italic;}
.project-meta{display:flex;align-items:center;gap:5px;margin-top:6px;flex-wrap:wrap;}
.project-badge{font-family:'DM Mono',monospace;font-size:10px;color:var(--text3);}

/* DAY CELLS */
.day-cell{border-right:1px solid var(--border);border-bottom:1px solid var(--border);vertical-align:top;min-height:70px;padding:5px;background:var(--bg2);transition:background .15s;cursor:default;position:relative;min-width:100px;}
.day-cell.today-col{background:#fffbf5;}
.day-cell.drag-over{background:var(--blue-dim);outline:2px dashed var(--blue);outline-offset:-2px;}
.day-hours-total{font-family:'DM Mono',monospace;font-size:10px;color:var(--text3);margin-bottom:3px;}
.drop-hint{font-size:10px;color:var(--text3);text-align:center;padding:6px 4px;border:1px dashed var(--border2);border-radius:6px;margin-top:2px;opacity:0;transition:opacity .2s;pointer-events:none;}
.day-cell:hover .drop-hint{opacity:1;}
.day-cell.drag-over .drop-hint{opacity:1;color:var(--blue);border-color:var(--blue);}

/* ASSIGN BLOCKS */
.assign-block{border-radius:6px;padding:5px 7px;margin-bottom:3px;cursor:pointer;transition:all .15s;border:1px solid rgba(0,0,0,.12);}
.assign-block:hover{filter:brightness(.93);box-shadow:0 2px 6px rgba(0,0,0,.15);}
.assign-block.dragging{opacity:.4;}
.assign-worker-name{font-size:11px;font-weight:700;line-height:1.2;}
.assign-meta{display:flex;align-items:center;justify-content:space-between;margin-top:3px;}
.assign-hours{font-family:'DM Mono',monospace;font-size:10px;color:var(--text2);}
.assign-task-tag{font-size:9px;font-weight:700;color:var(--accent);max-width:60px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}

/* TASK DROPDOWN */
.task-section{border:1px solid var(--border);border-radius:var(--r);overflow:hidden;margin-top:6px;}
.task-section-hdr{display:flex;align-items:center;justify-content:space-between;padding:9px 12px;background:var(--bg3);cursor:pointer;user-select:none;}
.task-section-title{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text2);}
.task-arrow{font-size:10px;color:var(--text3);transition:transform .2s;}
.task-arrow.open{transform:rotate(90deg);}
.task-body{padding:10px 12px;background:var(--bg2);}
.task-select{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;color:var(--text);font-family:inherit;font-size:14px;outline:none;cursor:pointer;}
.task-select:focus{border-color:var(--blue);}
.task-readonly{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;font-size:14px;color:var(--text);}
.task-none{font-size:12px;color:var(--text3);font-style:italic;}
.task-mgr-item{display:flex;align-items:center;gap:6px;padding:6px 8px;background:var(--bg3);border:1px solid var(--border);border-radius:6px;margin-bottom:4px;}
.task-mgr-name{flex:1;font-size:13px;color:var(--text);}
.task-del-btn{background:none;border:none;color:var(--text3);cursor:pointer;font-size:16px;padding:0;line-height:1;transition:color .15s;}
.task-del-btn:hover{color:var(--red);}
.task-add-row{display:flex;gap:6px;margin-top:6px;}
.task-add-input{flex:1;background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:7px 10px;color:var(--text);font-family:inherit;font-size:13px;outline:none;}
.task-add-input:focus{border-color:var(--blue);}
.task-add-btn{background:var(--blue);color:#fff;border:none;border-radius:6px;padding:7px 12px;font-family:inherit;font-size:12px;font-weight:700;cursor:pointer;}
.task-add-btn:hover{background:var(--blue2);}

/* WORKER CHECKLIST in assignment modal */
.worker-checklist{display:flex;flex-direction:column;gap:4px;max-height:180px;overflow-y:auto;margin-top:6px;}
.worker-check-item{display:flex;align-items:center;gap:8px;padding:7px 10px;background:var(--bg3);border:1px solid var(--border);border-radius:6px;cursor:pointer;transition:all .15s;}
.worker-check-item:hover{border-color:var(--blue);}
.worker-check-item.checked{background:var(--blue-dim);border-color:rgba(37,99,235,.3);}
.worker-check-item input[type=checkbox]{accent-color:var(--blue);width:15px;height:15px;cursor:pointer;}
.worker-check-name{font-size:13px;font-weight:600;color:var(--text);}
.worker-task-sel{font-size:12px;background:var(--bg2);border:1px solid var(--border);border-radius:5px;padding:3px 7px;color:var(--text);font-family:inherit;outline:none;margin-left:auto;}
.worker-task-sel:focus{border-color:var(--blue);}

/* PAGES */
.page{padding:22px;overflow-y:auto;flex:1;}
.page-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:22px;flex-wrap:wrap;gap:10px;}
.page-title{font-size:21px;font-weight:800;letter-spacing:-.5px;}
.btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:var(--r);font-family:inherit;font-size:13px;font-weight:600;cursor:pointer;transition:all .15s;border:1px solid transparent;}
.btn-primary{background:var(--blue);color:#fff;border-color:var(--blue);}
.btn-primary:hover{background:var(--blue2);}
.btn-ghost{background:var(--bg3);color:var(--text2);border-color:var(--border);}
.btn-ghost:hover{border-color:var(--blue);color:var(--blue);}
.btn-danger{background:var(--red-dim);color:var(--red);border-color:var(--red);}
.btn-danger:hover{background:var(--red);color:#fff;}
.btn-sm{padding:5px 10px;font-size:12px;}
.btn-green{background:var(--green);color:#fff;border-color:var(--green);}
.btn-green:hover{filter:brightness(0.9);}

.card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r2);overflow:hidden;box-shadow:0 1px 6px rgba(30,50,90,.07);}
.table{width:100%;border-collapse:collapse;}
.table th{padding:11px 14px;text-align:left;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text3);border-bottom:1px solid var(--border);background:var(--bg3);}
.table td{padding:11px 14px;border-bottom:1px solid var(--border);font-size:13px;color:var(--text);vertical-align:middle;}
.table tr:last-child td{border-bottom:none;}
.table tr:hover td{background:var(--bg3);}
.mono{font-family:'DM Mono',monospace;font-size:12px;}
.progress-bar{height:5px;background:var(--bg4);border-radius:3px;overflow:hidden;}
.progress-fill{height:100%;background:var(--accent);border-radius:3px;transition:width .3s;}
.progress-fill.done{background:var(--green);}
.empty-state{text-align:center;padding:56px 20px;color:var(--text3);}
.empty-icon{font-size:38px;margin-bottom:12px;}
.empty-text{font-size:15px;font-weight:600;color:var(--text2);margin-bottom:4px;}
.empty-sub{font-size:13px;}
.tag{font-size:10px;font-weight:700;padding:2px 7px;border-radius:20px;background:var(--bg4);color:var(--text2);text-transform:uppercase;letter-spacing:.3px;}
.info-box{background:var(--blue-dim);border:1px solid rgba(37,99,235,.2);border-radius:var(--r);padding:10px 14px;font-size:13px;color:var(--text2);margin-bottom:14px;}

/* MODAL */
.modal-overlay{position:fixed;inset:0;background:rgba(30,50,90,.45);backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px;}
.modal{background:var(--bg2);border:1px solid var(--border);border-radius:16px;width:100%;max-width:500px;box-shadow:var(--sh2);animation:modal-in .2s ease;max-height:90vh;overflow-y:auto;}
@keyframes modal-in{from{transform:scale(.95) translateY(10px);opacity:0;}to{transform:scale(1) translateY(0);opacity:1;}}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px 22px 0;}
.modal-title{font-size:17px;font-weight:800;}
.modal-close{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text2);font-size:18px;transition:all .15s;}
.modal-close:hover{border-color:var(--red);color:var(--red);}
.modal-body{padding:18px 22px;}
.modal-footer{display:flex;gap:8px;justify-content:flex-end;padding:0 22px 18px;}

/* FORM */
.form-group{margin-bottom:14px;}
.form-label{display:block;font-size:11px;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;margin-bottom:5px;}
.form-input{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;color:var(--text);font-family:inherit;font-size:14px;outline:none;transition:border-color .2s;}
.form-input:focus{border-color:var(--blue);}
.form-select{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;color:var(--text);font-family:inherit;font-size:14px;outline:none;cursor:pointer;}
.form-select:focus{border-color:var(--blue);}
.form-textarea{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:9px 12px;color:var(--text);font-family:inherit;font-size:14px;outline:none;transition:border-color .2s;resize:vertical;min-height:72px;}
.form-textarea:focus{border-color:var(--blue);}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.form-hint{font-size:11px;color:var(--text3);margin-top:4px;}

/* COLOR PICKER for jobs */
.job-color-row{display:flex;gap:6px;flex-wrap:wrap;margin-top:4px;}
.job-color-swatch{width:24px;height:24px;border-radius:50%;cursor:pointer;border:3px solid transparent;transition:transform .1s;flex-shrink:0;}
.job-color-swatch:hover{transform:scale(1.2);}
.job-color-swatch.selected{border-color:var(--text);}

/* TOAST */
.toast-container{position:fixed;bottom:22px;right:22px;z-index:2000;display:flex;flex-direction:column;gap:7px;}
.toast{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r2);padding:11px 15px;min-width:220px;box-shadow:var(--sh2);display:flex;align-items:center;gap:9px;font-size:13px;font-weight:600;color:var(--text);animation:toast-in .3s ease;}
.toast.success{border-left:4px solid var(--green);}
.toast.error{border-left:4px solid var(--red);}
@keyframes toast-in{from{transform:translateX(100%);opacity:0;}to{transform:translateX(0);opacity:1;}}
.confirm-msg{color:var(--text2);font-size:14px;line-height:1.6;}

/* DETAIL STATS */
.detail-stat{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:12px 14px;}
.detail-stat-label{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text3);margin-bottom:3px;}
.detail-stat-value{font-size:20px;font-weight:800;font-family:'DM Mono',monospace;color:var(--text);}
.detail-stat-value.accent{color:var(--accent);}

/* STAGE MANAGER */
.stage-chip{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:20px;font-size:12px;font-weight:700;margin:3px;border:1px solid;}
.stage-chip-del{background:none;border:none;cursor:pointer;font-size:14px;line-height:1;padding:0 0 0 2px;opacity:.6;}
.stage-chip-del:hover{opacity:1;}
.color-row{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px;}
.color-swatch{width:24px;height:24px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:transform .1s;}
.color-swatch:hover{transform:scale(1.2);}
.color-swatch.selected{border-color:var(--text);}

/* IMPORT/EXPORT PANEL - subtler */
.ie-panel{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:10px 14px;margin-bottom:16px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
.ie-panel-title{font-size:12px;font-weight:700;color:var(--text3);white-space:nowrap;}
.ie-row{display:flex;gap:6px;align-items:center;}

/* WORKERS PAGE - admin section at top */
.admin-section-hdr{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:var(--accent);margin-bottom:8px;margin-top:0;padding-bottom:6px;border-bottom:2px solid var(--accent-dim);}
.workers-section-hdr{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:var(--text3);margin-bottom:8px;margin-top:20px;padding-bottom:6px;border-bottom:2px solid var(--border);}

@media(max-width:768px){
  .sidebar{display:none;}
  .navbar{padding:0 10px;}
  .nav-link{padding:5px 8px;font-size:12px;}
  .page{padding:14px;}
  .form-row{grid-template-columns:1fr;}
  .grid-th-project,.project-row-label{min-width:140px;width:140px;}
  .day-cell{min-width:80px;}
  .week-label{font-size:12px;min-width:130px;}
  .modal{margin:0 8px;}
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCHEDULER LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sched-layout{display:flex;flex:1;overflow:hidden;}

/* â”€â”€ Project Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.proj-sidebar{
  width:195px;min-width:195px;flex-shrink:0;
  background:var(--bg2);border-right:1px solid var(--border);
  overflow-y:auto;padding:8px;
  display:flex;flex-direction:column;gap:5px;
}
.proj-sidebar-hdr{
  font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;
  color:var(--text3);padding:4px 4px 8px;border-bottom:1px solid var(--border);
  margin-bottom:4px;
}
.proj-card{
  background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);
  padding:8px 10px;border-left-width:4px!important;
  transition:transform .12s,box-shadow .12s;
  user-select:none;
}
.proj-card:hover{transform:translateY(-1px);box-shadow:var(--sh);}
.proj-card-dragging{opacity:.45;transform:rotate(1deg);}
.proj-card-name{font-size:12px;font-weight:800;line-height:1.2;word-break:break-word;}
.proj-card-addr{font-size:10px;color:var(--text3);margin-top:2px;}
.proj-card-meta{font-family:"DM Mono",monospace;font-size:9px;color:var(--text3);}
.proj-card-summary{font-size:10px;color:var(--text3);font-style:italic;margin-top:4px;line-height:1.4;}

/* â”€â”€ Schedule Area â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.schedule-area{flex:1;display:flex;flex-direction:column;overflow:hidden;}

/* â”€â”€ Calendar Grid Wrapper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cal-grid-wrap{flex:1;overflow:auto;padding:0;}

/* â”€â”€ Calendar Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cal-table{
  width:100%;border-collapse:collapse;table-layout:fixed;
  min-width:560px;
}
.cal-th{
  background:var(--blue);color:rgba(255,255,255,.9);
  padding:8px 6px;font-size:11px;font-weight:700;
  text-transform:uppercase;letter-spacing:.7px;text-align:center;
  border:none;border-bottom:2px solid var(--blue2);
  position:sticky;top:0;z-index:10;
}

/* â”€â”€ Calendar Week Row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cal-week-row{}

/* â”€â”€ Calendar Cell â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cal-cell{
  border:1px solid var(--border);
  padding:4px 3px 3px;
  vertical-align:top;
  min-height:110px;
  height:110px;
  background:var(--bg2);
  transition:background .1s;
  overflow:visible;  /* let blocks breathe */
  position:relative;
}
.cal-cell:hover{background:#f6f9ff;}
.cal-today{background:#fffcf5!important;}
.cal-other-month{background:var(--bg3);}
.cal-other-month .cal-date-num{color:var(--border2);}
.cal-drag-over{
  background:var(--blue-dim)!important;
  outline:2px dashed var(--blue);
  outline-offset:-2px;
}

/* â”€â”€ Date Number â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cal-date-num{
  font-size:12px;font-weight:600;color:var(--text3);
  width:22px;height:22px;display:flex;align-items:center;
  justify-content:center;border-radius:50%;margin-bottom:2px;
  flex-shrink:0;
}
.cal-date-today{
  background:var(--blue);color:#fff;font-weight:800;
}

/* â”€â”€ Schedule Block â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cal-block{
  background:var(--block-color,#1d4ed8);
  color:#fff;
  margin-bottom:2px;
  padding:3px 6px 3px 6px;
  cursor:pointer;
  transition:filter .12s,transform .1s;
  position:relative;
  overflow:visible;
  border-radius:0;  /* flat by default â€” edges get radius */
  min-height:20px;
}
/* First day of block: left rounded */
.cal-block-first{
  border-top-left-radius:5px;
  border-bottom-left-radius:5px;
  margin-left:1px;
}
/* Last day of block: right rounded */
.cal-block-last{
  border-top-right-radius:5px;
  border-bottom-right-radius:5px;
  margin-right:1px;
}
/* Single-day block: fully rounded */
.cal-block-first.cal-block-last{
  border-radius:5px;
  margin:0 1px;
}
.cal-block:hover{filter:brightness(.88);transform:translateY(-1px);}

/* â”€â”€ Block Header (job name + stage, first day only) â”€â”€â”€â”€â”€â”€â”€ */
.cal-block-header{
  display:flex;align-items:baseline;gap:4px;
  margin-bottom:2px;
  flex-wrap:nowrap;
  overflow:hidden;
}
.cal-block-name{
  font-size:11px;font-weight:800;color:#fff;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  flex:1;min-width:0;
  text-shadow:0 1px 2px rgba(0,0,0,.25);
}
.cal-block-stage{
  font-size:9px;font-weight:700;
  background:rgba(255,255,255,.25);
  padding:1px 5px;border-radius:20px;
  white-space:nowrap;flex-shrink:0;
  text-transform:uppercase;letter-spacing:.3px;
}

/* â”€â”€ Worker rows inside block â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cal-block-workers{
  display:flex;flex-direction:column;gap:1px;
}
.cal-worker-row{
  display:flex;align-items:center;gap:4px;
  min-width:0;
}
.cal-worker-dot{
  width:7px;height:7px;border-radius:50%;
  flex-shrink:0;display:inline-block;
  border:1px solid rgba(255,255,255,.4);
}
.cal-worker-name{
  font-size:11px;font-weight:600;color:#fff;
  white-space:nowrap;
  overflow:hidden;text-overflow:ellipsis;
  text-shadow:0 1px 2px rgba(0,0,0,.3);
  flex:1;min-width:0;
  line-height:1.3;
}

/* â”€â”€ Drop Hint â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cal-drop-hint{
  font-size:18px;color:var(--border2);
  text-align:center;padding-top:18px;
  opacity:0;transition:opacity .15s;pointer-events:none;
}
/* Task chip on calendar */
.cal-task-chip{
  font-size:9px;font-weight:700;
  background:rgba(124,58,237,0.85);
  color:#fff;
  padding:1px 5px;border-radius:20px;
  white-space:nowrap;flex-shrink:0;
  max-width:80px;overflow:hidden;text-overflow:ellipsis;
  margin-left:2px;
}
.cal-cell:hover .cal-drop-hint{opacity:0.5;}
.cal-drag-over .cal-drop-hint{opacity:1!important;color:var(--blue);}

/* Language toggle button */
.lang-btn{font-size:12px!important;}

/* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:900px){
  .proj-sidebar{width:150px;min-width:150px;}
  .cal-worker-name{font-size:10px;}
  .cal-block-name{font-size:10px;}
}
@media(max-width:640px){
  .proj-sidebar{display:none;}
  .cal-cell{height:80px;min-height:80px;}
}

</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script>
const {useState,useEffect,useCallback,useMemo,useRef}=React;

const APP_VERSION='v2.1.0';

// â”€â”€ CLOUD SYNC CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Set this to your sync server URL (see sync-server.js in your GitHub repo)
// e.g. 'https://your-server.railway.app' or 'http://localhost:3000'
// Leave as '' to disable cloud sync (use local only)
// â†“â†“â†“ PASTE YOUR RAILWAY URL HERE â€” e.g. 'https://anaya-s-calendar-production.up.railway.app'
const SYNC_SERVER_URL = '';  // leave empty string = cloud sync disabled
const SYNC_KEY = 'anaya_sched_v2'; // matches localStorage key

async function cloudSave(data){
  if(!SYNC_SERVER_URL) return {ok:false,reason:'NO_SERVER'};
  try{
    const r=await fetch(SYNC_SERVER_URL+'/save',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({key:SYNC_KEY,data})
    });
    return r.ok?{ok:true}:{ok:false,reason:'Server error '+r.status};
  }catch(e){return {ok:false,reason:e.message};}
}
async function cloudLoad(){
  if(!SYNC_SERVER_URL) return {ok:false,reason:'NO_SERVER'};
  try{
    const r=await fetch(SYNC_SERVER_URL+'/load?key='+SYNC_KEY);
    if(!r.ok) return {ok:false,reason:'Server error '+r.status};
    const j=await r.json();
    return j.data?{ok:true,data:j.data}:{ok:false,reason:'No data saved yet'};
  }catch(e){return {ok:false,reason:e.message};}
}

// â”€â”€ TRANSLATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const T={
  en:{
    schedule:'Schedule',jobs:'Jobs',workers:'Workers',stages:'Stages',
    signOut:'Sign Out',signIn:'Sign In',username:'Username',password:'Password',
    forgotPw:'Forgot password?',today:'Today',
    newJob:'+ New Job',editJob:'Edit Job',addWorker:'+ Add Worker',addAdmin:'+ Add Admin',
    projectName:'Project Name',address:'Address',customer:'Customer',stage:'Stage',
    estDays:'Estimated Days',sqft:'Square Footage',summary:'Project Summary',
    calColor:'Calendar Color',estimateRef:'Estimate Reference # (Admin Only)',
    save:'Save',cancel:'Cancel',done:'Done',create:'Create',delete:'Delete',edit:'Edit',
    remove:'Remove',close:'Close',
    noJobs:'No jobs yet',noWorkers:'No workers yet',createFirst:'Create your first job to get started',
    activeJobs:'active jobs',dragHint:'â˜ï¸ Drag onto calendar:',
    assignWorkers:'Assign Workers',noAssigned:'No workers assigned on this day',
    assignedWorkers:'Assigned Workers',
    estDaysLabel:'Est. Days',sqftLabel:'Square Footage',tasksLabel:'Tasks',
    plannedHours:'Planned Hours',adminNotes:'Admin Notes',assignedTask:'Assigned Task',
    noTasksSet:'No tasks set for this job yet',noTaskAssigned:'No task assigned yet',
    noNotesFromAdmin:'No notes from admin',
    manageStages:'Manage Stages',stageName:'Stage Name',newStagePlaceholder:'e.g. Caulking, Staining',
    addStage:'+ Add Stage',noStages:'No stages',
    adminAccounts:'ğŸ” Admin Accounts',employees:'ğŸ‘· Employees',
    name:'Name',phone:'Phone',actions:'Actions',
    fullName:'Full Name',confirmPw:'Confirm Password',
    secQuestion:'Security Question',secAnswer:'Security Answer',
    changePassword:'Change Password',newPassword:'New Password',
    resetPassword:'Reset Password',backToLogin:'â† Back to login',
    viewOnly:'ğŸ‘ View Only',
    day:'day',days:'days',
    backup:'ğŸ’¾ Backup / Restore:',export:'â¬‡ Export',import:'â¬† Import',
    shareCode:'ğŸ“‹ Share Code',loadCode:'ğŸ“¥ Load Code',
    copyClipboard:'ğŸ“‹ Copy to Clipboard',
    shareHint:'ğŸ“‹ Share this code with employees so they can load the latest schedule:',
    loadHint:'ğŸ“¥ Paste the share code from your admin:',
    loadSchedule:'Load Schedule',schedSynced:'Schedule synced!',
    invalidCode:'Invalid sync code',exported:'Data exported!',imported:'Data imported successfully!',
    invalidFile:'Invalid data file â€” could not import.',
    noTasksYet:'No task options yet.',
    manageTaskOpts:'âš™ Manage Task Options',
    taskOptsHint:"Admin sets these task options. When assigning a worker, pick which task they're doing.",
    taskPlaceholder:'e.g. Roll walls, Cut in ceilingsâ€¦',
    addTask:'+ Add',
    workerUpdated:'Worker updated',workerCreated:'Worker created',
    adminUpdated:'Admin updated',adminCreated:'Admin account created',adminDeleted:'Admin deleted',
    cannotDeleteLastAdmin:'Cannot delete the last admin',
    jobUpdated:'Job updated',jobCreated:'Job created',jobDeleted:'Deleted',
    saved:'Saved',moved:'Moved',removed:'Removed',
    passwordUpdated:'Password updated â€” please sign in',
    passwordUpdatedShort:'Password updated',
    areYouSure:'Are you sure?',
    deleteConfirm:'Delete',
    removeWorkerFrom:'Remove',fromThisDay:'from this day?',
    allAssignmentsRemoved:'? All assignments will be removed.',
    invalidUsernameOrPw:'Invalid username or password',
    usernameNotFound:'Username not found.',
    noSecQuestion:'No security question set for this account. Contact an admin.',
    incorrectAnswer:'Incorrect answer.',
    enterNewPw:'Enter a new password.',
    pwNoMatch:'Passwords do not match.',
    nameUsernameRequired:'Name and username are required.',
    pwRequired:'Password is required.',
    identityVerified:'âœ“ Identity verified! Set your new password.',
    enterUsernameReset:'Enter your username to start the password reset process.',
    answerSecQuestion:'Answer your security question',
    nextBtn:'Next â†’',verifyAnswer:'Verify Answer â†’',setNewPw:'Set New Password',
    teamScheduling:'Team Calendar',
    passwordUpdatedSignIn:'âœ“ Password updated â€” sign in with your new password',
    updatePassword:'Update Password',
    employeeColor:'Employee Color (shows on calendar)',
    noTaskOptions:'â€” No specific task â€”',taskDots:'Taskâ€¦',
    leaveBlankPw:'Leave password blank to keep current password.',
    createWorker:'Create Worker',saveChanges:'Save Changes',createAdmin:'Create Admin',
    addWorkerHint:"Create a worker and their login. They will sign in with their username and password.",
    adminWarning:'âš ï¸ Admin accounts have full access to everything.',
    selectQuestion:'â€” Select a question â€”',selectQuestionOpt:'â€” Select a question (optional) â€”',
    newPwPlaceholder:'Enter new password',repeatPw:'Repeat new password',
    leaveBlankKeep:'Leave blank to keep',setPw:'Set password',repeatPwLabel:'Repeat password',
    deleteAdminConfirm:'Delete admin account for ',
    // Stages page
    stagesAndTasks:'Stages & Tasks',stagesTab:'Stages',
    stageTasks:'Stage Tasks',addTaskToStage:'Add tasks to stage:',
    stagesHint:'These stages appear in all job dropdowns. Each stage can have preset tasks.',
    noAssignedStage:'No stage assigned',
    // Projects sidebar
    projectsTitle:'Projects',projectInfo:'Project Info',
    contracted:'Contracted',completed:'Completed',
    contractedJobs:'Contracted Jobs',completedJobs:'Completed Jobs',
    contractedHint:'Jobs contracted but not yet scheduled',
    completedHint:'Jobs that have been completed',
    noContracted:'No contracted jobs yet',noCompleted:'No completed jobs yet',
    markContracted:'ğŸ“¤ Unschedule',markCompleted:'âœ“ Complete',markActive:'â†© Active',
    addContracted:'+ Add Contracted',
    months:'January,February,March,April,May,June,July,August,September,October,November,December',
    weekDays:'Sun,Mon,Tue,Wed,Thu,Fri,Sat',
    today:'Today',viewOnly:'ğŸ‘ View Only',
    scheduleBlock:'Schedule Block',addToCalendar:'Add to Calendar',
    stageForBlock:'Stage for this block',duration:'Duration (days)',
    startingDate:'Starting',
    workersOnDay:'Workers on this day',noWorkersDay:'No workers assigned on this day',
    removeBlock:'Remove Block',
    removeBlockConfirm:'Remove this entire scheduled block and all its assignments?',
  },
  es:{
    schedule:'Horario',jobs:'Trabajos',workers:'Empleados',stages:'Etapas',
    signOut:'Cerrar SesiÃ³n',signIn:'Iniciar SesiÃ³n',username:'Usuario',password:'ContraseÃ±a',
    forgotPw:'Â¿Olvidaste tu contraseÃ±a?',today:'Hoy',
    newJob:'+ Nuevo Trabajo',editJob:'Editar Trabajo',addWorker:'+ Agregar Empleado',addAdmin:'+ Agregar Admin',
    projectName:'Nombre del Proyecto',address:'DirecciÃ³n',customer:'Cliente',stage:'Etapa',
    estDays:'DÃ­as Estimados',sqft:'Pies Cuadrados',summary:'DescripciÃ³n del Proyecto',
    calColor:'Color en Calendario',estimateRef:'# Estimado (Solo Admin)',
    save:'Guardar',cancel:'Cancelar',done:'Listo',create:'Crear',delete:'Eliminar',edit:'Editar',
    remove:'Quitar',close:'Cerrar',
    noJobs:'Sin trabajos aÃºn',noWorkers:'Sin empleados aÃºn',createFirst:'Crea tu primer trabajo para empezar',
    activeJobs:'trabajos activos',dragHint:'â˜ï¸ Arrastrar al calendario:',
    assignWorkers:'Asignar Empleados',noAssigned:'Sin empleados asignados ese dÃ­a',
    assignedWorkers:'Empleados Asignados',
    estDaysLabel:'DÃ­as Est.',sqftLabel:'Pies Cuadrados',tasksLabel:'Tareas',
    plannedHours:'Horas Planeadas',adminNotes:'Notas del Admin',assignedTask:'Tarea Asignada',
    noTasksSet:'No hay tareas para este trabajo aÃºn',noTaskAssigned:'Sin tarea asignada',
    noNotesFromAdmin:'Sin notas del admin',
    manageStages:'Gestionar Etapas',stageName:'Nombre de Etapa',newStagePlaceholder:'ej. Calafateo, TeÃ±ido',
    addStage:'+ Agregar Etapa',noStages:'Sin etapas',
    adminAccounts:'ğŸ” Cuentas Admin',employees:'ğŸ‘· Empleados',
    name:'Nombre',phone:'TelÃ©fono',actions:'Acciones',
    fullName:'Nombre Completo',confirmPw:'Confirmar ContraseÃ±a',
    secQuestion:'Pregunta de Seguridad',secAnswer:'Respuesta de Seguridad',
    changePassword:'Cambiar ContraseÃ±a',newPassword:'Nueva ContraseÃ±a',
    resetPassword:'Restablecer ContraseÃ±a',backToLogin:'â† Volver al inicio',
    viewOnly:'ğŸ‘ Solo Ver',
    day:'dÃ­a',days:'dÃ­as',
    backup:'ğŸ’¾ Respaldo / Restaurar:',export:'â¬‡ Exportar',import:'â¬† Importar',
    shareCode:'ğŸ“‹ CÃ³digo Compartir',loadCode:'ğŸ“¥ Cargar CÃ³digo',
    copyClipboard:'ğŸ“‹ Copiar al Portapapeles',
    shareHint:'ğŸ“‹ Comparte este cÃ³digo con empleados para cargar el horario actualizado:',
    loadHint:'ğŸ“¥ Pega el cÃ³digo de tu admin:',
    loadSchedule:'Cargar Horario',schedSynced:'Â¡Horario sincronizado!',
    invalidCode:'CÃ³digo invÃ¡lido',exported:'Â¡Datos exportados!',imported:'Â¡Datos importados correctamente!',
    invalidFile:'Archivo invÃ¡lido â€” no se pudo importar.',
    noTasksYet:'Sin opciones de tareas aÃºn.',
    manageTaskOpts:'âš™ Gestionar Opciones de Tareas',
    taskOptsHint:"El admin configura las opciones. Al asignar un empleado, elige que tarea hace.",
    taskPlaceholder:'ej. Pintar paredes, Recortar techosâ€¦',
    addTask:'+ Agregar',
    workerUpdated:'Empleado actualizado',workerCreated:'Empleado creado',
    adminUpdated:'Admin actualizado',adminCreated:'Cuenta admin creada',adminDeleted:'Admin eliminado',
    cannotDeleteLastAdmin:'No se puede eliminar el Ãºltimo admin',
    jobUpdated:'Trabajo actualizado',jobCreated:'Trabajo creado',jobDeleted:'Eliminado',
    saved:'Guardado',moved:'Movido',removed:'Quitado',
    passwordUpdated:'ContraseÃ±a actualizada â€” inicia sesiÃ³n',
    passwordUpdatedShort:'ContraseÃ±a actualizada',
    areYouSure:'Â¿EstÃ¡s seguro?',
    deleteConfirm:'Eliminar',
    removeWorkerFrom:'Quitar',fromThisDay:'de este dÃ­a?',
    allAssignmentsRemoved:'? Se eliminarÃ¡n todas las asignaciones.',
    invalidUsernameOrPw:'Usuario o contraseÃ±a invÃ¡lidos',
    usernameNotFound:'Usuario no encontrado.',
    noSecQuestion:'No hay pregunta de seguridad. Contacta al admin.',
    incorrectAnswer:'Respuesta incorrecta.',
    enterNewPw:'Ingresa una nueva contraseÃ±a.',
    pwNoMatch:'Las contraseÃ±as no coinciden.',
    nameUsernameRequired:'Nombre y usuario son requeridos.',
    pwRequired:'La contraseÃ±a es requerida.',
    identityVerified:'âœ“ Â¡Identidad verificada! Ingresa tu nueva contraseÃ±a.',
    enterUsernameReset:'Ingresa tu usuario para restablecer la contraseÃ±a.',
    answerSecQuestion:'Responde tu pregunta de seguridad',
    nextBtn:'Siguiente â†’',verifyAnswer:'Verificar Respuesta â†’',setNewPw:'Establecer ContraseÃ±a',
    teamScheduling:'Team Calendar',
    passwordUpdatedSignIn:'âœ“ ContraseÃ±a actualizada â€” inicia sesiÃ³n con la nueva contraseÃ±a',
    updatePassword:'Actualizar ContraseÃ±a',
    employeeColor:'Color del Empleado (visible en calendario)',
    noTaskOptions:'â€” Sin tarea especÃ­fica â€”',taskDots:'Tareaâ€¦',
    leaveBlankPw:'Dejar en blanco para mantener la contraseÃ±a actual.',
    createWorker:'Crear Empleado',saveChanges:'Guardar Cambios',createAdmin:'Crear Admin',
    addWorkerHint:"Crea un empleado y su acceso. Inician sesion con su usuario y contrasena.",
    adminWarning:'âš ï¸ Las cuentas admin tienen acceso completo a todo.',
    selectQuestion:'â€” Selecciona una pregunta â€”',selectQuestionOpt:'â€” Selecciona una pregunta (opcional) â€”',
    newPwPlaceholder:'Ingresa nueva contraseÃ±a',repeatPw:'Repite la nueva contraseÃ±a',
    leaveBlankKeep:'Dejar en blanco para mantener',setPw:'Establecer contraseÃ±a',repeatPwLabel:'Repetir contraseÃ±a',
    deleteAdminConfirm:'Eliminar cuenta admin de ',
    stagesAndTasks:'Etapas y Tareas',stagesTab:'Etapas',
    stageTasks:'Tareas de Etapa',addTaskToStage:'Agregar tareas a la etapa:',
    stagesHint:'Estas etapas aparecen en todos los trabajos. Cada etapa puede tener tareas predefinidas.',
    noAssignedStage:'Sin etapa asignada',
    projectsTitle:'Proyectos',projectInfo:'Info del Proyecto',
    contracted:'Contratado',completed:'Completado',
    contractedJobs:'Trabajos Contratados',completedJobs:'Trabajos Completados',
    contractedHint:'Trabajos contratados pero no listos para programar',
    completedHint:'Trabajos que han sido completados',
    noContracted:'Sin trabajos contratados',noCompleted:'Sin trabajos completados',
    markContracted:'ğŸ“¤ Sin programar',markCompleted:'âœ“ Completar',markActive:'â†© Activo',
    addContracted:'+ Agregar Contratado',
    months:'Enero,Febrero,Marzo,Abril,Mayo,Junio,Julio,Agosto,Septiembre,Octubre,Noviembre,Diciembre',
    weekDays:'Dom,Lun,Mar,MiÃ©,Jue,Vie,SÃ¡b',
    today:'Hoy',viewOnly:'ğŸ‘ Solo Vista',
    scheduleBlock:'Agregar al Horario',addToCalendar:'Agregar al Calendario',
    stageForBlock:'Etapa para este bloque',duration:'DuraciÃ³n (dÃ­as)',
    assignWorkers:'Asignar Empleados (opcional)',
    startingDate:'Iniciando',
    workersOnDay:'Empleados este dÃ­a',noWorkersDay:'Sin empleados asignados este dÃ­a',
    removeBlock:'Eliminar Bloque',
    removeBlockConfirm:'Â¿Eliminar este bloque completo y todas sus asignaciones?',
  }
};
let LANG='en';
function t(key){return (T[LANG]&&T[LANG][key])||T.en[key]||key;}

const LOGO_B64='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8JY4hry07rgPCsXLH/oH0IJ0+FNml8pxf5QXVu20xmXc7ZUW+puMToaiMxvHJjmI0KhXcf8Aon0JuP8A0T6EH6nkfNM+V51c8klSrsm2WovOeFhbC0ltPNysh6mgKN7LZbnea6Oit1HNUTSEBrWNJV+tkDJGTANtdiS+N/0xWMAbGR+RZ/UoLGjmREQEREBERAREQEREBERAREQEREBERAREQEREBERB+Joo5ozHKxr2HnDhqCsWr8uMDV1Q6oqsL2qSV3O40zdT9SyxEEd1mSmWVU/elwnQa/3YwF8PeJys/ZSj9CktEEfW3JjLW3VTammwrQiRp4FzA71rO6Smp6WFsFNCyGJvxWMboB5l9kQePiTDFhxHSmmvdrpa6PqmjDtPJqsNdkVla5xccKUep6m6KSkQRp7xOVn7KUfoT3icrP2Uo/QpLRBi2Fsv8HYYdv2SwUVJJ/xGxDeHn51lGi5RAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQf/2Q==';

const DAY_NAMES=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

// â”€â”€ STAGE / TASK DISPLAY TRANSLATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Translates stage names and task labels for workers viewing the calendar.
// Admins see original names in Stages tab. Workers/calendar display gets translated.
// Stage & task translation dictionaries (English â†’ Spanish)
// Only words listed here get translated â€” custom/unknown words stay as typed
const STAGE_NAME_ES={
  // Prep / Prime
  'prep':'PreparaciÃ³n','preparation':'PreparaciÃ³n','prep work':'PreparaciÃ³n',
  'prime':'ImprimaciÃ³n','priming':'ImprimaciÃ³n','primer':'ImprimaciÃ³n',
  // Paint / Apply
  'paint':'Pintura','painting':'Pintura','apply':'Aplicar','application':'AplicaciÃ³n',
  'coat':'Capa','first coat':'Primera capa','second coat':'Segunda capa','top coat':'Capa final',
  // Cut / Roll
  'cut':'Corte','cut in':'Cortar bordes','cutting':'Corte','cut-in':'Cortar bordes',
  'roll':'Rodillo','rolling':'Rodillar','roll out':'Rodillar',
  // Finish / Touch up
  'finish':'Acabado','finishing':'Acabado','final':'Final',
  'touch up':'Retoques','touch-up':'Retoques','touchup':'Retoques','detail':'Detalles',
  // Caulk / Sand
  'caulk':'Calafatear','caulking':'Calafatear',
  'sand':'Lijado','sanding':'Lijado','sand down':'Lijar',
  // Clean / Wash
  'clean':'Limpieza','cleaning':'Limpieza','cleanup':'Limpieza','clean up':'Limpieza',
  'wash':'Lavado','washing':'Lavado','power wash':'Lavado a presiÃ³n','pressure wash':'Lavado a presiÃ³n',
  'sweep':'Barrer','sweeping':'Barrer',
  // Stain / Seal / Epoxy
  'stain':'Tintura','staining':'Tintura',
  'seal':'Sellado','sealing':'Sellado',
  'epoxy':'Epoxi','epoxy floor':'Piso Epoxi',
  // Location types
  'exterior':'Exterior','interior':'Interior',
  'deck':'Terraza','fence':'Cerca','garage':'Garaje','ceiling':'Techo','walls':'Paredes',
  // Other common stages
  'demo':'DemoliciÃ³n','demolition':'DemoliciÃ³n',
  'tape':'Enmascarar','masking':'Enmascarar','mask':'Enmascarar',
  'spray':'Rociar','spraying':'Rociar',
  'dry':'Secado','drying':'Secado','cure':'Curado','curing':'Curado',
  'inspect':'InspecciÃ³n','inspection':'InspecciÃ³n','walkthrough':'RevisiÃ³n final',
  'complete':'Completado','completed':'Completado','done':'Terminado',
  'start':'Inicio','setup':'ConfiguraciÃ³n',
};
const TASK_NAME_ES={
  // Cut / Roll
  'cut':'Cortar','cut in':'Cortar bordes','cutting':'Cortar','cut-in':'Cortar bordes',
  'roll':'Rodillar','rolling':'Rodillar','roll out':'Rodillar',
  // Prime / Paint
  'prime':'Imprimar','priming':'Imprimar','primer':'Imprimar',
  'paint':'Pintar','painting':'Pintar','apply paint':'Aplicar pintura',
  'first coat':'Primera capa','second coat':'Segunda capa','top coat':'Capa final',
  // Sand / Caulk
  'sand':'Lijar','sanding':'Lijar','sand down':'Lijar',
  'caulk':'Calafatear','caulking':'Calafatear',
  // Clean / Sweep / Wash
  'clean':'Limpiar','cleaning':'Limpiar','cleanup':'Limpiar','clean up':'Limpiar',
  'sweep':'Barrer','sweeping':'Barrer',
  'wash':'Lavar','washing':'Lavar','power wash':'Lavar a presiÃ³n','pressure wash':'Lavar a presiÃ³n',
  // Touch up / Finish / Detail
  'touch up':'Retoques','touch-up':'Retoques','touchup':'Retoques',
  'finish':'Acabar','finishing':'Acabar','detail':'Detalles','detail work':'Detalles',
  // Stain / Seal
  'stain':'Tintar','staining':'Tintar',
  'seal':'Sellar','sealing':'Sellar',
  // Tape / Mask
  'tape':'Enmascarar','taping':'Enmascarar','mask':'Enmascarar','masking':'Enmascarar',
  // Spray / Brush
  'spray':'Rociar','spraying':'Rociar',
  'brush':'Brocha','brushing':'Brocha',
  // Prep / Setup
  'prep':'Preparar','preparation':'Preparar','prep work':'Preparar',
  'setup':'Preparar','set up':'Preparar',
  // Load / Unload / Move
  'load':'Cargar','unload':'Descargar','move':'Mover','haul':'Transportar',
  // Misc
  'inspect':'Inspeccionar','inspection':'Inspeccionar','check':'Revisar',
  'mix':'Mezclar','mixing':'Mezclar',
  'cut trim':'Cortar bordes','trim':'Bordes',
  'backroll':'Rodillo atrÃ¡s','back roll':'Rodillo atrÃ¡s',
  'helper':'Ayudante','assist':'Asistir','lead':'LÃ­der',
};
function trStage(name){ if(!name) return name; if(LANG!=='es') return name; return STAGE_NAME_ES[name.toLowerCase().trim()]||name; }
function trTask(name){ if(!name) return name; if(LANG!=='es') return name; return TASK_NAME_ES[name.toLowerCase().trim()]||name; }
const STAGE_COLORS=[
  {bg:'#dbeafe',text:'#1d4ed8',border:'#93c5fd'},
  {bg:'#dcfce7',text:'#15803d',border:'#86efac'},
  {bg:'#fef9c3',text:'#a16207',border:'#fde047'},
  {bg:'#fee2e2',text:'#b91c1c',border:'#fca5a5'},
  {bg:'#f3e8ff',text:'#7e22ce',border:'#d8b4fe'},
  {bg:'#ffedd5',text:'#c2410c',border:'#fdba74'},
  {bg:'#e0f2fe',text:'#0369a1',border:'#7dd3fc'},
  {bg:'#f0fdf4',text:'#166534',border:'#86efac'},
  {bg:'#fdf2f8',text:'#9d174d',border:'#f9a8d4'},
  {bg:'#f1f5f9',text:'#475569',border:'#cbd5e1'},
];

// Job accent colors for calendar display
const JOB_COLORS=[
  {bg:'#dbeafe',text:'#1d4ed8',name:'Blue'},
  {bg:'#dcfce7',text:'#15803d',name:'Green'},
  {bg:'#fef9c3',text:'#854d0e',name:'Yellow'},
  {bg:'#fee2e2',text:'#b91c1c',name:'Red'},
  {bg:'#f3e8ff',text:'#7e22ce',name:'Purple'},
  {bg:'#ffedd5',text:'#c2410c',name:'Orange'},
  {bg:'#e0f2fe',text:'#0369a1',name:'Sky'},
  {bg:'#fce7f3',text:'#9d174d',name:'Pink'},
  {bg:'#d1fae5',text:'#065f46',name:'Teal'},
  {bg:'#fef3c7',text:'#92400e',name:'Amber'},
  {bg:'#e0e7ff',text:'#3730a3',name:'Indigo'},
  {bg:'#f5f5f4',text:'#44403c',name:'Stone'},
];

const SECURITY_QUESTIONS=[
  "What was the name of your first pet?",
  "What city were you born in?",
  "What is your mother's maiden name?",
  "What was the name of your elementary school?",
  "What is your oldest sibling's middle name?",
];

const DEFAULT_STAGES=[
  {id:'s1',name:'Prep',color:STAGE_COLORS[9]},
  {id:'s2',name:'Primer',color:STAGE_COLORS[0]},
  {id:'s3',name:'Finish',color:STAGE_COLORS[1]},
  {id:'s4',name:'Touch-ups',color:STAGE_COLORS[2]},
  {id:'s5',name:'Epoxy',color:STAGE_COLORS[5]},
  {id:'s6',name:'Roman Clay',color:STAGE_COLORS[8]},
  {id:'s7',name:'Complete',color:STAGE_COLORS[7]},
  {id:'s8',name:'Completed Job Extra',color:STAGE_COLORS[3]},
  {id:'s9',name:'Residential',color:STAGE_COLORS[4]},
  {id:'s10',name:'Graphic Prep',color:STAGE_COLORS[6]},
];

// Hardcoded admins that always work regardless of localStorage
const HARDCODED_ADMINS=[
  {id:'u1',username:'oanaya',password:'paint6765',name:'Oscar Anaya',role:'ADMIN'},
  {id:'u-m',username:'Manaya',password:'paint6765',name:'M',role:'ADMIN'},
  {id:'u-j',username:'Jornelas',password:'anaya123',name:'Juan Ornelas',role:'ADMIN'},
];

function getToday(){return new Date().toISOString().split('T')[0];}
function nd(d,n){const x=new Date(d);x.setDate(x.getDate()+n);return x.toISOString().split('T')[0];}
function genId(){return Math.random().toString(36).slice(2,10);}
function taskText(t){return typeof t==='string'?t:(t&&t.text?t.text:'');}
function taskColor(t,fallback){return typeof t==='string'?fallback||'#6366f1':(t&&t.color?t.color:fallback||'#6366f1');}
function stageColor(stages,name){const s=stages.find(s=>s.name===name);return s?s.color:{bg:'#f1f5f9',text:'#475569',border:'#cbd5e1'};}
function jobColor(colorIdx){return JOB_COLORS[colorIdx||0]||JOB_COLORS[0];}

function defaultData(){
  return{
    stages:DEFAULT_STAGES.map(s=>({tasks:[],...s})),  // tasks start empty
    users:[
      {id:'u1',username:'oanaya',password:'paint6765',name:'Oscar Anaya',role:'ADMIN'},
      {id:'u-m',username:'Manaya',password:'paint6765',name:'M',role:'ADMIN'},
      {id:'u-j',username:'Jornelas',password:'anaya123',name:'Juan Ornelas',role:'ADMIN'},
      {id:'u2',username:'carlos',password:'worker123',name:'Carlos Rivera',role:'WORKER',workerId:'w1'},
      {id:'u3',username:'mike',password:'worker123',name:'Mike Chen',role:'WORKER',workerId:'w2'},
    ],
    workers:[
      {id:'w1',name:'Carlos Rivera',phone:'',isActive:true,color:'#3b82f6'},
      {id:'w2',name:'Mike Chen',phone:'',isActive:true,color:'#f59e0b'},
      {id:'w3',name:'Dana Lopez',phone:'',isActive:true,color:'#10b981'},
      {id:'w4',name:'James Park',phone:'',isActive:true,color:'#8b5cf6'},
    ],
    jobs:[
      {id:'j1',name:'Oakwood Colonial',address:'412 Oakwood Dr',customerName:'Smith Family',summary:'Two-story colonial, exterior full repaint',estimatedDays:3,sqft:2400,tasks:[],colorIdx:0,estimateRef:'',status:'active'},
      {id:'j2',name:'Maple Ave Interior',address:'88 Maple Ave',customerName:'Johnson',summary:'Interior rooms only, 3 bed 2 bath',estimatedDays:2,sqft:1200,tasks:[],colorIdx:1,estimateRef:'',status:'active'},
      {id:'j3',name:'Sunrise Epoxy',address:'1055 Sunrise Blvd',customerName:'',summary:'Epoxy garage floor, 2-car',estimatedDays:1,sqft:600,tasks:[],colorIdx:5,estimateRef:'',status:'active'},
    ],
    assignments:[
      {id:'a1',jobId:'j1',workerId:'w1',scheduledDate:getToday(),plannedHours:8,task:'',notes:'',blockId:'b1'},
      {id:'a2',jobId:'j2',workerId:'w2',scheduledDate:getToday(),plannedHours:8,task:'',notes:'',blockId:'b2'},
    ],
    scheduleBlocks:[
      {id:'b1',jobId:'j1',startDate:getToday(),estimatedDays:3,stage:'Primer',colorIdx:0},
      {id:'b2',jobId:'j2',startDate:getToday(),estimatedDays:2,stage:'Finish',colorIdx:1},
    ],
  };
}

function loadData(){
  try{
    const saved=localStorage.getItem('anaya_sched_v2');
    // Also try old key for migration
    const oldSaved=!saved&&localStorage.getItem('anaya_scheduler_data');
    const raw=saved||oldSaved;
    if(raw){
      const d=JSON.parse(raw);
      if(d&&d.jobs&&d.workers){
        // Ensure hardcoded admins always exist
        HARDCODED_ADMINS.forEach(ha=>{
          const idx=d.users.findIndex(u=>u.id===ha.id);
          if(idx>=0){
            d.users[idx]={...d.users[idx],role:'ADMIN',username:d.users[idx].username||ha.username};
          } else {
            d.users.push({...ha});
          }
        });
        // Migrate jobs: add colorIdx/estimateRef/status/completedDate if missing
        d.jobs=d.jobs.map((j,i)=>({colorIdx:i%JOB_COLORS.length,estimateRef:'',status:'active',tasks:[],completedDate:null,imageB64:null,...j}));
        // Migrate workers: add color if missing
        d.workers=d.workers.map(w=>({color:null,...w}));
        // Migrate stages: add new default stages if missing, add tasks array
        DEFAULT_STAGES.forEach(ds=>{if(!d.stages.find(s=>s.id===ds.id))d.stages.push(ds);});
        // Migrate stage tasks: upgrade from string[] to {text,color}[]
        d.stages=d.stages.map(s=>({tasks:[],...s,tasks:(s.tasks||[]).map(tt=>typeof tt==='string'?{text:tt,color:'#6366f1'}:tt)}));
        // Migrate users: add username if missing
        d.users=d.users.map(u=>({...u,username:u.username||(u.email?u.email.split('@')[0]:u.name?.toLowerCase().replace(/\s/g,''))||u.id}));
        if(d.assignments===undefined)d.assignments=[];
        if(d.scheduleBlocks===undefined)d.scheduleBlocks=[];
        // Migrate old assignments (no blockId) â†’ create blocks for them
        const migratedBlockIds=new Set(d.scheduleBlocks.map(b=>b.id));
        const orphanAssignments=d.assignments.filter(a=>!a.blockId);
        if(orphanAssignments.length>0){
          // Group orphans by jobId+date
          const groups={};
          orphanAssignments.forEach(a=>{const k=a.jobId+'_'+a.scheduledDate;if(!groups[k])groups[k]={jobId:a.jobId,date:a.scheduledDate,assignments:[]};groups[k].assignments.push(a);});
          Object.values(groups).forEach(g=>{
            const job=d.jobs.find(j=>j.id===g.jobId);
            const bId=genId();
            d.scheduleBlocks.push({id:bId,jobId:g.jobId,startDate:g.date,estimatedDays:job?job.estimatedDays||1:1,stage:job?job.stage||'Prep':'Prep',colorIdx:job?job.colorIdx||0:0});
            g.assignments.forEach(a=>{a.blockId=bId;});
          });
        }
        // Save migrated data back immediately
        try{localStorage.setItem('anaya_sched_v2',JSON.stringify(d));}catch(e){}
        return d;
      }
    }
  }catch(e){console.warn('loadData error',e);}
  return defaultData();
}
function saveData(d){
  try{
    localStorage.setItem('anaya_sched_v2',JSON.stringify(d));
    // Keep old key in sync for backwards compat
    localStorage.removeItem('anaya_scheduler_data');
  }catch(e){}
  window.__AS_DATA__=d;
}

function reducer(state,action){
  switch(action.type){
    case 'IMPORT_DATA': return action.data;
    case 'ADD_STAGE': return{...state,stages:[...state.stages,action.stage]};
    case 'UPDATE_STAGE': return{...state,stages:state.stages.map(s=>s.id===action.id?{...s,...action.data}:s)};
    case 'DELETE_STAGE': return{...state,stages:state.stages.filter(s=>s.id!==action.id)};
    case 'ADD_STAGE_TASK': return{...state,stages:state.stages.map(s=>s.id===action.stageId?{...s,tasks:[...(s.tasks||[]),{text:action.text,color:action.color||'#6366f1'}]}:s)};
    case 'DEL_STAGE_TASK': return{...state,stages:state.stages.map(s=>s.id===action.stageId?{...s,tasks:(s.tasks||[]).filter((_,i)=>i!==action.idx)}:s)};
    case 'ADD_JOB': return{...state,jobs:[...state.jobs,action.job]};
    case 'UPDATE_JOB': return{...state,jobs:state.jobs.map(j=>j.id===action.id?{...j,...action.data}:j)};
    case 'SET_JOB_STATUS': return{...state,jobs:state.jobs.map(j=>j.id===action.id?{...j,status:action.status,...(action.status==='completed'&&!j.completedDate?{completedDate:getToday()}:{})}:j)};
    case 'SET_JOB_COMPLETED_DATE': return{...state,jobs:state.jobs.map(j=>j.id===action.id?{...j,completedDate:action.date}:j)};
    case 'DELETE_JOB': return{...state,jobs:state.jobs.filter(j=>j.id!==action.id),assignments:state.assignments.filter(a=>a.jobId!==action.id),scheduleBlocks:(state.scheduleBlocks||[]).filter(b=>b.jobId!==action.id)};
    case 'ADD_BLOCK': return{...state,scheduleBlocks:[...(state.scheduleBlocks||[]),action.block]};
    case 'UPDATE_BLOCK': return{...state,scheduleBlocks:(state.scheduleBlocks||[]).map(b=>b.id===action.id?{...b,...action.data}:b)};
    case 'DELETE_BLOCK': return{...state,scheduleBlocks:(state.scheduleBlocks||[]).filter(b=>b.id!==action.id),assignments:state.assignments.filter(a=>a.blockId!==action.id)};
    case 'ADD_JOB_TASK': return{...state,jobs:state.jobs.map(j=>j.id===action.jobId?{...j,tasks:[...(j.tasks||[]),action.text]}:j)};
    case 'DEL_JOB_TASK': return{...state,jobs:state.jobs.map(j=>j.id===action.jobId?{...j,tasks:(j.tasks||[]).filter((_,i)=>i!==action.idx)}:j)};
    case 'ADD_USER': return{...state,users:[...state.users,action.user]};
    case 'UPDATE_USER': return{...state,users:state.users.map(u=>u.id===action.id?{...u,...action.data}:u)};
    case 'DELETE_USER': return{...state,users:state.users.filter(u=>u.id!==action.id)};
    case 'ADD_WORKER': return{...state,workers:[...state.workers,action.worker]};
    case 'UPDATE_WORKER': return{...state,workers:state.workers.map(w=>w.id===action.id?{...w,...action.data}:w)};
    case 'ADD_ASSIGNMENT': return{...state,assignments:[...state.assignments,action.assignment]};
    case 'UPDATE_ASSIGNMENT': return{...state,assignments:state.assignments.map(a=>a.id===action.id?{...a,...action.data}:a)};
    case 'DELETE_ASSIGNMENT': return{...state,assignments:state.assignments.filter(a=>a.id!==action.id)};
    case 'LOAD_ALL': return{...action.data};
    default: return state;
  }
}

function getWeekStart(date){const d=new Date(date),day=d.getDay();d.setDate(d.getDate()+(day===0?-6:1-day));d.setHours(0,0,0,0);return d;}
function addDays(date,n){const d=new Date(date);d.setDate(d.getDate()+n);return d;}
function toDateStr(date){return new Date(date).toISOString().split('T')[0];}
function formatDate(date){return new Date(date).toLocaleDateString('en-US',{month:'short',day:'numeric'});}
function formatWeekRange(ws){return`${formatDate(ws)} â€“ ${formatDate(addDays(ws,6))}`;}

// â”€â”€ SHARED COMPONENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function Toasts({toasts}){
  return React.createElement('div',{className:'toast-container'},
    toasts.map(t=>React.createElement('div',{key:t.id,className:`toast ${t.type}`},
      React.createElement('span',null,t.type==='success'?'âœ“':'âœ•'),t.msg)));
}
function StagePill({stage,stages}){
  const c=stageColor(stages||[],stage);
  return React.createElement('span',{className:'stage-pill',style:{background:c.bg,color:c.text,border:`1px solid ${c.border}`}},stage||'â€”');
}
function Modal({title,onClose,children,footer,wide}){
  useEffect(()=>{const h=e=>{if(e.key==='Escape')onClose();};document.addEventListener('keydown',h);return()=>document.removeEventListener('keydown',h);},[onClose]);
  return React.createElement('div',{className:'modal-overlay',onClick:e=>{if(e.target===e.currentTarget)onClose();}},
    React.createElement('div',{className:'modal',style:wide?{maxWidth:'600px'}:{}},
      React.createElement('div',{className:'modal-header'},
        React.createElement('div',{className:'modal-title'},title),
        React.createElement('button',{className:'modal-close',onClick:onClose},'Ã—')),
      React.createElement('div',{className:'modal-body'},children),
      footer&&React.createElement('div',{className:'modal-footer'},footer)
    )
  );
}
function Confirm({msg,onConfirm,onCancel}){
  return React.createElement(Modal,{title:'Are you sure?',onClose:onCancel,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onCancel},'Cancel'),
    React.createElement('button',{key:'d',className:'btn btn-danger',onClick:onConfirm},'Delete'),
  ]},React.createElement('p',{className:'confirm-msg'},msg));
}

// â”€â”€ TASK DROPDOWN (in assignment modal) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function TaskDropdown({job,value,onChange,isAdmin,stages,stageName}){
  const [open,setOpen]=useState(true);
  // Use the provided stageName (block stage) or fall back to job's stage
  const lookupStage=stageName||( job?job.stage:'');
  const stage=stages?stages.find(s=>s.name===lookupStage):null;
  const stageTasks=stage?stage.tasks||[]:[];
  const tasks=stageTasks; // ONLY use stage tasks, never fallback to job tasks
  return React.createElement('div',{className:'task-section'},
    React.createElement('div',{className:'task-section-hdr',onClick:()=>setOpen(o=>!o)},
      React.createElement('span',{className:'task-section-title'},isAdmin?'ğŸ”„ Change Task':'ğŸ“‹ '+t('assignedTask')),
      React.createElement('span',{className:'task-arrow'+(open?' open':'')},'â–¶')),
    open&&React.createElement('div',{className:'task-body'},
      tasks.length===0&&!value
        ?React.createElement('p',{className:'task-none'},t('noTasksYet'))
        :tasks.length===0&&value
          // No stage tasks defined, but worker has an assigned task - show it
          ?isAdmin
            ?React.createElement('div',null,
                React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',marginBottom:'6px',fontStyle:'italic'}},'No stage tasks defined. Current task:'),
                React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px'}},
                  React.createElement('div',{style:{flex:1,background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'var(--r)',padding:'8px 12px',fontSize:'13px',fontWeight:700,color:'var(--blue)'}},value),
                  React.createElement('button',{className:'btn btn-ghost btn-sm',style:{fontSize:'11px',color:'var(--text3)'},onClick:()=>onChange('')},'Clear')
                )
              )
            :(()=>{
                const chipColor='#6366f1';
                return React.createElement('div',{className:'task-readonly',style:{background:chipColor+'18',border:'1px solid '+chipColor+'44',color:chipColor,fontWeight:700}},value);
              })()
          :isAdmin
          ?React.createElement('select',{className:'task-select',value:value||'',onChange:e=>onChange(e.target.value)},
              React.createElement('option',{value:''},'â€” '+t('noTaskOptions')+' â€”'),
              tasks.map((tt,i)=>React.createElement('option',{key:i,value:taskText(tt)},taskText(tt))))
          :(value
              ?(()=>{
                const taskObj=tasks.find(tt=>taskText(tt)===value);
                const chipColor=taskObj?taskColor(taskObj,'#6366f1'):'#6366f1';
                return React.createElement('div',{className:'task-readonly',style:{background:chipColor+'18',border:'1px solid '+chipColor+'44',color:chipColor,fontWeight:700}},value);
              })()
              :React.createElement('p',{className:'task-none'},t('noTaskAssigned')))
    )
  );
}

// â”€â”€ STAGE MANAGER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function StageManager({stages,dispatch,onClose}){
  const [newName,setNewName]=useState('');
  const [selColor,setSelColor]=useState(0);
  const add=()=>{const n=newName.trim();if(!n||stages.find(s=>s.name.toLowerCase()===n.toLowerCase()))return;dispatch({type:'ADD_STAGE',stage:{id:genId(),name:n,color:STAGE_COLORS[selColor]}});setNewName('');};
  return React.createElement(Modal,{title:'Manage Stages',onClose,footer:[React.createElement('button',{key:'c',className:'btn btn-primary',onClick:onClose},'Done')]},
    React.createElement('p',{style:{fontSize:'13px',color:'var(--text2)',marginBottom:'14px'}},'Add or remove stages. They appear in all job dropdowns instantly.'),
    React.createElement('div',{style:{display:'flex',flexWrap:'wrap',marginBottom:'16px',padding:'12px',background:'var(--bg3)',borderRadius:'var(--r)',border:'1px solid var(--border)'}},
      stages.map(s=>React.createElement('span',{key:s.id,className:'stage-chip',style:{background:s.color.bg,color:s.color.text,borderColor:s.color.border}},
        s.name,React.createElement('button',{className:'stage-chip-del',style:{color:s.color.text},onClick:()=>dispatch({type:'DELETE_STAGE',id:s.id})},'Ã—'))),
      stages.length===0&&React.createElement('span',{style:{fontSize:'12px',color:'var(--text3)',fontStyle:'italic'}},'No stages')),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'New Stage Name'),
      React.createElement('input',{className:'form-input',value:newName,onChange:e=>setNewName(e.target.value),onKeyDown:e=>{if(e.key==='Enter')add();},placeholder:'e.g. Caulking, Staining'})),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'6px'}},'Color'),
    React.createElement('div',{className:'color-row'},
      STAGE_COLORS.map((c,i)=>React.createElement('div',{key:i,className:'color-swatch'+(selColor===i?' selected':''),style:{background:c.bg,border:`2px solid ${selColor===i?c.text:c.border}`},onClick:()=>setSelColor(i)}))),
    React.createElement('button',{className:'btn btn-primary',style:{marginTop:'12px',width:'100%'},onClick:add},'+ Add Stage')
  );
}

// â”€â”€ JOB FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function JobForm({job,stages,isAdmin,onSave,onClose}){
  const [form,setForm]=useState(job?{...job}:{name:'',address:'',customerName:'',summary:'',estimatedDays:1,sqft:'',colorIdx:0,estimateRef:'',imageB64:null});
  const set=k=>e=>setForm(f=>({...f,[k]:e.target.value}));
  const handleImage=e=>{
    const file=e.target.files&&e.target.files[0]; if(!file) return;
    const reader=new FileReader();
    reader.onload=ev=>setForm(f=>({...f,imageB64:ev.target.result}));
    reader.readAsDataURL(file);
  };
  const submit=()=>{
    if(!form.address.trim())return;
    const days=parseFloat(form.estimatedDays);
    if(isNaN(days)||days<=0)return;
    onSave({...form,estimatedDays:days,sqft:form.sqft?parseInt(form.sqft):null,tasks:form.tasks||[]});
  };
  return React.createElement(Modal,{title:job?'Edit Job':'New Job',onClose,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:submit},job?'Save':'Create Job'),
  ]},
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Project Name *'),
      React.createElement('input',{className:'form-input',value:form.name,onChange:set('name'),placeholder:'e.g. Oakwood Colonial'})),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Address *'),
      React.createElement('input',{className:'form-input',value:form.address,onChange:set('address'),placeholder:'123 Main St'})),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Customer'),
      React.createElement('input',{className:'form-input',value:form.customerName,onChange:set('customerName'),placeholder:'Optional'})),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Estimated Days *'),
        React.createElement('input',{className:'form-input',type:'number',min:.5,step:.5,value:form.estimatedDays,onChange:set('estimatedDays')})),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Square Footage'),
        React.createElement('input',{className:'form-input',type:'number',min:1,step:1,value:form.sqft||'',onChange:set('sqft'),placeholder:'e.g. 2400'}))),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Project Summary'),
      React.createElement('textarea',{className:'form-textarea',value:form.summary||'',onChange:set('summary'),placeholder:'Short descriptionâ€¦',style:{minHeight:'56px'}})),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Calendar Color'),
      React.createElement('div',{className:'job-color-row'},
        JOB_COLORS.map((c,i)=>React.createElement('div',{key:i,className:'job-color-swatch'+(form.colorIdx===i?' selected':''),style:{background:c.bg,border:`3px solid ${form.colorIdx===i?c.text:'transparent'}`},title:c.name,onClick:()=>setForm(f=>({...f,colorIdx:i}))})))),
/* estimate reference field removed â€” future feature */null,
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'ğŸ“· Project Photo'),
      form.imageB64
        ?React.createElement('div',{style:{position:'relative',display:'inline-block'}},
            React.createElement('img',{src:form.imageB64,style:{width:'140px',height:'90px',objectFit:'cover',borderRadius:'10px',border:'2px solid var(--border)',display:'block'}}),
            React.createElement('button',{
              onClick:()=>setForm(f=>({...f,imageB64:null})),
              style:{position:'absolute',top:'-7px',right:'-7px',background:'var(--red)',color:'#fff',border:'none',borderRadius:'50%',width:'22px',height:'22px',fontSize:'13px',cursor:'pointer',fontWeight:900,lineHeight:'22px',textAlign:'center'}
            },'Ã—')
          )
        :React.createElement('label',{style:{display:'inline-flex',alignItems:'center',gap:'8px',background:'var(--bg3)',border:'2px dashed var(--border2)',borderRadius:'10px',padding:'12px 20px',cursor:'pointer',fontSize:'13px',color:'var(--text2)'}},
            React.createElement('span',{style:{fontSize:'22px'}},'ğŸ“·'),
            'Upload photo',
            React.createElement('input',{type:'file',accept:'image/*',onChange:handleImage,style:{display:'none'}})
          )
    )
  );
}

// â”€â”€ WORKER FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function WorkerForm({worker,workerUser,selfEdit,isAdminForm,adminUser,onSave,onClose}){
  const isEdit=!!worker||!!adminUser;
  const editingAdmin=!!adminUser;
  const [name,setName]=useState(editingAdmin?adminUser.name:(worker?worker.name:''));
  const [username,setUsername]=useState(editingAdmin?adminUser.username:(workerUser?workerUser.username||workerUser.email:''));
  const [phone,setPhone]=useState(worker?worker.phone||'':'');
  const [pw,setPw]=useState('');
  const [pw2,setPw2]=useState('');
  // Security questions removed
  const [workerColor,setWorkerColor]=useState(worker?worker.color||null:null);
  const [err,setErr]=useState('');

  const submit=()=>{
    setErr('');
    if(!selfEdit&&(!name.trim()||!username.trim()))return setErr('Name and username are required.');
    if(!isEdit&&!pw.trim())return setErr('Password is required.');
    if(pw&&pw!==pw2)return setErr('Passwords do not match.');
    onSave({name:name.trim(),username:username.trim(),phone:phone.trim(),password:pw||undefined,workerColor:workerColor||undefined});
  };

  if(selfEdit) return React.createElement(Modal,{title:t('changePassword'),onClose,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},t('cancel')),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:submit},t('updatePassword')),
  ]},
    err&&React.createElement('p',{style:{color:'var(--red)',fontSize:'13px',marginBottom:'12px',background:'var(--red-dim)',padding:'8px 12px',borderRadius:'var(--r)'}},err),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},t('newPassword')+' *'),
      React.createElement('input',{className:'form-input',type:'password',value:pw,onChange:e=>setPw(e.target.value),placeholder:t('newPwPlaceholder')})),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},t('confirmPw')+' *'),
      React.createElement('input',{className:'form-input',type:'password',value:pw2,onChange:e=>setPw2(e.target.value),placeholder:t('repeatPw')}))
  );

  if(isAdminForm||editingAdmin) return React.createElement(Modal,{title:editingAdmin?'Edit Admin':'Add Admin Account',onClose,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:submit},editingAdmin?'Save Changes':'Create Admin'),
  ]},
    React.createElement('p',{style:{fontSize:'12px',color:'var(--accent)',background:'var(--accent-dim)',border:'1px solid rgba(224,123,26,.2)',borderRadius:'var(--r)',padding:'8px 12px',marginBottom:'14px'}},'âš ï¸ Admin accounts have full access to everything.'),
    err&&React.createElement('p',{style:{color:'var(--red)',fontSize:'13px',marginBottom:'12px',background:'var(--red-dim)',padding:'8px 12px',borderRadius:'var(--r)'}},err),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Full Name *'),
      React.createElement('input',{className:'form-input',value:name,onChange:e=>setName(e.target.value),placeholder:'Admin Name'})),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Username *'),
        React.createElement('input',{className:'form-input',value:username,onChange:e=>setUsername(e.target.value),placeholder:'username'})),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},isEdit?'New Password':'Password *'),
        React.createElement('input',{className:'form-input',type:'password',value:pw,onChange:e=>setPw(e.target.value),placeholder:isEdit?'Leave blank to keep':'Set password'}))),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Confirm Password'),
        React.createElement('input',{className:'form-input',type:'password',value:pw2,onChange:e=>setPw2(e.target.value),placeholder:'Repeat password'})),
      React.createElement('div',{className:'form-group'},{})),
  );

  return React.createElement(Modal,{title:isEdit?'Edit Worker':'Add Worker',onClose,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:submit},isEdit?'Save Changes':'Create Worker'),
  ]},
    !isEdit&&React.createElement('p',{className:'info-box'},'Create a worker and their login. They\'ll sign in with their username & password.'),
    err&&React.createElement('p',{style:{color:'var(--red)',fontSize:'13px',marginBottom:'12px',background:'var(--red-dim)',padding:'8px 12px',borderRadius:'var(--r)'}},err),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Full Name *'),
      React.createElement('input',{className:'form-input',value:name,onChange:e=>setName(e.target.value),placeholder:'Carlos Rivera'})),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Username *'),
        React.createElement('input',{className:'form-input',value:username,onChange:e=>setUsername(e.target.value),placeholder:'e.g. carlos'})),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Phone Number'),
        React.createElement('input',{className:'form-input',type:'tel',value:phone,onChange:e=>setPhone(e.target.value),placeholder:'(555) 000-0000'}))),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},isEdit?'New Password':'Password *'),
        React.createElement('input',{className:'form-input',type:'password',value:pw,onChange:e=>setPw(e.target.value),placeholder:isEdit?'Leave blank to keep':'Set password'})),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},'Confirm'),
        React.createElement('input',{className:'form-input',type:'password',value:pw2,onChange:e=>setPw2(e.target.value),placeholder:'Repeat password'}))),
    isEdit&&React.createElement('p',{className:'form-hint'},'Leave password blank to keep current password.'),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'Employee Color (shows on calendar)'),
      React.createElement('div',{style:{display:'flex',flexWrap:'wrap',gap:'6px',marginTop:'4px'}},
        ['#3b82f6','#10b981','#f59e0b','#ef4444','#8b5cf6','#06b6d4','#f97316','#ec4899','#14b8a6','#64748b','#dc2626','#7c3aed'].map(c=>
          React.createElement('div',{key:c,onClick:()=>setWorkerColor(c),style:{
            width:'24px',height:'24px',borderRadius:'50%',background:c,cursor:'pointer',
            border:workerColor===c?'3px solid #1a2236':'2px solid transparent',
            boxShadow:workerColor===c?'0 0 0 2px white, 0 0 0 3px '+c:'none',
            flexShrink:0
          }})
        ),
        workerColor&&React.createElement('div',{onClick:()=>setWorkerColor(null),style:{
          width:'24px',height:'24px',borderRadius:'50%',background:'var(--bg4)',cursor:'pointer',
          border:'2px dashed var(--border2)',display:'flex',alignItems:'center',justifyContent:'center',
          fontSize:'12px',color:'var(--text3)',flexShrink:0
        }},'Ã—')
      )
    ),  );
}

// â”€â”€ ASSIGNMENT MODAL (new: worker checklist + task per worker) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function AssignmentModal({assignment,jobs,workers,stages,isAdmin,dispatch,onSave,onDelete,onClose,allAssignments,blockStageName}){
  const job=jobs.find(j=>j.id===assignment.jobId);
  const worker=workers.find(w=>w.id===assignment.workerId);
  const [planned,setPlanned]=useState(assignment.plannedHours);
  const [task,setTask]=useState(assignment.task||'');
  const [notes,setNotes]=useState(assignment.notes||'');
  const [confirm,setConfirm]=useState(false);
  const plannedVal=parseFloat(planned)||assignment.plannedHours;
  // Get stage color from associated block if available
  const relatedBlock=(allAssignments||[]).length>0?null:null; // placeholder
  const c=stageColor(stages,'');

  if(confirm) return React.createElement(Confirm,{
    msg:`Remove ${worker?.name} from ${job?.name||job?.address} on this day?`,
    onConfirm:()=>onDelete(assignment.id),onCancel:()=>setConfirm(false)});

  const footer=[
    isAdmin?React.createElement('button',{key:'del',className:'btn btn-danger btn-sm',onClick:()=>setConfirm(true),style:{marginRight:'auto'}},t('remove')):null,
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},t('cancel')),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:()=>onSave(assignment.id,{plannedHours:isAdmin?plannedVal:assignment.plannedHours,task,notes:isAdmin?notes:assignment.notes})},t('save')),
  ].filter(Boolean);

  const locale=LANG==='es'?'es-MX':'en-US';
  const stgForTask=blockStageName||assignment.stage||'';
  return React.createElement(Modal,{title:(job?.name||job?.address||'Assignment')+' â€” '+t('edit'),onClose,footer},
    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'4px',flexWrap:'wrap'}},
      React.createElement('span',{style:{fontWeight:800,fontSize:'16px'}},job?.name||job?.address),
      stgForTask?React.createElement('span',{style:{fontSize:'11px',fontWeight:700,padding:'2px 8px',borderRadius:'20px',background:'var(--blue-dim)',color:'var(--blue)'}},stgForTask):null
    ),
    React.createElement('div',{style:{color:'var(--text2)',fontSize:'12px',marginBottom:'16px'}},
      worker?.name,' Â· ',new Date(assignment.scheduledDate+'T12:00:00').toLocaleDateString(locale,{weekday:'long',month:'short',day:'numeric'})),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'â° Planned Hours'),
      isAdmin
        ?React.createElement('input',{className:'form-input',type:'number',min:.5,step:.5,value:planned,onChange:e=>setPlanned(e.target.value)})
        :React.createElement('div',{style:{background:'var(--blue-dim)',border:'1px solid rgba(37,99,235,.2)',borderRadius:'var(--r)',padding:'10px 14px',fontFamily:'DM Mono',fontSize:'22px',fontWeight:800,color:'var(--blue)'}},plannedVal+'h')),
    React.createElement('div',{className:'form-group'},
      React.createElement('label',{className:'form-label'},'ğŸ“ Admin Notes'),
      isAdmin
        ?React.createElement('textarea',{className:'form-textarea',value:notes,onChange:e=>setNotes(e.target.value),style:{minHeight:'56px'},placeholder:'Instructions for this workerâ€¦'})
        :(notes
            ?React.createElement('div',{style:{background:'var(--yellow-dim)',border:'1px solid rgba(217,119,6,.2)',borderRadius:'var(--r)',padding:'10px 12px',fontSize:'13px',lineHeight:'1.5'}},notes)
            :React.createElement('div',{style:{color:'var(--text3)',fontSize:'12px',fontStyle:'italic'}},'No notes from admin'))),
    React.createElement(TaskDropdown,{job,value:task,onChange:setTask,isAdmin,stages,stageName:stgForTask})
  );
}

// â”€â”€ NEW: DROP-ONTO-CALENDAR MODAL (admin drops a project onto a cell) â”€â”€â”€â”€â”€â”€â”€â”€â”€
// This opens when admin drops a project card onto a day cell to pick workers + tasks
function ProjectDropModal({jobId,date,jobs,workers,stages,assignMap,dispatch,toast,onClose}){
  const job=jobs.find(j=>j.id===jobId);
  // Get stage color from associated block if available
  const relatedBlock=(allAssignments||[]).length>0?null:null; // placeholder
  const c=stageColor(stages,'');
  const jc=jobColor(job?.colorIdx);
  const existing=(assignMap[`${jobId}_${date}`]||[]);
  const existingWorkerIds=new Set(existing.map(a=>a.workerId));
  const activeWorkers=workers.filter(w=>w.isActive);

  // selected: [{workerId, task, hours}]
  const [selected,setSelected]=useState([]);

  const toggle=(wId)=>{
    if(existingWorkerIds.has(wId)) return; // already assigned, skip
    setSelected(s=>s.find(x=>x.workerId===wId)?s.filter(x=>x.workerId!==wId):[...s,{workerId:wId,task:'',hours:8}]);
  };
  const setWorkerField=(wId,field,val)=>{
    setSelected(s=>s.map(x=>x.workerId===wId?{...x,[field]:val}:x));
  };
  const isSelected=(wId)=>selected.some(x=>x.workerId===wId);

  const save=()=>{
    if(!selected.length){onClose();return;}
    selected.forEach(sel=>{
      dispatch({type:'ADD_ASSIGNMENT',assignment:{
        id:genId(),jobId,workerId:sel.workerId,scheduledDate:date,
        plannedHours:parseFloat(sel.hours)||8,task:sel.task,notes:''
      }});
    });
    toast(`Assigned ${selected.length} worker(s) â€” click to edit details`,'success');
    onClose();
  };

  const dateLabel=new Date(date+'T12:00:00').toLocaleDateString('en-US',{weekday:'long',month:'short',day:'numeric'});

  return React.createElement(Modal,{title:'Assign Workers',onClose,wide:true,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:save},selected.length?`Assign ${selected.length} Worker(s)`:'Done (no new workers)'),
  ]},
    React.createElement('div',{style:{background:jc.bg,border:`1px solid ${jc.text}22`,borderRadius:'var(--r)',padding:'10px 14px',marginBottom:'16px',display:'flex',alignItems:'center',gap:'8px'}},
      React.createElement('span',{style:{fontWeight:800,fontSize:'15px',color:jc.text}},job?.name||job?.address),
      React.createElement('span',{className:'stage-pill',style:{background:c.bg,color:c.text,border:`1px solid ${c.border}`}},job?.stage),
      React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)',marginLeft:'auto'}},dateLabel)),
    existing.length>0&&React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',marginBottom:'10px',background:'var(--bg3)',padding:'8px 12px',borderRadius:'var(--r)'}},
      'âš  Already assigned: ',existing.map(a=>workers.find(w=>w.id===a.workerId)?.name||'?').join(', ')),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'8px'}},'Check workers to assign:'),
    React.createElement('div',{className:'worker-checklist'},
      activeWorkers.map(w=>{
        const alreadyOn=existingWorkerIds.has(w.id);
        const sel=selected.find(x=>x.workerId===w.id);
        return React.createElement('div',{key:w.id,className:'worker-check-item'+(isSelected(w.id)?' checked':''),style:alreadyOn?{opacity:.5,cursor:'not-allowed'}:{}},
          React.createElement('input',{type:'checkbox',checked:alreadyOn||isSelected(w.id),disabled:alreadyOn,onChange:()=>!alreadyOn&&toggle(w.id)}),
          React.createElement('span',{className:'worker-check-name'},w.name,alreadyOn&&React.createElement('span',{style:{fontSize:'10px',color:'var(--text3)',marginLeft:'5px'}},'(already on)')),
          isSelected(w.id)&&React.createElement('input',{type:'number',min:.5,step:.5,value:sel.hours,onChange:e=>setWorkerField(w.id,'hours',e.target.value),style:{width:'55px',marginLeft:'8px',border:'1px solid var(--border)',borderRadius:'5px',padding:'3px 6px',fontSize:'12px',background:'var(--bg2)'},title:'Hours'}),
          isSelected(w.id)&&(job?.tasks||[]).length>0&&React.createElement('select',{className:'worker-task-sel',value:sel.task,onChange:e=>setWorkerField(w.id,'task',e.target.value)},
            React.createElement('option',{value:''},'Taskâ€¦'),
            (job.tasks||[]).map((t,i)=>React.createElement('option',{key:i,value:t},t)))
        );
      })
    )
  );
}

// â”€â”€ IMPORT / EXPORT PANEL (subtler) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ImportExportPanel({data,dispatch,toast}){
  const fileRef=useRef();
  const [showCode,setShowCode]=useState(false);
  const [importCode,setImportCode]=useState('');
  const [showImportCode,setShowImportCode]=useState(false);

  const doExport=()=>{
    const json=JSON.stringify(data,null,2);
    const blob=new Blob([json],{type:'application/json'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a');
    a.href=url;a.download=`anaya-data-${getToday()}.json`;a.click();
    URL.revokeObjectURL(url);
    toast('Data exported!','success');
  };
  const doImport=e=>{
    const file=e.target.files[0];if(!file)return;
    const reader=new FileReader();
    reader.onload=ev=>{
      try{
        const parsed=JSON.parse(ev.target.result);
        if(!parsed.jobs||!parsed.workers||!parsed.users)throw new Error('Invalid file');
        dispatch({type:'IMPORT_DATA',data:parsed});
        toast('Data imported successfully!','success');
      }catch(err){toast('Invalid data file â€” could not import.','error');}
    };
    reader.readAsText(file);e.target.value='';
  };

  // Share code: base64-encode compressed schedule data for copy-paste sync
  const genShareCode=()=>{
    try{
      const shareData={jobs:data.jobs,workers:data.workers,stages:data.stages,assignments:data.assignments,scheduleBlocks:data.scheduleBlocks||[]};
      const code=btoa(JSON.stringify(shareData));
      setShowCode(code);
    }catch(e){toast('Could not generate code','error');}
  };
  const applyImportCode=()=>{
    try{
      const parsed=JSON.parse(atob(importCode.trim()));
      if(!parsed.jobs||!parsed.workers)throw new Error('bad');
      dispatch({type:'IMPORT_DATA',data:{...data,...parsed,scheduleBlocks:parsed.scheduleBlocks||data.scheduleBlocks||[]}});
      toast('Schedule synced!','success');setShowImportCode(false);setImportCode('');
    }catch(e){toast('Invalid sync code','error');}
  };

  return React.createElement('div',null,
    React.createElement('div',{className:'ie-panel'},
      React.createElement('span',{className:'ie-panel-title'},'ğŸ’¾ Backup / Restore:'),
      React.createElement('div',{className:'ie-row'},
        React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:doExport},'â¬‡ Export'),
        React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>fileRef.current.click()},'â¬† Import'),
        React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:genShareCode},'ğŸ“‹ Share Code'),
        React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setShowImportCode(s=>!s)},'ğŸ“¥ Load Code'),
        React.createElement('input',{ref:fileRef,type:'file',accept:'.json',style:{display:'none'},onChange:doImport})
      )
    ),
    showCode&&React.createElement('div',{style:{background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'var(--r)',padding:'12px',marginBottom:'12px'}},
      React.createElement('p',{style:{fontSize:'12px',fontWeight:700,color:'var(--text2)',marginBottom:'6px'}},'ğŸ“‹ Share this code with employees so they can load the latest schedule:'),
      React.createElement('textarea',{readOnly:true,value:showCode,style:{width:'100%',height:'70px',fontSize:'10px',fontFamily:'DM Mono',background:'var(--bg4)',border:'1px solid var(--border)',borderRadius:'5px',padding:'6px',resize:'none',color:'var(--text2)'},onClick:e=>e.target.select()}),
      React.createElement('div',{style:{display:'flex',gap:'8px',marginTop:'6px'}},
        React.createElement('button',{className:'btn btn-primary btn-sm',onClick:()=>{navigator.clipboard?.writeText(showCode).then(()=>toast('Code copied!','success'));}},
          'ğŸ“‹ Copy to Clipboard'),
        React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setShowCode(null)},'Close'))),
    showImportCode&&React.createElement('div',{style:{background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'var(--r)',padding:'12px',marginBottom:'12px'}},
      React.createElement('p',{style:{fontSize:'12px',fontWeight:700,color:'var(--text2)',marginBottom:'6px'}},'ğŸ“¥ Paste the share code from your admin:'),
      React.createElement('textarea',{value:importCode,onChange:e=>setImportCode(e.target.value),style:{width:'100%',height:'70px',fontSize:'10px',fontFamily:'DM Mono',background:'var(--bg4)',border:'1px solid var(--border)',borderRadius:'5px',padding:'6px',resize:'none',color:'var(--text)'},placeholder:'Paste code hereâ€¦'}),
      React.createElement('div',{style:{display:'flex',gap:'8px',marginTop:'6px'}},
        React.createElement('button',{className:'btn btn-primary btn-sm',onClick:applyImportCode},'Load Schedule'),
        React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>{setShowImportCode(false);setImportCode('');}},'Cancel')))
  );
}

// â”€â”€ JOBS PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function JobsPage({data,isAdmin,dispatch,toast}){
  const [showForm,setShowForm]=useState(false);
  const [editJob,setEditJob]=useState(null);
  const [confirmDel,setConfirmDel]=useState(null);
  const [viewImg,setViewImg]=useState(null);
  const handleSave=form=>{
    if(editJob){dispatch({type:'UPDATE_JOB',id:editJob.id,data:form});toast(t('jobUpdated'),'success');setEditJob(null);}
    else{dispatch({type:'ADD_JOB',job:{...form,id:genId(),tasks:[],status:'active'}});toast(t('jobCreated'),'success');setShowForm(false);}
  };
  // Only show active jobs on Jobs page
  const activeJobs=data.jobs.filter(j=>!j.status||j.status==='active');

  return React.createElement('div',{className:'page'},
    React.createElement('div',{className:'page-header'},
      React.createElement('div',{className:'page-title'},t('jobs')),
      React.createElement('div',{style:{display:'flex',gap:'8px'}},
        isAdmin&&React.createElement('button',{className:'btn btn-primary',onClick:()=>setShowForm(true)},t('newJob')))),
    isAdmin&&React.createElement(ImportExportPanel,{data,dispatch,toast}),
    activeJobs.length===0
      ?React.createElement('div',{className:'empty-state'},
          React.createElement('div',{className:'empty-icon'},'ğŸ '),
          React.createElement('div',{className:'empty-text'},'No jobs yet'),
          React.createElement('div',{className:'empty-sub'},'Create your first job to get started'))
      :React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'10px'}},
          activeJobs.map(job=>{
            const jc=jobColor(job.colorIdx);
            return React.createElement('div',{key:job.id,className:'card'},
              React.createElement('div',{style:{width:'4px',background:jc.text,position:'absolute',left:0,top:0,bottom:0,borderRadius:'12px 0 0 12px'}}),
              React.createElement('div',{style:{padding:'14px 16px'}},
                React.createElement('div',{style:{display:'flex',alignItems:'flex-start',justifyContent:'space-between',gap:'12px',flexWrap:'wrap'}},
                  React.createElement('div',{style:{flex:1}},
                    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'3px',flexWrap:'wrap'}},
                      React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:jc.text,flexShrink:0}}),
                      React.createElement('span',{style:{fontSize:'15px',fontWeight:800}},job.name||job.address),

                      job.customerName&&React.createElement('span',{className:'tag'},job.customerName),
                      isAdmin&&job.estimateRef&&React.createElement('span',{className:'tag',style:{background:'var(--accent-dim)',color:'var(--accent)'}},'Est: '+job.estimateRef)),
                    React.createElement('div',{style:{fontSize:'12px',color:'var(--text2)',marginBottom:'3px'}},job.address),
                    job.summary&&React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',fontStyle:'italic'}},job.summary)),
                  React.createElement('div',{style:{display:'flex',alignItems:'flex-start',gap:'8px',flexShrink:0}},
                    job.imageB64?React.createElement('img',{src:job.imageB64,style:{width:'70px',height:'50px',objectFit:'cover',borderRadius:'8px',border:'2px solid var(--border)',flexShrink:0,cursor:'pointer'},onClick:()=>setViewImg(job.imageB64)}):null,
                    isAdmin?React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'4px',alignItems:'flex-end'}},
                      React.createElement('div',{style:{display:'flex',gap:'4px',flexWrap:'wrap',justifyContent:'flex-end'}},
                        React.createElement('button',{className:'btn btn-ghost btn-sm',style:{fontSize:'11px'},onClick:()=>dispatch({type:'SET_JOB_STATUS',id:job.id,status:'contracted'})},t('markContracted')),
                        React.createElement('button',{className:'btn btn-green btn-sm',style:{fontSize:'11px'},onClick:()=>dispatch({type:'SET_JOB_STATUS',id:job.id,status:'completed'})},t('markCompleted'))),
                      React.createElement('div',{style:{display:'flex',gap:'4px'}},
                        React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditJob(job)},t('edit')),
                        React.createElement('button',{className:'btn btn-danger btn-sm',onClick:()=>setConfirmDel(job)},t('delete')))
                    ):null
                  )
                ),
                React.createElement('div',{style:{display:'grid',gridTemplateColumns:'repeat(2,1fr)',gap:'8px',marginTop:'12px',maxWidth:'380px'}},
                  React.createElement('div',{className:'detail-stat'},
                    React.createElement('div',{className:'detail-stat-label'},'ğŸ“… Est. Days'),
                    React.createElement('div',{className:'detail-stat-value'},job.estimatedDays+(job.estimatedDays===1?' day':' days'))),
                  job.sqft&&React.createElement('div',{className:'detail-stat'},
                    React.createElement('div',{className:'detail-stat-label'},'ğŸ“ Square Footage'),
                    React.createElement('div',{className:'detail-stat-value accent'},Number(job.sqft).toLocaleString()+' sqft'))),
                // â”€â”€ SCHEDULE ACTIVITY PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                (()=>{
                  const jobBlocks=(data.scheduleBlocks||[]).filter(b=>b.jobId===job.id);
                  if(jobBlocks.length===0) return null;
                  // Group by stage: {stageName: {days, workerIds:Set}}
                  const stageMap={};
                  jobBlocks.forEach(b=>{
                    const sn=b.stage||'Unknown';
                    if(!stageMap[sn]) stageMap[sn]={days:0,workerIds:new Set()};
                    stageMap[sn].days+=Math.ceil(b.estimatedDays||1);
                    // Collect all workers assigned to this block
                    const blockAssigns=(data.assignments||[]).filter(a=>a.blockId===b.id);
                    blockAssigns.forEach(a=>stageMap[sn].workerIds.add(a.workerId));
                  });
                  const stageEntries=Object.entries(stageMap);
                  return React.createElement('div',{style:{marginTop:'14px',padding:'12px 14px',background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'10px'}},
                    React.createElement('div',{style:{fontSize:'10px',fontWeight:800,textTransform:'uppercase',letterSpacing:'.6px',color:'var(--text3)',marginBottom:'10px'}},'ğŸ“… Schedule Activity'),
                    React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'8px'}},
                      stageEntries.map(([stageName,{days,workerIds}])=>{
                        const stg=data.stages.find(s=>s.name===stageName);
                        const sHex=stg?stg.colorHex||stg.color?.text||'#6366f1':'#6366f1';
                        const workerList=[...workerIds].map(wid=>{
                          const w=data.workers.find(x=>x.id===wid);
                          return w||null;
                        }).filter(Boolean);
                        return React.createElement('div',{key:stageName,style:{display:'flex',alignItems:'flex-start',gap:'10px',padding:'8px 10px',background:'var(--bg2)',border:'1px solid '+sHex+'33',borderRadius:'8px',borderLeft:'3px solid '+sHex}},
                          React.createElement('div',{style:{flex:1}},
                            React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'6px',marginBottom:'5px'}},
                              React.createElement('div',{style:{width:'8px',height:'8px',borderRadius:'50%',background:sHex,flexShrink:0}}),
                              React.createElement('span',{style:{fontWeight:700,fontSize:'12px',color:sHex}},trStage(stageName)),
                              React.createElement('span',{style:{fontSize:'11px',color:'var(--text3)',marginLeft:'2px'}},days+(days===1?' day':' days'))
                            ),
                            workerList.length>0
                              ? React.createElement('div',{style:{display:'flex',flexWrap:'wrap',gap:'5px'}},
                                  workerList.map(w=>React.createElement('div',{key:w.id,style:{display:'flex',alignItems:'center',gap:'4px',background:w.color?w.color+'18':'var(--bg3)',border:'1px solid '+(w.color?w.color+'44':'var(--border)'),borderRadius:'20px',padding:'2px 8px'}},
                                    React.createElement('div',{style:{width:'6px',height:'6px',borderRadius:'50%',background:w.color||'var(--text3)',flexShrink:0}}),
                                    React.createElement('span',{style:{fontSize:'11px',fontWeight:600,color:'var(--text)'}},w.name)
                                  ))
                                )
                              : React.createElement('span',{style:{fontSize:'11px',color:'var(--text3)',fontStyle:'italic'}},'No workers assigned')
                          )
                        );
                      })
                    )
                  );
                })()
              )
          );
          })),
    showForm&&React.createElement(JobForm,{stages:data.stages,isAdmin,onSave:handleSave,onClose:()=>setShowForm(false)}),
    editJob&&React.createElement(JobForm,{job:editJob,stages:data.stages,isAdmin,onSave:handleSave,onClose:()=>setEditJob(null)}),
    confirmDel&&React.createElement(Confirm,{
      msg:t('delete')+' '+(confirmDel.name||confirmDel.address)+'?',
      onConfirm:()=>{dispatch({type:'DELETE_JOB',id:confirmDel.id});toast(t('jobDeleted'),'success');setConfirmDel(null);},
      onCancel:()=>setConfirmDel(null)}),
    viewImg?React.createElement('div',{
      onClick:()=>setViewImg(null),
      style:{position:'fixed',inset:0,background:'rgba(0,0,0,.75)',zIndex:9999,display:'flex',alignItems:'center',justifyContent:'center',cursor:'zoom-out'}
    },React.createElement('img',{src:viewImg,style:{maxWidth:'90vw',maxHeight:'90vh',borderRadius:'12px',boxShadow:'0 8px 40px rgba(0,0,0,.6)'}})):null
  );
}

// â”€â”€ WORKERS PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function WorkersPage({data,isAdmin,dispatch,toast}){
  const [showForm,setShowForm]=useState(false);
  const [editWorker,setEditWorker]=useState(null);
  const [showAddAdmin,setShowAddAdmin]=useState(false);
  const [editAdmin,setEditAdmin]=useState(null);
  const [confirmDelAdmin,setConfirmDelAdmin]=useState(null);

  const adminUsers=data.users.filter(u=>u.role==='ADMIN');
  const workerUsers=data.workers;

  const handleSaveWorker=form=>{
    if(editWorker){
      dispatch({type:'UPDATE_WORKER',id:editWorker.id,data:{name:form.name,phone:form.phone||'',isActive:true,color:form.workerColor||null}});
      const lu=data.users.find(u=>u.workerId===editWorker.id);
      if(lu){const u={name:form.name,username:form.username};if(form.password)u.password=form.password;if(form.securityQuestion)u.securityQuestion=form.securityQuestion;if(form.securityAnswer)u.securityAnswer=form.securityAnswer.toLowerCase();dispatch({type:'UPDATE_USER',id:lu.id,data:u});}
      toast('Worker updated','success');setEditWorker(null);
    } else {
      const wId=genId();
      dispatch({type:'ADD_WORKER',worker:{id:wId,name:form.name,phone:form.phone||'',isActive:true,color:form.workerColor||null}});
      dispatch({type:'ADD_USER',user:{id:genId(),username:form.username,password:form.password,name:form.name,role:'WORKER',workerId:wId,securityQuestion:form.securityQuestion||'',securityAnswer:(form.securityAnswer||'').toLowerCase()}});
      toast('Worker created','success');setShowForm(false);
    }
  };

  const handleSaveAdmin=form=>{
    if(editAdmin){
      const u={name:form.name,username:form.username};
      if(form.password)u.password=form.password;
      if(form.securityQuestion)u.securityQuestion=form.securityQuestion;
      if(form.securityAnswer)u.securityAnswer=form.securityAnswer.toLowerCase();
      dispatch({type:'UPDATE_USER',id:editAdmin.id,data:u});
      toast('Admin updated','success');setEditAdmin(null);
    } else {
      dispatch({type:'ADD_USER',user:{id:genId(),username:form.username,password:form.password,name:form.name,role:'ADMIN',securityQuestion:form.securityQuestion||'',securityAnswer:(form.securityAnswer||'').toLowerCase()}});
      toast('Admin account created','success');setShowAddAdmin(false);
    }
  };

  const handleDelAdmin=admin=>{
    if(adminUsers.length<=1){toast('Cannot delete the last admin','error');return;}
    dispatch({type:'DELETE_USER',id:admin.id});toast('Admin deleted','success');setConfirmDelAdmin(null);
  };

  const adminTable=React.createElement('div',{className:'card'},
    React.createElement('table',{className:'table'},
      React.createElement('thead',null,
        React.createElement('tr',null,
          React.createElement('th',null,'Name'),
          React.createElement('th',null,'Username'),
          React.createElement('th',null,'Password'),
          React.createElement('th',null,'Actions')
        )
      ),
      React.createElement('tbody',null,
        adminUsers.map(u=>React.createElement('tr',{key:u.id},
          React.createElement('td',null,React.createElement('span',{style:{fontWeight:700}},u.name)),
          React.createElement('td',null,React.createElement('span',{className:'mono',style:{color:'var(--accent)'}},u.username)),
          React.createElement('td',null,React.createElement('span',{className:'mono',style:{color:'var(--text3)',fontSize:'11px',background:'var(--bg3)',padding:'2px 6px',borderRadius:'4px'}},u.password||'â€”')),
          React.createElement('td',null,
            React.createElement('div',{style:{display:'flex',gap:'6px'}},
              React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditAdmin(u)},'Edit'),
              adminUsers.length>1
                ? React.createElement('button',{className:'btn btn-danger btn-sm',onClick:()=>setConfirmDelAdmin(u)},'Del')
                : null
            )
          )
        ))
      )
    )
  );

  const workerTable=workerUsers.length===0
    ? React.createElement('div',{className:'empty-state'},
        React.createElement('div',{className:'empty-icon'},'ğŸ‘·'),
        React.createElement('div',{className:'empty-text'},'No workers yet')
      )
    : React.createElement('div',{className:'card'},
        React.createElement('table',{className:'table'},
          React.createElement('thead',null,
            React.createElement('tr',null,
              React.createElement('th',null,'Name'),
              React.createElement('th',{style:{width:'48px',textAlign:'center'}},'Color'),
              React.createElement('th',null,'Username'),
              React.createElement('th',null,'Phone'),
              React.createElement('th',null,'Password'),
              React.createElement('th',null,'Actions')
            )
          ),
          React.createElement('tbody',null,
            workerUsers.map(w=>{
              const user=data.users.find(u=>u.workerId===w.id);
              return React.createElement('tr',{key:w.id},
                React.createElement('td',null,React.createElement('span',{style:{fontWeight:700}},w.name)),
                React.createElement('td',{style:{textAlign:'center'}},
                  w.color
                    ? React.createElement('div',{style:{
                        width:'22px',height:'22px',borderRadius:'50%',
                        background:w.color,margin:'0 auto',
                        boxShadow:'0 0 0 3px white, 0 0 0 4px '+w.color,
                        border:'2px solid rgba(255,255,255,0.8)'
                      }})
                    : React.createElement('span',{style:{color:'var(--text3)',fontSize:'11px'}},'â€”')
                ),
                React.createElement('td',null,React.createElement('span',{className:'mono',style:{color:'var(--text2)'}},user?user.username:'â€”')),
                React.createElement('td',null,React.createElement('span',{className:'mono',style:{color:'var(--text2)'}},w.phone||'â€”')),
                React.createElement('td',null,React.createElement('span',{className:'mono',style:{color:'var(--text3)',fontSize:'11px',background:'var(--bg3)',padding:'2px 6px',borderRadius:'4px'}},user?user.password:'â€”')),
                React.createElement('td',null,React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditWorker(w)},'Edit'))
              );
            })
          )
        )
      );

  return React.createElement('div',{className:'page'},
    React.createElement('div',{style:{marginBottom:'28px'}},
      React.createElement('div',{className:'page-header',style:{marginBottom:'10px'}},
        React.createElement('div',{className:'admin-section-hdr',style:{margin:0}},'ğŸ” Admin Accounts'),
        React.createElement('button',{className:'btn btn-sm',style:{background:'var(--accent)',color:'#fff',border:'none'},onClick:()=>setShowAddAdmin(true)},'+ Add Admin')
      ),
      adminTable
    ),
    React.createElement('div',null,
      React.createElement('div',{className:'page-header',style:{marginBottom:'10px'}},
        React.createElement('div',{className:'workers-section-hdr',style:{margin:0}},'ğŸ‘· Employees  '+workerUsers.length),
        React.createElement('button',{className:'btn btn-primary',onClick:()=>setShowForm(true)},'+ Add Worker')
      ),
      workerTable
    ),
    showForm ? React.createElement(WorkerForm,{onSave:handleSaveWorker,onClose:()=>setShowForm(false)}) : null,
    editWorker ? React.createElement(WorkerForm,{worker:editWorker,workerUser:data.users.find(u=>u.workerId===editWorker.id),onSave:handleSaveWorker,onClose:()=>setEditWorker(null)}) : null,
    showAddAdmin ? React.createElement(WorkerForm,{isAdminForm:true,onSave:handleSaveAdmin,onClose:()=>setShowAddAdmin(false)}) : null,
    editAdmin ? React.createElement(WorkerForm,{adminUser:editAdmin,isAdminForm:true,onSave:handleSaveAdmin,onClose:()=>setEditAdmin(null)}) : null,
    confirmDelAdmin ? React.createElement(Confirm,{
      msg:'Delete admin account for '+confirmDelAdmin.name+'?',
      onConfirm:()=>handleDelAdmin(confirmDelAdmin),
      onCancel:()=>setConfirmDelAdmin(null)
    }) : null
  );
}

// â”€â”€ CELL DETAIL MODAL (click a cell to see job/workers/tasks) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function CellDetailModal({job,date,assignments,workers,stages,isAdmin,dispatch,toast,onClose}){
  const [editAssign,setEditAssign]=useState(null);
  const c=stageColor(stages,job?job.stage:'');
  const jc=jobColor(job?job.colorIdx:0);
  const locale=LANG==='es'?'es-MX':'en-US';
  const dateLabel=new Date(date+'T12:00:00').toLocaleDateString(locale,{weekday:'long',month:'long',day:'numeric'});
  const [confirm,setConfirm]=useState(null);

  if(editAssign) return React.createElement(AssignmentModal,{
    assignment:editAssign,jobs:[job],workers,stages,isAdmin,dispatch,allAssignments:assignments,
    blockStageName:block?block.stage:null,
    onSave:(id,updates)=>{dispatch({type:'UPDATE_ASSIGNMENT',id,data:updates});toast(t('saved'),'success');setEditAssign(null);},
    onDelete:(id)=>{dispatch({type:'DELETE_ASSIGNMENT',id});toast(t('removed'),'success');setEditAssign(null);},
    onClose:()=>setEditAssign(null)
  });

  if(confirm) return React.createElement(Confirm,{
    msg:'Remove '+confirm.workerName+' from this day?',
    onConfirm:()=>{dispatch({type:'DELETE_ASSIGNMENT',id:confirm.id});toast('Removed','success');setConfirm(null);onClose();},
    onCancel:()=>setConfirm(null)
  });

  const footer=[React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Close')];

  return React.createElement(Modal,{title:job?job.name||job.address:'Assignment',onClose,footer,wide:true},
    React.createElement('div',{style:{background:jc.bg,border:'1px solid '+jc.text+'33',borderRadius:'var(--r)',padding:'10px 14px',marginBottom:'14px'}},
      React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px',flexWrap:'wrap'}},
        React.createElement('span',{style:{fontWeight:800,fontSize:'15px',color:jc.text}},job?job.name||job.address:''),
        React.createElement('span',{className:'stage-pill',style:{background:c.bg,color:c.text,border:'1px solid '+c.border}},job?job.stage:''),
        React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)',marginLeft:'auto'}},dateLabel)),
      job&&job.address&&React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',marginTop:'3px'}},job.address)
    ),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'8px'}},'Assigned Workers'),
    assignments.length===0
      ? React.createElement('div',{style:{color:'var(--text3)',fontSize:'13px',fontStyle:'italic'}},'No workers assigned on this day')
      : React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'8px'}},
          assignments.map(a=>{
            const w=workers.find(x=>x.id===a.workerId);
            const wColor=w&&w.color?w.color:'#6b7280';
            return React.createElement('div',{key:a.id,style:{background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'var(--r)',padding:'10px 12px',display:'flex',alignItems:'flex-start',gap:'10px'}},
              React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:wColor,marginTop:'4px',flexShrink:0}}),
              React.createElement('div',{style:{flex:1}},
                React.createElement('div',{style:{fontWeight:700,fontSize:'14px',color:'var(--text)'}},w?w.name:'Unknown'),
                React.createElement('div',{style:{fontSize:'12px',color:'var(--text2)',marginTop:'2px'}},
                  a.plannedHours+'h',
                  a.task?React.createElement('span',{style:{marginLeft:'8px',background:'var(--blue-dim)',color:'var(--blue)',padding:'1px 7px',borderRadius:'20px',fontSize:'11px'}},trTask(a.task)):null),
                a.notes?React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',marginTop:'4px',fontStyle:'italic'}},a.notes):null
              ),
              isAdmin?React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditAssign(a),style:{fontSize:'11px'}},'Edit'):null
            );
          })
        )
  );
}

// â”€â”€ HELPERS for month view â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getMonthStart(y,m){return new Date(y,m,1);}
function daysInMonth(y,m){return new Date(y,m+1,0).getDate();}
// Returns all calendar dates for a month grid (Mon-start, padded with prev/next)
function monthGridDates(y,m){
  const first=new Date(y,m,1);
  // Day of week Mon=0..Sun=6
  let dow=first.getDay()-1; if(dow<0)dow=6;
  const total=daysInMonth(y,m);
  const dates=[];
  for(let i=0;i<dow;i++){const d=new Date(y,m,1-dow+i);dates.push({date:d,cur:false});}
  for(let i=1;i<=total;i++)dates.push({date:new Date(y,m,i),cur:true});
  while(dates.length%7!==0){const d=new Date(y,m+1,dates.length-dow-total+1);dates.push({date:d,cur:false});}
  return dates;
}

// â”€â”€ DROP BLOCK MODAL: when admin drops a project onto a day â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function DropBlockModal({jobId,startDate,jobs,workers,stages,scheduleBlocks,assignMap,dispatch,toast,onClose}){
  const job=jobs.find(j=>j.id===jobId);
  const jc=jobColor(job?job.colorIdx:0);

  const [blockStage,setBlockStage]=useState(job?job.stage:(stages[0]?stages[0].name:'Prep'));
  const [blockDays,setBlockDays]=useState(job?job.estimatedDays:1);
  const [selected,setSelected]=useState([]);
  const activeWorkers=workers.filter(w=>w.isActive);

  // tasks from chosen stage
  const stageObj=stages.find(s=>s.name===blockStage);
  const stageTasks=stageObj?stageObj.tasks||[]:[];

  const toggle=(wId)=>{
    setSelected(s=>s.find(x=>x.workerId===wId)?s.filter(x=>x.workerId!==wId):[...s,{workerId:wId,task:'',hours:8}]);
  };
  const setWF=(wId,field,val)=>setSelected(s=>s.map(x=>x.workerId===wId?{...x,[field]:val}:x));
  const isSel=(wId)=>selected.some(x=>x.workerId===wId);

  const save=()=>{
    const bId=genId();
    dispatch({type:'ADD_BLOCK',block:{id:bId,jobId,startDate,estimatedDays:parseFloat(blockDays)||1,stage:blockStage,colorIdx:job?job.colorIdx:0}});
    selected.forEach(sel=>{
      dispatch({type:'ADD_ASSIGNMENT',assignment:{id:genId(),jobId,blockId:bId,workerId:sel.workerId,scheduledDate:startDate,plannedHours:parseFloat(sel.hours)||8,task:sel.task,notes:''}});
    });
    toast('Block added'+(selected.length?' with '+selected.length+' worker(s)':''),'success');
    onClose();
  };

  const c=stageColor(stages,blockStage);
  const dateLabel=new Date(startDate+'T12:00:00').toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric'});

  return React.createElement(Modal,{title:'Schedule Block',onClose,wide:true,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Cancel'),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:save},'Add to Calendar'),
  ]},
    React.createElement('div',{style:{background:jc.bg,border:'1px solid '+jc.text+'33',borderRadius:'var(--r)',padding:'10px 14px',marginBottom:'16px',display:'flex',alignItems:'center',gap:'8px',flexWrap:'wrap'}},
      React.createElement('span',{style:{fontWeight:800,fontSize:'15px',color:jc.text}},job?job.name||job.address:''),
      React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)',marginLeft:'auto'}},'Starting '+dateLabel)
    ),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},t('stageForBlock')),
        React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px'}},
          React.createElement('div',{style:{width:'14px',height:'14px',borderRadius:'50%',background:stageHex,flexShrink:0,boxShadow:'0 1px 4px '+stageHex+'88'}}),
          React.createElement('select',{className:'form-select',value:blockStage,onChange:e=>setBlockStage(e.target.value)},
            stages.map(s=>{
              const sh=s.colorHex||s.color.text||'#475569';
              return React.createElement('option',{key:s.id,value:s.name},s.name);
            })
          )
        )
      ),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},t('duration')),
        React.createElement('select',{className:'form-select',value:blockDays,onChange:e=>setBlockDays(e.target.value)},
          [1,2,3,4,5,6,7,8,9,10,14,21,28].map(d=>
            React.createElement('option',{key:d,value:String(d)},d===1?'1 day':d+' days')
          )
        ),
        job&&job.estimatedDays?React.createElement('div',{style:{fontSize:'11px',color:'var(--text3)',marginTop:'3px'}},'Project estimate: '+job.estimatedDays+(job.estimatedDays===1?' day':' days')):null
      )
    ),
    stageTasks.length>0&&React.createElement('div',{style:{fontSize:'11px',color:'var(--text3)',marginBottom:'12px',background:'var(--bg3)',padding:'6px 10px',borderRadius:'var(--r)'}},
      'ğŸ“‹ Tasks for this stage: '+stageTasks.join(' Â· ')
    ),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'6px'}},'Assign workers (optional)'),
    React.createElement('div',{className:'worker-checklist',style:{maxHeight:'220px'}},
      activeWorkers.map(w=>{
        const sel=selected.find(x=>x.workerId===w.id);
        const wColor=w.color||jc.text;
        return React.createElement('div',{key:w.id,className:'worker-check-item'+(isSel(w.id)?' checked':'')},
          React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:wColor,flexShrink:0}}),
          React.createElement('input',{type:'checkbox',checked:isSel(w.id),onChange:()=>toggle(w.id)}),
          React.createElement('span',{className:'worker-check-name'},w.name),
          isSel(w.id)?React.createElement('input',{type:'number',min:.5,step:.5,value:sel.hours,onChange:e=>setWF(w.id,'hours',e.target.value),style:{width:'55px',marginLeft:'8px',border:'1px solid var(--border)',borderRadius:'5px',padding:'3px 6px',fontSize:'12px',background:'var(--bg2)'},title:'Hours'}):null,
          isSel(w.id)&&stageTasks.length>0?React.createElement('select',{className:'worker-task-sel',value:sel.task,onChange:e=>setWF(w.id,'task',e.target.value)},
            React.createElement('option',{value:''},'Task...'),
            stageTasks.map((tt,i)=>React.createElement('option',{key:i,value:tt},tt))
          ):null
        );
      })
    )
  );
}

// â”€â”€ CELL DETAIL MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function CellDetailModal({block,job,date,assignments,workers,stages,isAdmin,dispatch,toast,onClose}){
  const [editAssign,setEditAssign]=useState(null);
  const [editingWorkers,setEditingWorkers]=useState(false); // checklist mode
  const [confirmDel,setConfirmDel]=useState(false);

  // Worker checklist state for editing
  // sel: [{workerId, hours, task}] â€” mirrors DropBlockModal style
  const [sel,setSel]=useState([]);

  const jc=jobColor(job?job.colorIdx||block?.colorIdx||0:block?.colorIdx||0);
  const stageHex=(()=>{
    const stg=stages.find(s=>s.name===(block?block.stage:''));
    return stg?stg.colorHex||stg.color?.text||'#6366f1':'#6366f1';
  })();
  const c=stageColor(stages,block?block.stage:'');
  const locale=LANG==='es'?'es-MX':'en-US';
  const dateLabel=new Date(date+'T12:00:00').toLocaleDateString(locale,{weekday:'long',month:'long',day:'numeric'});
  const activeWorkers=workers.filter(w=>w.isActive!==false);
  const stageObj=stages.find(s=>s.name===(block?block.stage:''));
  const stageTasks=stageObj?stageObj.tasks||[]:[];

  // Enter edit-workers mode: pre-populate checklist from existing assignments
  const enterEditWorkers=()=>{
    const current=assignments.map(a=>({workerId:a.workerId,hours:a.plannedHours||8,task:a.task||''}));
    setSel(current);
    setEditingWorkers(true);
  };

  const toggle=wId=>{
    setSel(s=>s.find(x=>x.workerId===wId)
      ?s.filter(x=>x.workerId!==wId)
      :[...s,{workerId:wId,hours:8,task:''}]
    );
  };
  const setWF=(wId,f,v)=>setSel(s=>s.map(x=>x.workerId===wId?{...x,[f]:v}:x));
  const isSel=wId=>sel.some(x=>x.workerId===wId);

  // Save worker changes: remove unchecked assignments, add new checked ones
  const saveWorkers=()=>{
    const newWorkerIds=new Set(sel.map(x=>x.workerId));
    const existingWorkerIds=new Set(assignments.map(a=>a.workerId));

    // Remove workers that were unchecked
    assignments.forEach(a=>{
      if(!newWorkerIds.has(a.workerId)){
        dispatch({type:'DELETE_ASSIGNMENT',id:a.id});
      } else {
        // Update hours/task for existing workers
        const s=sel.find(x=>x.workerId===a.workerId);
        if(s) dispatch({type:'UPDATE_ASSIGNMENT',id:a.id,data:{plannedHours:parseFloat(s.hours)||8,task:s.task,stage:block?block.stage:''}});
      }
    });
    // Add newly checked workers
    sel.forEach(s=>{
      if(!existingWorkerIds.has(s.workerId)){
        dispatch({type:'ADD_ASSIGNMENT',assignment:{
          id:genId(),jobId:block?block.jobId:'',blockId:block?block.id:'',
          workerId:s.workerId,scheduledDate:date,
          plannedHours:parseFloat(s.hours)||8,task:s.task,notes:'',
          stage:block?block.stage:''
        }});
      }
    });
    toast(t('saved'),'success');
    setEditingWorkers(false);
  };

  if(editAssign) return React.createElement(AssignmentModal,{
    assignment:editAssign,jobs:[job],workers,stages,isAdmin,dispatch,allAssignments:assignments,
    blockStageName:block?block.stage:null,
    onSave:(id,updates)=>{dispatch({type:'UPDATE_ASSIGNMENT',id,data:updates});toast(t('saved'),'success');setEditAssign(null);},
    onDelete:(id)=>{dispatch({type:'DELETE_ASSIGNMENT',id});toast(t('removed'),'success');setEditAssign(null);},
    onClose:()=>setEditAssign(null)
  });

  if(confirmDel) return React.createElement(Confirm,{
    msg:t('removeBlockConfirm'),
    onConfirm:()=>{dispatch({type:'DELETE_BLOCK',id:block.id});toast('Block removed','success');onClose();},
    onCancel:()=>setConfirmDel(false)
  });

  // â”€â”€ EDIT WORKERS MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if(editingWorkers) return React.createElement(Modal,{
    title:'Edit Workers â€” '+dateLabel,
    onClose:()=>setEditingWorkers(false),
    wide:true,
    footer:[
      React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:()=>setEditingWorkers(false)},t('cancel')),
      React.createElement('button',{key:'s',className:'btn btn-primary',onClick:saveWorkers},'Save Workers'),
    ]
  },
    // Job header
    React.createElement('div',{style:{background:jc.bg,border:'1px solid '+jc.text+'33',borderRadius:'var(--r)',padding:'10px 14px',marginBottom:'16px',display:'flex',alignItems:'center',gap:'8px',flexWrap:'wrap'}},
      React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:jc.text,flexShrink:0}}),
      React.createElement('span',{style:{fontWeight:800,fontSize:'14px',color:jc.text}},job?job.name||job.address:''),
      React.createElement('span',{style:{background:stageHex,color:'#fff',fontSize:'10px',fontWeight:800,padding:'2px 8px',borderRadius:'20px'}},trStage(block?block.stage:'')),
      React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)',marginLeft:'auto'}},dateLabel)
    ),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'8px'}},'Check workers for this day:'),
    React.createElement('div',{className:'worker-checklist',style:{maxHeight:'260px'}},
      activeWorkers.map(w=>{
        const s=sel.find(x=>x.workerId===w.id);
        const wColor=w.color||jc.text;
        return React.createElement('div',{key:w.id,className:'worker-check-item'+(isSel(w.id)?' checked':'')},
          React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:wColor,flexShrink:0}}),
          React.createElement('input',{type:'checkbox',checked:isSel(w.id),onChange:()=>toggle(w.id)}),
          React.createElement('span',{className:'worker-check-name'},w.name),
          isSel(w.id)?React.createElement('input',{
            type:'number',min:.5,step:.5,value:s?s.hours:8,
            onChange:e=>setWF(w.id,'hours',e.target.value),
            style:{width:'55px',marginLeft:'8px',border:'1px solid var(--border)',borderRadius:'5px',padding:'3px 6px',fontSize:'12px',background:'var(--bg2)'},
            title:'Hours'
          }):null,
          isSel(w.id)&&stageTasks.length>0?React.createElement('select',{
            className:'worker-task-sel',
            value:s?s.task:'',
            onChange:e=>setWF(w.id,'task',e.target.value)
          },
            React.createElement('option',{value:''},'Task...'),
            stageTasks.map((tt,i)=>React.createElement('option',{key:i,value:taskText(tt)},taskText(tt)))
          ):null
        );
      })
    )
  );

  // â”€â”€ NORMAL VIEW MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const footer=[
    isAdmin?React.createElement('button',{key:'del',className:'btn btn-danger btn-sm',style:{marginRight:'auto'},onClick:()=>setConfirmDel(true)},t('removeBlock')):null,
    isAdmin?React.createElement('button',{key:'ew',className:'btn btn-primary',onClick:enterEditWorkers},'âœï¸ Edit Workers'):null,
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Close')
  ].filter(Boolean);

  return React.createElement(Modal,{title:(job?job.name||job.address:'Block')+' â€” '+dateLabel,onClose,footer,wide:true},
    React.createElement('div',{style:{background:jc.bg,border:'1px solid '+jc.text+'33',borderRadius:'var(--r)',padding:'10px 14px',marginBottom:'14px'}},
      React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px',flexWrap:'wrap'}},
        React.createElement('span',{style:{fontWeight:800,fontSize:'15px',color:jc.text}},job?job.name||job.address:''),
        React.createElement('span',{style:{background:stageHex,color:'#fff',fontSize:'10px',fontWeight:800,padding:'2px 8px',borderRadius:'20px'}},trStage(block?block.stage:'')),
        job&&job.address?React.createElement('span',{style:{fontSize:'12px',color:jc.text+'88'}},'ğŸ“ '+job.address):null,
        React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)',marginLeft:'auto'}},
          block&&block.estimatedDays>1?Math.ceil(block.estimatedDays)+' day block':'')
      )
    ),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'8px'}},'Assigned Workers'),
    assignments.length===0
      ?React.createElement('div',{style:{color:'var(--text3)',fontSize:'13px',fontStyle:'italic',padding:'8px 0'}},'No workers assigned yet')
      :React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'8px'}},
          assignments.map(a=>{
            const w=workers.find(x=>x.id===a.workerId);
            const wColor=w&&w.color?w.color:jc.text;
            const taskObj=stageObj&&stageObj.tasks?stageObj.tasks.find(tt=>taskText(tt)===a.task):null;
            const chipColor=taskObj?taskColor(taskObj,'#6366f1'):'#6366f1';
            return React.createElement('div',{key:a.id,style:{background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'var(--r)',padding:'10px 12px',display:'flex',alignItems:'flex-start',gap:'10px'}},
              React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:wColor,marginTop:'4px',flexShrink:0}}),
              React.createElement('div',{style:{flex:1}},
                React.createElement('div',{style:{fontWeight:700,fontSize:'14px'}},w?w.name:'Unknown'),
                React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'6px',marginTop:'3px',flexWrap:'wrap'}},
                  React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)'}},a.plannedHours+'h'),
                  a.task?React.createElement('span',{style:{background:chipColor+'22',color:chipColor,border:'1px solid '+chipColor+'44',padding:'1px 8px',borderRadius:'20px',fontSize:'11px',fontWeight:700}},trTask(a.task)):null
                ),
                a.notes?React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',marginTop:'4px',fontStyle:'italic'}},a.notes):null
              ),
              isAdmin?React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditAssign(a),style:{fontSize:'11px'}},'Edit'):null
            );
          })
        )
  );
}

// â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getMonthStart(y,m){return new Date(y,m,1);}
function daysInMonth(y,m){return new Date(y,m+1,0).getDate();}

// Returns [{date, cur}] for the full month grid (Mon-start)
function monthGridDates(y,m){
  const first=new Date(y,m,1);
  const dow=first.getDay(); // Sun=0..Sat=6 (native JS â€” always accurate)
  const total=daysInMonth(y,m);
  const arr=[];
  for(let i=0;i<dow;i++){arr.push({date:new Date(y,m,1-dow+i),cur:false});}
  for(let i=1;i<=total;i++){arr.push({date:new Date(y,m,i),cur:true});}
  while(arr.length%7!==0){arr.push({date:new Date(y,m+1,arr.length-dow-total+1),cur:false});}
  return arr;
}

// â”€â”€ DROP BLOCK MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function DropBlockModal({jobId,startDate,jobs,workers,stages,dispatch,toast,onClose}){
  const job=jobs.find(j=>j.id===jobId);
  const jc=jobColor(job?job.colorIdx:0);
  const [blockStage,setBlockStage]=useState(stages[0]?stages[0].name:'');
  const [blockDays,setBlockDays]=useState('1'); // default 1 day; job.estimatedDays shown as hint
  const [sel,setSel]=useState([]); // [{workerId,task,hours}]
  const activeWorkers=workers.filter(w=>w.isActive);
  const stageObj=stages.find(s=>s.name===blockStage);
  const stageTasks=stageObj&&stageObj.tasks?stageObj.tasks:[];
  const stageHex=stageObj&&stageObj.colorHex?stageObj.colorHex:'#2563eb';
  const c=stageColor(stages,blockStage);
  const locale=LANG==='es'?'es-MX':'en-US';
  const dateLabel=new Date(startDate+'T12:00:00').toLocaleDateString(locale,{weekday:'short',month:'short',day:'numeric'});

  const toggle=wId=>{setSel(s=>s.find(x=>x.workerId===wId)?s.filter(x=>x.workerId!==wId):[...s,{workerId:wId,task:'',hours:8}]);};
  const setWF=(wId,f,v)=>setSel(s=>s.map(x=>x.workerId===wId?{...x,[f]:v}:x));
  const isSel=wId=>sel.some(x=>x.workerId===wId);

  const save=()=>{
    const bId=genId();
    const days=parseFloat(blockDays)||1;
    // Use the stage's color directly from stage object
    const stgObj=stages.find(s=>s.name===blockStage);
    const stageColorIdx=stgObj&&stgObj.colorHex?null:(job?job.colorIdx:0);
    dispatch({type:'ADD_BLOCK',block:{id:bId,jobId,startDate,estimatedDays:days,stage:blockStage,colorIdx:job?job.colorIdx:0,stageHex:stageHex}});
    // Create assignment for EVERY day of the block for each selected worker
    sel.forEach(s=>{
      const totalDays=Math.max(1,Math.ceil(days));
      for(let i=0;i<totalDays;i++){
        const scheduledDate=nd(startDate,i);
        dispatch({type:'ADD_ASSIGNMENT',assignment:{
          id:genId(),jobId,blockId:bId,workerId:s.workerId,
          scheduledDate,plannedHours:parseFloat(s.hours)||8,
          task:taskText(s.task)||s.task,notes:'',stage:blockStage
        }});
      }
    });
    toast('Scheduled'+(sel.length?' â€” '+sel.length+' worker(s) Ã— '+Math.ceil(days)+' day(s)':''),'success');
    onClose();
  };

  return React.createElement(Modal,{title:t('scheduleBlock'),onClose,wide:true,footer:[
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},t('cancel')),
    React.createElement('button',{key:'s',className:'btn btn-primary',onClick:save},t('addToCalendar')),
  ]},
    React.createElement('div',{style:{background:jc.bg,border:'1px solid '+jc.text+'33',borderRadius:'var(--r)',padding:'10px 14px',marginBottom:'16px',display:'flex',alignItems:'center',gap:'10px',flexWrap:'wrap'}},
      React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:jc.text,flexShrink:0}}),
      React.createElement('span',{style:{fontWeight:800,fontSize:'15px',color:jc.text}},job?job.name||job.address:''),
      React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)',marginLeft:'auto'}},'ğŸ“… '+t('startingDate')+' '+dateLabel)
    ),
    React.createElement('div',{className:'form-row'},
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},t('stageForBlock')),
        React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px'}},
          React.createElement('div',{style:{width:'14px',height:'14px',borderRadius:'50%',background:stageHex,flexShrink:0,boxShadow:'0 1px 4px '+stageHex+'88'}}),
          React.createElement('select',{className:'form-select',value:blockStage,onChange:e=>setBlockStage(e.target.value)},
            stages.map(s=>{
              const sh=s.colorHex||s.color.text||'#475569';
              return React.createElement('option',{key:s.id,value:s.name},s.name);
            })
          )
        )
      ),
      React.createElement('div',{className:'form-group'},
        React.createElement('label',{className:'form-label'},t('duration')),
        React.createElement('select',{className:'form-select',value:blockDays,onChange:e=>setBlockDays(e.target.value)},
          [1,2,3,4,5,6,7,8,9,10,14,21,28].map(d=>
            React.createElement('option',{key:d,value:String(d)},d===1?'1 day':d+' days')
          )
        ),
        job&&job.estimatedDays?React.createElement('div',{style:{fontSize:'11px',color:'var(--text3)',marginTop:'3px'}},'Project estimate: '+job.estimatedDays+(job.estimatedDays===1?' day':' days')):null
      )
    ),
    stageTasks.length>0&&React.createElement('div',{style:{fontSize:'12px',color:'var(--text2)',marginBottom:'12px',background:'var(--bg3)',padding:'8px 12px',borderRadius:'var(--r)',display:'flex',flexWrap:'wrap',gap:'6px',alignItems:'center'}},
      React.createElement('span',{style:{fontWeight:700,fontSize:'11px',textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text3)'}},t('stageTasks')+':'),
      stageTasks.map((tt,i)=>{const c=taskColor(tt,'#6366f1');const tx=taskText(tt);return React.createElement('span',{key:i,className:'tag',style:{background:c+'22',color:c,border:'1px solid '+c+'44'}},tx);})
    ),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'6px'}},t('assignWorkers')),
    React.createElement('div',{className:'worker-checklist',style:{maxHeight:'220px'}},
      activeWorkers.map(w=>{
        const s=sel.find(x=>x.workerId===w.id);
        const wColor=w.color||jc.text;
        return React.createElement('div',{key:w.id,className:'worker-check-item'+(isSel(w.id)?' checked':'')},
          React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:wColor,flexShrink:0}}),
          React.createElement('input',{type:'checkbox',checked:isSel(w.id),onChange:()=>toggle(w.id)}),
          React.createElement('span',{className:'worker-check-name'},w.name),
          isSel(w.id)?React.createElement('input',{type:'number',min:.5,step:.5,value:s.hours,onChange:e=>{e.stopPropagation();setWF(w.id,'hours',e.target.value);},onClick:e=>e.stopPropagation(),style:{width:'55px',marginLeft:'auto',border:'1px solid var(--border)',borderRadius:'5px',padding:'3px 6px',fontSize:'12px',background:'var(--bg2)'},title:'Hours'}):null,
          isSel(w.id)&&stageTasks.length>0?React.createElement('select',{className:'worker-task-sel',value:s.task,onChange:e=>{e.stopPropagation();setWF(w.id,'task',e.target.value);},onClick:e=>e.stopPropagation()},
            React.createElement('option',{value:''},'Task...'),
            stageTasks.map((tt,i)=>React.createElement('option',{key:i,value:taskText(tt)},taskText(tt)))
          ):null
        );
      })
    )
  );
}

// â”€â”€ CELL DETAIL MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function CellDetailModal({block,job,date,assignments,workers,stages,isAdmin,dispatch,toast,onClose}){
  const [editAssign,setEditAssign]=useState(null);
  const [confirmDel,setConfirmDel]=useState(false);
  const jc=jobColor(block?block.colorIdx:0);
  const c=stageColor(stages,block?block.stage:'');
  const locale=LANG==='es'?'es-MX':'en-US';
  const dateLabel=new Date(date+'T12:00:00').toLocaleDateString(locale,{weekday:'long',month:'long',day:'numeric'});

  if(editAssign) return React.createElement(AssignmentModal,{
    assignment:editAssign,jobs:[job],workers,stages,isAdmin,dispatch,allAssignments:assignments,
    blockStageName:block?block.stage:null,
    onSave:(id,updates)=>{dispatch({type:'UPDATE_ASSIGNMENT',id,data:updates});toast(t('saved'),'success');setEditAssign(null);},
    onDelete:(id)=>{dispatch({type:'DELETE_ASSIGNMENT',id});toast(t('removed'),'success');setEditAssign(null);},
    onClose:()=>setEditAssign(null)
  });

  if(confirmDel) return React.createElement(Confirm,{
    msg:t('removeBlockConfirm'),
    onConfirm:()=>{dispatch({type:'DELETE_BLOCK',id:block.id});toast('Block removed','success');onClose();},
    onCancel:()=>setConfirmDel(false)
  });

  const footer=[
    isAdmin?React.createElement('button',{key:'del',className:'btn btn-danger btn-sm',style:{marginRight:'auto'},onClick:()=>setConfirmDel(true)},t('removeBlock')):null,
    React.createElement('button',{key:'c',className:'btn btn-ghost',onClick:onClose},'Close'),
  ].filter(Boolean);

  return React.createElement(Modal,{title:(job?job.name||job.address:'Block')+' â€” '+dateLabel,onClose,footer,wide:true},
    React.createElement('div',{style:{background:jc.bg,border:'1px solid '+jc.text+'33',borderRadius:'var(--r)',padding:'10px 14px',marginBottom:'14px',display:'flex',alignItems:'center',gap:'8px',flexWrap:'wrap'}},
      React.createElement('span',{style:{fontWeight:800,fontSize:'14px',color:jc.text}},job?job.name||job.address:''),
      React.createElement('span',{className:'stage-pill',style:{background:c.bg,color:c.text,border:'1px solid '+c.border}},trStage(block?block.stage:'')),
      job&&job.address?React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)'}},'ğŸ“ '+job.address):null
    ),
    React.createElement('div',{style:{fontSize:'11px',fontWeight:700,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text2)',marginBottom:'8px'}},t('workersOnDay')),
    assignments.length===0
      ?React.createElement('div',{style:{color:'var(--text3)',fontSize:'13px',fontStyle:'italic',padding:'12px 0'}},t('noWorkersDay'))
      :React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'8px'}},
          assignments.map(a=>{
            const w=workers.find(x=>x.id===a.workerId);
            const wColor=w&&w.color?w.color:jc.text;
            return React.createElement('div',{key:a.id,style:{background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'var(--r)',padding:'10px 12px',display:'flex',alignItems:'flex-start',gap:'10px'}},
              React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:wColor,marginTop:'4px',flexShrink:0}}),
              React.createElement('div',{style:{flex:1}},
                React.createElement('div',{style:{fontWeight:700,fontSize:'14px'}},w?w.name:'Unknown'),
                React.createElement('div',{style:{fontSize:'12px',color:'var(--text2)',marginTop:'2px'}},
                  a.plannedHours+'h',
                  a.task?React.createElement('span',{style:{marginLeft:'8px',background:'var(--blue-dim)',color:'var(--blue)',padding:'1px 7px',borderRadius:'20px',fontSize:'11px'}},trTask(a.task)):null
                ),
                a.notes?React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',marginTop:'4px',fontStyle:'italic'}},a.notes):null
              ),
              isAdmin?React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditAssign(a),style:{fontSize:'11px'}},'Edit'):null
            );
          })
        )
  );
}

// â”€â”€ SCHEDULER PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function SchedulerPage({data,isAdmin,dispatch,toast}){
  const now=new Date();
  const [year,setYear]=useState(now.getFullYear());
  const [month,setMonth]=useState(now.getMonth());
  const [dragItem,setDragItem]=useState(null);   // job being dragged from sidebar
  const [dropModal,setDropModal]=useState(null); // {jobId, startDate}
  const [cellModal,setCellModal]=useState(null); // {blockId, date}
  const [dragOverDate,setDragOverDate]=useState(null);

  const todayStr=toDateStr(new Date());
  const MONTH_NAMES=(T[LANG]&&T[LANG].months?T[LANG].months:T.en.months).split(',');
  const WEEK_DAYS=(T[LANG]&&T[LANG].weekDays?T[LANG].weekDays:T.en.weekDays).split(',');

  const gridDates=useMemo(()=>monthGridDates(year,month),[year,month]);
  const weeks=useMemo(()=>{
    const w=[];
    for(let i=0;i<gridDates.length;i+=7) w.push(gridDates.slice(i,i+7));
    return w;
  },[gridDates]);

  const scheduleBlocks=data.scheduleBlocks||[];
  const activeJobs=data.jobs.filter(j=>!j.status||j.status==='active');

  // Map: date string â†’ list of assignments on that date
  const assignsByDate=useMemo(()=>{
    const m={};
    (data.assignments||[]).forEach(a=>{
      if(!m[a.scheduledDate])m[a.scheduledDate]=[];
      m[a.scheduledDate].push(a);
    });
    return m;
  },[data.assignments]);

  // Map: date string â†’ list of schedule blocks active on that date
  const blocksByDate=useMemo(()=>{
    const m={};
    scheduleBlocks.forEach(b=>{
      const days=Math.max(1,Math.ceil(b.estimatedDays||1));
      for(let i=0;i<days;i++){
        const d=nd(b.startDate,i);
        if(!m[d])m[d]=[];
        m[d].push(b);
      }
    });
    return m;
  },[scheduleBlocks]);

  const prevMonth=()=>{if(month===0){setMonth(11);setYear(y=>y-1);}else setMonth(m=>m-1);};
  const nextMonth=()=>{if(month===11){setMonth(0);setYear(y=>y+1);}else setMonth(m=>m+1);};
  const goToday=()=>{setYear(now.getFullYear());setMonth(now.getMonth());};

  // Drag handlers
  const onDragStart=(e,job)=>{
    e.dataTransfer.effectAllowed='move';
    e.dataTransfer.setData('text/plain',job.id);
    setDragItem(job);
  };
  const onDragEnd=()=>{setDragItem(null);setDragOverDate(null);};
  const onDragOver=(e,ds)=>{e.preventDefault();e.dataTransfer.dropEffect='move';setDragOverDate(ds);};
  const onDragLeave=()=>setDragOverDate(null);
  const onDrop=(e,ds,cur)=>{
    e.preventDefault();
    setDragOverDate(null);
    if(!dragItem||!isAdmin||!cur)return;
    setDropModal({jobId:dragItem.id,startDate:ds});
    setDragItem(null);
  };

  return React.createElement('div',{className:'main sched-layout'},

    // â”€â”€ LEFT SIDEBAR: Project cards (draggable for admin) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    React.createElement('div',{className:'proj-sidebar'},
      React.createElement('div',{className:'proj-sidebar-hdr'},'Projects'),
      activeJobs.length===0
        ? React.createElement('div',{style:{color:'var(--text3)',fontSize:'12px',padding:'10px',fontStyle:'italic'}},'No active jobs')
        : activeJobs.map(job=>{
            const jc=jobColor(job.colorIdx);
            return React.createElement('div',{
              key:job.id,
              className:'proj-card'+(dragItem&&dragItem.id===job.id?' proj-card-dragging':''),
              style:{borderLeft:'4px solid '+jc.text,cursor:isAdmin?'grab':'default'},
              draggable:isAdmin,
              onDragStart:isAdmin?e=>onDragStart(e,job):null,
              onDragEnd:isAdmin?onDragEnd:null,
            },
              React.createElement('div',{className:'proj-card-name',style:{color:jc.text}},job.name||job.address),
              job.address&&React.createElement('div',{className:'proj-card-addr'},job.address),
              React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'4px',marginTop:'5px'}},
                React.createElement('span',{className:'proj-card-meta'},(job.estimatedDays||1)+(job.estimatedDays===1?' day':' days'))
              ),
              job.summary&&React.createElement('div',{className:'proj-card-summary'},job.summary),
              isAdmin&&React.createElement('div',{style:{fontSize:'9px',color:'var(--text3)',marginTop:'4px',fontStyle:'italic'}},'drag to calendar')
            );
          })
    ),

    // â”€â”€ RIGHT: Month Calendar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    React.createElement('div',{className:'schedule-area'},

      // Toolbar
      React.createElement('div',{className:'schedule-toolbar'},
        React.createElement('div',{className:'week-nav'},
          React.createElement('button',{className:'week-btn',onClick:prevMonth},'â€¹'),
          React.createElement('span',{className:'week-label',style:{minWidth:'180px'}},MONTH_NAMES[month]+' '+year),
          React.createElement('button',{className:'week-btn',onClick:nextMonth},'â€º')
        ),
        React.createElement('button',{className:'today-btn',onClick:goToday},t('today')),
        !isAdmin&&React.createElement('span',{className:'tag',style:{marginLeft:'auto',background:'var(--blue-dim)',color:'var(--blue)'}},t('viewOnly'))
      ),

      // Calendar grid
      React.createElement('div',{className:'cal-grid-wrap'},
        React.createElement('table',{className:'cal-table'},
          React.createElement('thead',null,
            React.createElement('tr',null,
              WEEK_DAYS.map((d,i)=>
                React.createElement('th',{key:i,className:'cal-th'},d)
              )
            )
          ),
          React.createElement('tbody',null,
            weeks.map((week,wi)=>
              React.createElement('tr',{key:wi,className:'cal-week-row'},
                week.map(({date,cur})=>{
                  const ds=toDateStr(date);
                  const isToday=ds===todayStr;
                  const blocksHere=(blocksByDate[ds]||[]);
                  const dayAssigns=assignsByDate[ds]||[];
                  const isDragOver=dragOverDate===ds;

                  return React.createElement('td',{
                    key:ds,
                    className:'cal-cell'
                      +(isToday?' cal-today':'')
                      +(!cur?' cal-other-month':'')
                      +(isDragOver&&isAdmin?' cal-drag-over':''),
                    onDragOver:isAdmin&&cur?e=>onDragOver(e,ds):null,
                    onDragLeave:isAdmin&&cur?onDragLeave:null,
                    onDrop:isAdmin&&cur?e=>onDrop(e,ds,cur):null,
                  },
                    // Date number
                    React.createElement('div',{className:'cal-date-num'+(isToday?' cal-date-today':'')},date.getDate()),

                    // Schedule blocks active on this date
                    blocksHere.map(block=>{
                      const job=data.jobs.find(j=>j.id===block.jobId);
                      // Block uses JOB color; stage pill uses STAGE color
                      const stg=data.stages.find(s=>s.name===block.stage);
                      const stgHex=stg?stg.colorHex||stg.color?.text||'#6366f1':'#6366f1';
                      // Job color for block background
                      const jc=jobColor(job?job.colorIdx||0:block.colorIdx||0);
                      const totalDays=Math.max(1,Math.ceil(block.estimatedDays||1));
                      const lastDate=nd(block.startDate,totalDays-1);
                      const isFirst=ds===block.startDate;
                      const isLast=ds===lastDate;

                      // Workers assigned to this block on this day
                      const blockWorkers=dayAssigns
                        .filter(a=>a.blockId===block.id)
                        .map(a=>({...a,worker:data.workers.find(w=>w.id===a.workerId)}));

                      return React.createElement('div',{
                        key:block.id,
                        className:'cal-block'
                          +(isFirst?' cal-block-first':'')
                          +(isLast?' cal-block-last':''),
                        style:{
                          '--block-color':jc.text,
                          '--block-bg':jc.bg,
                          background:jc.bg,
                          borderLeft:'3px solid '+jc.text,
                          color:jc.text,
                        },
                        onClick:()=>setCellModal({blockId:block.id,date:ds}),
                        title:(job?job.name||job.address:'')+' Â· '+block.stage,
                      },
                        // Job name + stage label â€” only on first day of block
                        isFirst&&React.createElement('div',{className:'cal-block-header'},
                          React.createElement('span',{className:'cal-block-name',style:{color:jc.text}},job?job.name||job.address:''),
                          React.createElement('span',{className:'cal-block-stage',style:{background:stgHex,color:'#fff',boxShadow:'0 1px 4px '+stgHex+'88'}},trStage(block.stage))
                        ),
                        // Workers â€” shown on every day that has assignments
                        blockWorkers.length>0&&React.createElement('div',{className:'cal-block-workers'},
                          blockWorkers.map(({id,worker})=>
                            React.createElement('div',{key:id,className:'cal-worker-row'},
                              React.createElement('span',{className:'cal-worker-dot',style:{background:worker&&worker.color?worker.color:'rgba(255,255,255,0.7)'}}),
                              React.createElement('span',{className:'cal-worker-name',style:{color:jc.text}},worker?worker.name:'?'),
                              (()=>{
                                const a2=(data.assignments||[]).find(x=>x.id===id);
                                if(!a2||!a2.task)return null;
                                // Look up task color from stage
                                const stg2=data.stages.find(s=>s.name===(a2.stage||block.stage));
                                const taskObj=stg2&&stg2.tasks?stg2.tasks.find(tt=>taskText(tt)===a2.task):null;
                                const chipColor=taskObj?taskColor(taskObj,'#6366f1'):'#6366f1';
                                return React.createElement('span',{className:'cal-task-chip',style:{background:chipColor+'dd'}},trTask(a2.task));
                              })()
                            )
                          )
                        )
                      );
                    }),

                    // Drop hint for empty days (admin only)
                    isAdmin&&cur&&blocksHere.length===0&&React.createElement('div',{className:'cal-drop-hint'},'+')
                  );
                })
              )
            )
          )
        )
      )
    ),

    // Modals
    dropModal?React.createElement(DropBlockModal,{
      ...dropModal,
      jobs:data.jobs,workers:data.workers,stages:data.stages,
      dispatch,toast,
      onClose:()=>setDropModal(null)
    }):null,

    cellModal&&(()=>{
      const block=scheduleBlocks.find(b=>b.id===cellModal.blockId);
      const job=block?data.jobs.find(j=>j.id===block.jobId):null;
      const assignments=(data.assignments||[]).filter(a=>a.blockId===cellModal.blockId&&a.scheduledDate===cellModal.date);
      return React.createElement(CellDetailModal,{
        block,job,date:cellModal.date,assignments,
        workers:data.workers,stages:data.stages,
        isAdmin,dispatch,toast,
        onClose:()=>setCellModal(null)
      });
    })()
  );
}

// â”€â”€ FORGOT PASSWORD FLOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ForgotPassword({users,onBack,onReset}){
  const [step,setStep]=useState(1); // 1=username, 2=security question, 3=new password
  const [username,setUsername]=useState('');
  const [answer,setAnswer]=useState('');
  const [pw,setPw]=useState('');
  const [pw2,setPw2]=useState('');
  const [err,setErr]=useState('');
  const [foundUser,setFoundUser]=useState(null);

  // Also check hardcoded admins
  const allUsers=[...users,...HARDCODED_ADMINS.filter(ha=>!users.find(u=>u.id===ha.id))];

  const step1=()=>{
    const u=allUsers.find(u=>(u.username||'').toLowerCase()===username.toLowerCase());
    if(!u){setErr('Username not found.');return;}
    if(!u.securityQuestion){setErr('No security question set for this account. Contact an admin.');return;}
    setFoundUser(u);setErr('');setStep(2);
  };
  const step2=()=>{
    if((foundUser.securityAnswer||'').toLowerCase()!==(answer||'').toLowerCase()){setErr('Incorrect answer.');return;}
    setErr('');setStep(3);
  };
  const step3=()=>{
    if(!pw.trim()){setErr('Enter a new password.');return;}
    if(pw!==pw2){setErr('Passwords do not match.');return;}
    onReset(foundUser.id,pw);
  };

  return React.createElement('div',{},
    step===1&&React.createElement('div',null,
      React.createElement('p',{style:{fontSize:'13px',color:'var(--text2)',marginBottom:'14px'}},'Enter your username to start the password reset process.'),
      err&&React.createElement('div',{className:'login-error'},err),
      React.createElement('label',{className:'login-label'},'Username'),
      React.createElement('input',{className:'login-input',value:username,onChange:e=>setUsername(e.target.value),onKeyDown:e=>e.key==='Enter'&&step1(),placeholder:'your username',autoFocus:true}),
      React.createElement('button',{className:'login-btn',onClick:step1},'Next â†’')),
    step===2&&foundUser&&React.createElement('div',null,
      React.createElement('div',{className:'fp-step'},
        React.createElement('div',{className:'fp-step-label'},'Security Question'),
        React.createElement('p',{style:{fontSize:'14px',fontWeight:600,color:'var(--text)',marginBottom:'12px'}},foundUser.securityQuestion)),
      err&&React.createElement('div',{className:'login-error'},err),
      React.createElement('label',{className:'login-label'},'Your Answer'),
      React.createElement('input',{className:'login-input',value:answer,onChange:e=>setAnswer(e.target.value),onKeyDown:e=>e.key==='Enter'&&step2(),placeholder:'Type your answerâ€¦',autoFocus:true}),
      React.createElement('button',{className:'login-btn',onClick:step2},'Verify Answer â†’')),
    step===3&&React.createElement('div',null,
      React.createElement('p',{style:{fontSize:'13px',color:'var(--green)',marginBottom:'14px',fontWeight:600}},'âœ“ Identity verified! Set your new password.'),
      err&&React.createElement('div',{className:'login-error'},err),
      React.createElement('label',{className:'login-label'},'New Password'),
      React.createElement('input',{className:'login-input',type:'password',value:pw,onChange:e=>setPw(e.target.value),placeholder:'New password',autoFocus:true}),
      React.createElement('label',{className:'login-label'},'Confirm Password'),
      React.createElement('input',{className:'login-input',type:'password',value:pw2,onChange:e=>setPw2(e.target.value),onKeyDown:e=>e.key==='Enter'&&step3(),placeholder:'Repeat password'}),
      React.createElement('button',{className:'login-btn',onClick:step3},'Set New Password')),
    React.createElement('div',{className:'fp-back',onClick:onBack},'â† Back to login')
  );
}

// â”€â”€ CONTRACTED PAGE (admin) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ContractedPage({data,isAdmin,dispatch,toast}){
  const [showForm,setShowForm]=useState(false);
  const [editJob,setEditJob]=useState(null);
  const [confirmDel,setConfirmDel]=useState(null);
  const [viewImg,setViewImg]=useState(null);
  const contractedJobs=data.jobs.filter(j=>j.status==='contracted');
  const handleSave=form=>{
    if(editJob){dispatch({type:'UPDATE_JOB',id:editJob.id,data:form});toast(t('jobUpdated'),'success');setEditJob(null);}
    else{dispatch({type:'ADD_JOB',job:{...form,id:genId(),tasks:[],status:'contracted'}});toast(t('jobCreated'),'success');setShowForm(false);}
  };
  return React.createElement('div',{className:'page'},
    React.createElement('div',{className:'page-header'},
      React.createElement('div',null,
        React.createElement('div',{className:'page-title'},'ğŸ“‹ '+t('contracted')),
        React.createElement('div',{style:{fontSize:'13px',color:'var(--text2)',marginTop:'2px'}},t('contractedHint'))
      ),
      isAdmin&&React.createElement('div',{style:{display:'flex',gap:'8px'}},
        React.createElement('button',{className:'btn btn-primary',onClick:()=>setShowForm(true)},t('addContracted'))
      )
    ),
    contractedJobs.length===0
      ?React.createElement('div',{className:'empty-state'},
          React.createElement('div',{className:'empty-icon'},'ğŸ“‹'),
          React.createElement('div',{className:'empty-text'},t('noContracted')),
          React.createElement('div',{className:'empty-sub'},'Add contracted jobs here until ready to schedule'))
      :React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'10px'}},
          contractedJobs.map(job=>{
            const jc=jobColor(job.colorIdx);
            return React.createElement('div',{key:job.id,className:'card'},
              React.createElement('div',{style:{width:'4px',background:jc.text,position:'absolute',left:0,top:0,bottom:0,borderRadius:'12px 0 0 12px'}}),
              React.createElement('div',{style:{padding:'14px 16px'}},
                React.createElement('div',{style:{display:'flex',alignItems:'flex-start',justifyContent:'space-between',gap:'12px',flexWrap:'wrap'}},
                  React.createElement('div',{style:{flex:1}},
                    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'3px',flexWrap:'wrap'}},
                      React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:jc.text,flexShrink:0}}),
                      React.createElement('span',{style:{fontSize:'15px',fontWeight:800}},job.name||job.address),
                      job.customerName&&React.createElement('span',{className:'tag'},job.customerName)
                    ),
                    React.createElement('div',{style:{fontSize:'12px',color:'var(--text2)',marginBottom:'3px'}},job.address),
                    job.summary&&React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',fontStyle:'italic'}},job.summary)
                  ),
                  React.createElement('div',{style:{display:'flex',alignItems:'flex-start',gap:'8px',flexShrink:0}},
                    job.imageB64?React.createElement('img',{src:job.imageB64,style:{width:'70px',height:'50px',objectFit:'cover',borderRadius:'8px',border:'2px solid var(--border)',flexShrink:0,cursor:'pointer'},onClick:()=>setViewImg(job.imageB64)}):null,
                    isAdmin?React.createElement('div',{style:{display:'flex',gap:'4px',flexWrap:'wrap'}},
                    React.createElement('button',{className:'btn btn-primary btn-sm',style:{fontSize:'11px'},onClick:()=>dispatch({type:'SET_JOB_STATUS',id:job.id,status:'active'})},'ğŸ“… '+t('schedule')),
                    React.createElement('button',{className:'btn btn-green btn-sm',style:{fontSize:'11px'},onClick:()=>dispatch({type:'SET_JOB_STATUS',id:job.id,status:'completed'})},t('markCompleted')),
                    React.createElement('button',{className:'btn btn-ghost btn-sm',onClick:()=>setEditJob(job)},t('edit')),
                    React.createElement('button',{className:'btn btn-danger btn-sm',onClick:()=>setConfirmDel(job)},t('delete'))
                    ):null
                  )
                ),
                React.createElement('div',{style:{display:'grid',gridTemplateColumns:'repeat(2,1fr)',gap:'8px',marginTop:'12px',maxWidth:'380px'}},
                  React.createElement('div',{className:'detail-stat'},
                    React.createElement('div',{className:'detail-stat-label'},'ğŸ“… '+t('estDays')),
                    React.createElement('div',{className:'detail-stat-value'},(job.estimatedDays||1)+(job.estimatedDays===1?' '+t('day'):' '+t('days')))),
                  job.sqft&&React.createElement('div',{className:'detail-stat'},
                    React.createElement('div',{className:'detail-stat-label'},'ğŸ“ '+t('sqft')),
                    React.createElement('div',{className:'detail-stat-value accent'},Number(job.sqft).toLocaleString()+' sqft'))
                )
              )
            );
          })
        ),
    showForm&&React.createElement(JobForm,{stages:data.stages,isAdmin,onSave:handleSave,onClose:()=>setShowForm(false)}),
    editJob&&React.createElement(JobForm,{job:editJob,stages:data.stages,isAdmin,onSave:handleSave,onClose:()=>setEditJob(null)}),
    confirmDel&&React.createElement(Confirm,{
      msg:t('delete')+' '+(confirmDel.name||confirmDel.address)+'?',
      onConfirm:()=>{dispatch({type:'DELETE_JOB',id:confirmDel.id});toast(t('jobDeleted'),'success');setConfirmDel(null);},
      onCancel:()=>setConfirmDel(null)}),
    viewImg?React.createElement('div',{onClick:()=>setViewImg(null),style:{position:'fixed',inset:0,background:'rgba(0,0,0,.75)',zIndex:9999,display:'flex',alignItems:'center',justifyContent:'center',cursor:'zoom-out'}},
      React.createElement('img',{src:viewImg,style:{maxWidth:'90vw',maxHeight:'90vh',borderRadius:'12px',boxShadow:'0 8px 40px rgba(0,0,0,.6)'}})):null
  );
}

// â”€â”€ COMPLETED PAGE (admin) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function CompletedPage({data,isAdmin,dispatch,toast}){
  const completedJobs=data.jobs.filter(j=>j.status==='completed');
  const [confirmDel,setConfirmDel]=useState(null);
  const [editDateJobId,setEditDateJobId]=useState(null);
  const [editDateVal,setEditDateVal]=useState('');
  const [viewImg,setViewImg]=useState(null);

  // Compute stats for a job from schedule blocks + assignments
  const getJobStats=(job)=>{
    const blocks=(data.scheduleBlocks||[]).filter(b=>b.jobId===job.id);
    // Total assigned days = sum of block estimatedDays
    const totalAssigned=blocks.reduce((sum,b)=>sum+Math.ceil(b.estimatedDays||1),0);
    // Stage breakdown: {stageName: days}
    const stageMap={};
    blocks.forEach(b=>{
      const s=b.stage||'Unknown';
      stageMap[s]=(stageMap[s]||0)+Math.ceil(b.estimatedDays||1);
    });
    return {totalAssigned,stageMap};
  };

  return React.createElement('div',{className:'page'},
    React.createElement('div',{className:'page-header'},
      React.createElement('div',null,
        React.createElement('div',{className:'page-title'},'âœ… '+t('completed')),
        React.createElement('div',{style:{fontSize:'13px',color:'var(--text2)',marginTop:'2px'}},t('completedHint'))
      )
    ),
    completedJobs.length===0
      ?React.createElement('div',{className:'empty-state'},
          React.createElement('div',{className:'empty-icon'},'âœ…'),
          React.createElement('div',{className:'empty-text'},t('noCompleted')))
      :React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'12px'}},
          completedJobs.map(job=>{
            const jc=jobColor(job.colorIdx);
            const {totalAssigned,stageMap}=getJobStats(job);
            const stageEntries=Object.entries(stageMap);
            const overUnder=totalAssigned-(job.estimatedDays||1);

            return React.createElement('div',{key:job.id,className:'card'},
              React.createElement('div',{style:{width:'4px',background:'var(--green)',position:'absolute',left:0,top:0,bottom:0,borderRadius:'12px 0 0 12px'}}),
              React.createElement('div',{style:{padding:'14px 16px'}},

                // Header row
                React.createElement('div',{style:{display:'flex',alignItems:'flex-start',justifyContent:'space-between',gap:'12px',flexWrap:'wrap',marginBottom:'12px'}},
                  React.createElement('div',{style:{flex:1}},
                    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'8px',flexWrap:'wrap'}},
                      React.createElement('span',{style:{color:'var(--green)',fontSize:'16px',fontWeight:800}},'âœ“'),
                      React.createElement('span',{style:{fontSize:'16px',fontWeight:800,color:'var(--text)'}},job.name||job.address),
                      job.customerName&&React.createElement('span',{className:'tag'},job.customerName)
                    ),
                    React.createElement('div',{style:{fontSize:'12px',color:'var(--text2)',marginTop:'3px'}},job.address),
                    job.imageB64?React.createElement('img',{src:job.imageB64,style:{width:'80px',height:'56px',objectFit:'cover',borderRadius:'8px',border:'2px solid var(--border)',marginTop:'6px',display:'block',cursor:'pointer'},onClick:()=>setViewImg(job.imageB64)}):null,
                    // Completion date with edit
                    React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'6px',marginTop:'5px'}},
                      React.createElement('span',{style:{fontSize:'11px',color:'var(--green)',fontWeight:700}},'Completed:'),
                      editDateJobId===job.id
                        ? React.createElement(React.Fragment,null,
                            React.createElement('input',{type:'date',value:editDateVal,onChange:e=>setEditDateVal(e.target.value),style:{fontSize:'12px',border:'1px solid var(--border)',borderRadius:'5px',padding:'2px 6px',fontFamily:'inherit'}}),
                            React.createElement('button',{className:'btn btn-primary btn-sm',style:{fontSize:'10px',padding:'2px 8px'},onClick:()=>{dispatch({type:'SET_JOB_COMPLETED_DATE',id:job.id,date:editDateVal});setEditDateJobId(null);toast('Date saved','success');}},t('save')),
                            React.createElement('button',{className:'btn btn-ghost btn-sm',style:{fontSize:'10px',padding:'2px 6px'},onClick:()=>setEditDateJobId(null)},t('cancel'))
                          )
                        : React.createElement(React.Fragment,null,
                            React.createElement('span',{style:{fontSize:'12px',color:'var(--text2)'}},job.completedDate?new Date(job.completedDate+'T12:00:00').toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}):'â€”'),
                            React.createElement('button',{className:'btn btn-ghost btn-sm',style:{fontSize:'10px',padding:'1px 6px'},onClick:()=>{setEditDateJobId(job.id);setEditDateVal(job.completedDate||getToday());}},isAdmin?'âœ Edit':'')
                          )
                    )
                  ),
                  isAdmin&&React.createElement('div',{style:{display:'flex',gap:'6px',flexShrink:0}},
                    React.createElement('button',{className:'btn btn-ghost btn-sm',style:{fontSize:'11px'},onClick:()=>dispatch({type:'SET_JOB_STATUS',id:job.id,status:'active'})},t('markActive')),
                    React.createElement('button',{className:'btn btn-danger btn-sm',onClick:()=>setConfirmDel(job)},t('delete'))
                  )
                ),

                // â”€â”€ 3 STATS BOXES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                React.createElement('div',{style:{display:'grid',gridTemplateColumns:'repeat(3,1fr)',gap:'10px'}},

                  // Box 1: Estimated days
                  React.createElement('div',{style:{background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'8px',padding:'12px'}},
                    React.createElement('div',{style:{fontSize:'10px',fontWeight:800,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text3)',marginBottom:'6px'}},'ğŸ“… Estimated Days'),
                    React.createElement('div',{style:{fontSize:'22px',fontWeight:900,color:'var(--blue)',fontFamily:'DM Mono,monospace',lineHeight:1}},(job.estimatedDays||1)),
                    React.createElement('div',{style:{fontSize:'11px',color:'var(--text3)',marginTop:'3px'}},(job.estimatedDays===1?'day':'days')+' projected')
                  ),

                  // Box 2: Actual assigned days
                  React.createElement('div',{style:{background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'8px',padding:'12px'}},
                    React.createElement('div',{style:{fontSize:'10px',fontWeight:800,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text3)',marginBottom:'6px'}},'ğŸ“† Actual Days'),
                    React.createElement('div',{style:{display:'flex',alignItems:'baseline',gap:'8px'}},
                      React.createElement('div',{style:{fontSize:'22px',fontWeight:900,fontFamily:'DM Mono,monospace',lineHeight:1,color:overUnder>0?'var(--red)':overUnder<0?'var(--green)':'var(--text)'}},totalAssigned||'â€”'),
                      totalAssigned>0&&React.createElement('span',{style:{fontSize:'11px',fontWeight:700,color:overUnder>0?'var(--red)':overUnder<0?'var(--green)':'var(--text3)'}},
                        overUnder===0?'on track':overUnder>0?'+'+overUnder+' over':overUnder+' under')
                    ),
                    React.createElement('div',{style:{fontSize:'11px',color:'var(--text3)',marginTop:'3px'}},'days on calendar')
                  ),

                  // Box 3: Stage breakdown
                  React.createElement('div',{style:{background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'8px',padding:'12px'}},
                    React.createElement('div',{style:{fontSize:'10px',fontWeight:800,textTransform:'uppercase',letterSpacing:'.5px',color:'var(--text3)',marginBottom:'6px'}},'ğŸ· Stages Used'),
                    stageEntries.length===0
                      ?React.createElement('div',{style:{fontSize:'12px',color:'var(--text3)',fontStyle:'italic'}},'No schedule data')
                      :React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'4px'}},
                          stageEntries.map(([stageName,days])=>{
                            const stg=data.stages.find(s=>s.name===stageName);
                            const sHex=stg?stg.colorHex||stg.color?.text||'#6366f1':'#6366f1';
                            return React.createElement('div',{key:stageName,style:{display:'flex',alignItems:'center',gap:'5px'}},
                              React.createElement('div',{style:{width:'8px',height:'8px',borderRadius:'50%',background:sHex,flexShrink:0}}),
                              React.createElement('span',{style:{fontSize:'11px',flex:1,color:'var(--text)',fontWeight:600}},stageName),
                              React.createElement('span',{style:{fontSize:'11px',fontFamily:'DM Mono,monospace',fontWeight:700,color:sHex}},days+(days===1?' day':' days'))
                            );
                          })
                        )
                  )
                )
              )
            );
          })
        ),
    confirmDel&&React.createElement(Confirm,{
      msg:t('delete')+' '+(confirmDel.name||confirmDel.address)+'?',
      onConfirm:()=>{dispatch({type:'DELETE_JOB',id:confirmDel.id});toast(t('jobDeleted'),'success');setConfirmDel(null);},
      onCancel:()=>setConfirmDel(null)}),
    viewImg?React.createElement('div',{onClick:()=>setViewImg(null),style:{position:'fixed',inset:0,background:'rgba(0,0,0,.75)',zIndex:9999,display:'flex',alignItems:'center',justifyContent:'center',cursor:'zoom-out'}},
      React.createElement('img',{src:viewImg,style:{maxWidth:'90vw',maxHeight:'90vh',borderRadius:'12px',boxShadow:'0 8px 40px rgba(0,0,0,.6)'}})):null
  );
}

// â”€â”€ STAGES PAGE (admin) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function StagesPage({data,dispatch,toast}){
  const [newName,setNewName]=useState('');
  const [newColor,setNewColor]=useState('#e07b1a');
  const [newTasks,setNewTasks]=useState({});
  const [newTaskColors,setNewTaskColors]=useState({});
  const [expandedStage,setExpandedStage]=useState(null);

  const addStage=()=>{
    const n=newName.trim();
    if(!n||data.stages.find(s=>s.name.toLowerCase()===n.toLowerCase()))return;
    const hex=newColor;
    const stageColorObj={bg:hex+'22',text:hex,border:hex+'55'};
    dispatch({type:'ADD_STAGE',stage:{id:genId(),name:n,color:stageColorObj,colorHex:hex,tasks:[]}});
    toast(t('addStage'),'success');setNewName('');
  };

  const updateStageColor=(stageId,hex)=>{
    const stageColorObj={bg:hex+'22',text:hex,border:hex+'55'};
    dispatch({type:'UPDATE_STAGE',id:stageId,data:{color:stageColorObj,colorHex:hex}});
  };

  const addTaskToStage=(stageId)=>{
    const txt=(newTasks[stageId]||'').trim();
    if(!txt)return;
    const color=newTaskColors[stageId]||'#6366f1';
    dispatch({type:'ADD_STAGE_TASK',stageId,text:txt,color});
    setNewTasks(p=>({...p,[stageId]:''}));
  };

  return React.createElement('div',{className:'page'},
    React.createElement('div',{className:'page-header'},
      React.createElement('div',{className:'page-title'},t('stagesAndTasks'))
    ),
    React.createElement('p',{style:{fontSize:'13px',color:'var(--text2)',marginBottom:'18px',lineHeight:'1.6'}},t('stagesHint')),
    React.createElement('div',{style:{display:'flex',flexDirection:'column',gap:'10px',marginBottom:'24px'}},
      data.stages.map(stage=>{
        const isOpen=expandedStage===stage.id;
        const tasks=stage.tasks||[];
        const hex=stage.colorHex||stage.color.text||'#475569';
        return React.createElement('div',{key:stage.id,className:'card',style:{padding:'0',overflow:'hidden'}},
          React.createElement('div',{
            style:{display:'flex',alignItems:'center',gap:'10px',padding:'12px 16px',cursor:'pointer',background:hex+'15',borderLeft:'5px solid '+hex},
            onClick:()=>setExpandedStage(isOpen?null:stage.id)
          },
            React.createElement('div',{style:{width:'14px',height:'14px',borderRadius:'50%',background:hex,flexShrink:0}}),
            React.createElement('span',{style:{fontWeight:700,fontSize:'14px',color:hex}},stage.name),
            React.createElement('span',{style:{fontSize:'11px',color:'var(--text3)',marginLeft:'4px'}},tasks.length+' task'+(tasks.length===1?'':'s')),
            React.createElement('input',{
              type:'color',value:hex,title:'Change color',
              onClick:e=>e.stopPropagation(),
              onChange:e=>{e.stopPropagation();updateStageColor(stage.id,e.target.value);},
              style:{width:'28px',height:'28px',border:'2px solid '+hex+'44',borderRadius:'50%',cursor:'pointer',padding:'2px',marginLeft:'auto',background:'transparent'}
            }),
            React.createElement('button',{
              className:'btn btn-danger btn-sm',style:{fontSize:'10px',padding:'2px 7px',marginLeft:'4px'},
              onClick:e=>{e.stopPropagation();dispatch({type:'DELETE_STAGE',id:stage.id});toast(t('delete'),'success');}
            },'Ã—')
          ),
          isOpen?React.createElement('div',{style:{padding:'12px 16px',borderTop:'1px solid '+hex+'33',background:'var(--bg2)'}},
            tasks.length===0
              ? React.createElement('p',{style:{fontSize:'12px',color:'var(--text3)',fontStyle:'italic',marginBottom:'8px'}},t('noTasksYet'))
              : tasks.map((task,i)=>{
                  const tc=taskColor(task,'#6366f1');
                  const tt=taskText(task);
                  return React.createElement('div',{key:i,style:{display:'flex',alignItems:'center',gap:'8px',padding:'5px 10px',background:tc+'15',border:'1px solid '+tc+'44',borderRadius:'6px',marginBottom:'4px'}},
                    React.createElement('div',{style:{width:'10px',height:'10px',borderRadius:'50%',background:tc,flexShrink:0}}),
                    React.createElement('span',{style:{flex:1,fontSize:'13px',color:'var(--text)',fontWeight:600}},tt),
                    React.createElement('button',{style:{background:'none',border:'none',color:'var(--text3)',cursor:'pointer',fontSize:'16px',lineHeight:1,padding:0},onClick:()=>dispatch({type:'DEL_STAGE_TASK',stageId:stage.id,idx:i})},'Ã—')
                  );
                }),
            React.createElement('div',{style:{display:'flex',gap:'6px',marginTop:'8px',alignItems:'center'}},
              React.createElement('input',{
                type:'color',
                value:newTaskColors[stage.id]||'#6366f1',
                onChange:e=>setNewTaskColors(p=>({...p,[stage.id]:e.target.value})),
                title:'Task color',
                style:{width:'34px',height:'34px',border:'2px solid var(--border)',borderRadius:'var(--r)',cursor:'pointer',padding:'2px',flexShrink:0}
              }),
              React.createElement('input',{
                style:{flex:1,background:'var(--bg3)',border:'1px solid var(--border)',borderRadius:'6px',padding:'7px 10px',color:'var(--text)',fontFamily:'inherit',fontSize:'13px',outline:'none'},
                value:newTasks[stage.id]||'',
                onChange:e=>setNewTasks(p=>({...p,[stage.id]:e.target.value})),
                onKeyDown:e=>{if(e.key==='Enter')addTaskToStage(stage.id);},
                placeholder:t('taskPlaceholder')
              }),
              React.createElement('button',{className:'btn btn-primary btn-sm',onClick:()=>addTaskToStage(stage.id)},t('addTask'))
            )
          ):null
        );
      })
    ),
    React.createElement('div',{className:'card',style:{padding:'16px'}},
      React.createElement('div',{style:{fontSize:'13px',fontWeight:700,color:'var(--text2)',marginBottom:'12px'}},t('addStage')),
      React.createElement('div',{className:'form-row'},
        React.createElement('div',{className:'form-group'},
          React.createElement('label',{className:'form-label'},t('stageName')),
          React.createElement('input',{className:'form-input',value:newName,onChange:e=>setNewName(e.target.value),onKeyDown:e=>{if(e.key==='Enter')addStage();},placeholder:t('newStagePlaceholder')})
        ),
        React.createElement('div',{className:'form-group'},
          React.createElement('label',{className:'form-label'},'Stage Color'),
          React.createElement('div',{style:{display:'flex',alignItems:'center',gap:'10px',marginTop:'4px'}},
            React.createElement('input',{type:'color',value:newColor,onChange:e=>setNewColor(e.target.value),style:{width:'40px',height:'40px',border:'2px solid var(--border)',borderRadius:'var(--r)',cursor:'pointer',padding:'2px'}}),
            React.createElement('span',{style:{fontSize:'12px',background:newColor+'22',border:'1px solid '+newColor+'55',padding:'4px 10px',borderRadius:'20px',color:newColor,fontWeight:700}},newName||'Preview')
          )
        )
      ),
      React.createElement('button',{className:'btn btn-primary',style:{marginTop:'12px',width:'100%'},onClick:addStage},t('addStage'))
    )
  );
}

// â”€â”€ APP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function App(){
  const [session,setSession]=useState(null);
  const [page,setPage]=useState('schedule');
  const [data,setData]=useState(()=>loadData());
  const [toasts,setToasts]=useState([]);
  const [changePw,setChangePw]=useState(false);
  const [lang,setLang]=useState('en');
  const [syncing,setSyncing]=useState(false); // true = loading screen after login
  const [syncMsg,setSyncMsg]=useState('');    // message shown on loading screen

  // LANG global updated synchronously in toggle buttons, not just via effect
  useEffect(()=>{saveData(data);},[data]);
  const dispatch=useCallback(action=>{setData(d=>{const next=reducer(d,action);saveData(next);return next;});},[]);
  const toast=useCallback((msg,type='success')=>{const id=genId();setToasts(t=>[...t,{id,msg,type}]);setTimeout(()=>setToasts(t=>t.filter(x=>x.id!==id)),3000);},[]);
  const isAdmin=session?session.role==='ADMIN':false;

  // â”€â”€ Handle login: show loading screen, attempt cloud sync, then enter app â”€â”€
  const handleLogin=async(u)=>{
    setSession(u);
    if(!SYNC_SERVER_URL){return;} // no server â€” skip loading screen
    setSyncing(true);
    setSyncMsg('â˜ï¸ Syncing latest schedule...');
    const res=await cloudLoad();
    if(res.ok&&res.data){
      setData(d=>{const next=res.data;saveData(next);return next;});
      setSyncMsg('âœ… Schedule synced!');
    } else {
      setSyncMsg(res.reason==='No data saved yet'?'ğŸ“‹ No cloud data yet â€” using local':'âš ï¸ Could not reach sync server. Using local data.');
    }
    setTimeout(()=>setSyncing(false),1200);
  };

  // â”€â”€ Sync Data handler (navbar button) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // â”€â”€ Sync Data = pull latest from cloud (quiet refresh, no full-screen) â”€â”€â”€â”€â”€â”€
  const [syncBusy,setSyncBusy]=useState(false);
  const [saveBusy,setSaveBusy]=useState(false);

  const handleSync=async()=>{
    if(!SYNC_SERVER_URL){toast('âš ï¸ No sync server configured yet','error');return;}
    setSyncBusy(true);
    const res=await cloudLoad();
    setSyncBusy(false);
    if(res.ok&&res.data){
      setData(()=>{saveData(res.data);return res.data;});
      toast('ğŸ”„ Schedule refreshed from cloud!','success');
    } else {
      toast('âš ï¸ Refresh failed: '+(res.reason||'unknown'),'error');
    }
  };

  // â”€â”€ Save Changes = push current data up to cloud â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const handleCloudSave=async()=>{
    if(!SYNC_SERVER_URL){toast('âš ï¸ No sync server configured yet','error');return;}
    setSaveBusy(true);
    const res=await cloudSave(data);
    setSaveBusy(false);
    if(res.ok) toast('â˜ï¸ Changes saved to cloud!','success');
    else toast('âš ï¸ Save failed: '+(res.reason||'unknown'),'error');
  };

  // â”€â”€ Show login page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
  if(!session) return React.createElement(LoginPage,{users:data.users,lang,setLang,onLogin:handleLogin,onResetPw:(userId,pw)=>{dispatch({type:'UPDATE_USER',id:userId,data:{password:pw}});toast(t('passwordUpdated'),'success');}});

  // â”€â”€ Loading / Sync screen (shown briefly after login if server configured) â”€
  if(syncing) return React.createElement('div',{style:{
    position:'fixed',inset:0,background:'linear-gradient(135deg,#1e1b4b 0%,#312e81 50%,#1e40af 100%)',
    display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',
    gap:'20px',zIndex:99999
  }},
    React.createElement('div',{style:{
      width:'64px',height:'64px',border:'5px solid rgba(255,255,255,0.2)',
      borderTopColor:'#fff',borderRadius:'50%',
      animation:'spin 0.8s linear infinite'
    }}),
    React.createElement('div',{style:{color:'#fff',fontSize:'18px',fontWeight:700,textAlign:'center',letterSpacing:'-.3px'}},syncMsg),
    React.createElement('div',{style:{color:'rgba(255,255,255,0.5)',fontSize:'13px'}},"Anaya's Calendar"),
    React.createElement('style',null,'@keyframes spin{to{transform:rotate(360deg)}}')
  );

  const handleChangePw=form=>{
    if(form.password){dispatch({type:'UPDATE_USER',id:session.id,data:{password:form.password}});toast(t('passwordUpdatedShort'),'success');}
    setChangePw(false);
  };

  let pageContent;
  if(page==='schedule') pageContent=React.createElement(SchedulerPage,{data,isAdmin,dispatch,toast,lang});
  else if(page==='jobs') pageContent=React.createElement('div',{className:'main'},React.createElement(JobsPage,{data,isAdmin,dispatch,toast}));
  else if(page==='contracted'&&isAdmin) pageContent=React.createElement('div',{className:'main'},React.createElement(ContractedPage,{data,isAdmin,dispatch,toast}));
  else if(page==='completed'&&isAdmin) pageContent=React.createElement('div',{className:'main'},React.createElement(CompletedPage,{data,isAdmin,dispatch,toast}));
  else if(page==='workers'&&isAdmin) pageContent=React.createElement('div',{className:'main'},React.createElement(WorkersPage,{data,isAdmin,dispatch,toast}));
  else if(page==='stages'&&isAdmin) pageContent=React.createElement('div',{className:'main'},React.createElement(StagesPage,{data,dispatch,toast}));

  return React.createElement('div',{className:'app'},
    React.createElement('nav',{className:'navbar'},
      React.createElement('div',{className:'nav-logo'},
        React.createElement('img',{src:'data:image/jpeg;base64,'+LOGO_B64,className:'nav-logo-img',alt:"Anaya's",style:{background:'none',padding:0}}),
        React.createElement('span',{className:'nav-logo-brand'},"Anaya's"),
        React.createElement('span',{className:'nav-logo-sub'},t('schedule'))),
      React.createElement('div',{className:'nav-links'},
        React.createElement('button',{className:'nav-link'+(page==='schedule'?' active':''),onClick:()=>setPage('schedule')},'ğŸ“… '+t('schedule')),
        React.createElement('button',{className:'nav-link'+(page==='jobs'?' active':''),onClick:()=>setPage('jobs')},'ğŸ  '+t('jobs')),
        isAdmin?React.createElement('button',{className:'nav-link'+(page==='contracted'?' active':''),onClick:()=>setPage('contracted')},'ğŸ“‹ '+t('contracted')):null,
        isAdmin?React.createElement('button',{className:'nav-link'+(page==='completed'?' active':''),onClick:()=>setPage('completed')},'âœ… '+t('completed')):null,
        isAdmin?React.createElement('button',{className:'nav-link'+(page==='stages'?' active':''),onClick:()=>setPage('stages')},'ğŸ· '+t('stages')):null,
        isAdmin?React.createElement('button',{className:'nav-link'+(page==='workers'?' active':''),onClick:()=>setPage('workers')},'ğŸ‘· '+t('workers')):null
      ),
      React.createElement('div',{className:'nav-user'},
        (()=>{
          // Show employee color dot if worker has a color set
          const sessionWorker=isAdmin?null:data.workers.find(w=>w.id===session.workerId);
          const wColor=sessionWorker&&sessionWorker.color?sessionWorker.color:null;
          return wColor?React.createElement('div',{style:{
            width:'28px',height:'28px',borderRadius:'50%',
            background:wColor,border:'3px solid rgba(255,255,255,0.7)',
            flexShrink:0,boxShadow:'0 0 0 2px '+wColor
          }}):null;
        })(),
        React.createElement('span',{className:'nav-name'},session.name),
        React.createElement('span',{className:'nav-role-badge '+session.role.toLowerCase()},session.role),
        // â”€â”€ Sync Data (refresh from cloud) + Save Changes (push to cloud) â”€â”€
        React.createElement('button',{
          className:'nav-btn',
          style:{background:'rgba(255,255,255,0.12)',border:'1px solid rgba(255,255,255,0.25)',fontWeight:700,fontSize:'11px',opacity:syncBusy?0.6:1,minWidth:'80px'},
          onClick:handleSync,
          disabled:syncBusy,
          title:'Pull the latest schedule from cloud'
        },syncBusy?'ğŸ”„ ..':'ğŸ”„ Sync Data'),
        isAdmin?React.createElement('button',{
          className:'nav-btn',
          style:{background:saveBusy?'rgba(255,255,255,0.1)':'rgba(34,197,94,0.25)',border:'1px solid rgba(34,197,94,0.5)',color:'#86efac',fontWeight:700,fontSize:'11px',opacity:saveBusy?0.6:1,minWidth:'100px'},
          onClick:handleCloudSave,
          disabled:saveBusy,
          title:'Save your changes to cloud so everyone sees them'
        },saveBusy?'â˜ï¸ Saving..':'â˜ï¸ Save Changes'):null,
        !isAdmin?React.createElement('button',{className:'nav-btn',style:{fontSize:'11px'},onClick:()=>setChangePw(true)},'ğŸ”‘ '+t('changePassword')):null,
        React.createElement('button',{className:'nav-btn',onClick:async()=>{
  if(SYNC_SERVER_URL&&isAdmin){
    const go=window.confirm('â˜ï¸ Save changes to cloud before signing out?\n\nClick OK to save, Cancel to sign out without saving.');
    if(go){
      const res=await cloudSave(data);
      if(res.ok) toast('â˜ï¸ Saved to cloud!','success');
      else toast('âš ï¸ Save failed: '+res.reason,'error');
    }
  } else if(!SYNC_SERVER_URL&&isAdmin){
    window.confirm('â„¹ï¸ Cloud sync is not configured.\nYour changes are saved locally on this device only.');
  }
  setSession(null);
}},t('signOut'))
      )
    ),
    pageContent,
    React.createElement(Toasts,{toasts}),
    // Fixed language toggle button - bottom left
    React.createElement('button',{
      className:'lang-float-btn',
      onClick:()=>setLang(l=>{const next=l==='en'?'es':'en';LANG=next;return next;}),
      title:'Switch language / Cambiar idioma'
    },lang==='en'?'ğŸ‡²ğŸ‡½ ES':'ğŸ‡ºğŸ‡¸ EN'),
    changePw?React.createElement(WorkerForm,{selfEdit:true,worker:data.workers.find(w=>w.id===session.workerId),workerUser:session,onSave:handleChangePw,onClose:()=>setChangePw(false)}):null
  );
}

// â”€â”€ LOGIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function LoginPage({users,onLogin,onResetPw,lang,setLang}){
  const [username,setUsername]=useState('');
  const [pw,setPw]=useState('');
  const [err,setErr]=useState('');
  const [resetDone,setResetDone]=useState(false);

  const submit=()=>{
    // Check hardcoded admins first
    const ha=HARDCODED_ADMINS.find(a=>(a.username||'').toLowerCase()===username.toLowerCase()&&a.password===pw);
    if(ha){
      // Merge with stored user to get security question etc
      const storedVersion=users.find(u=>u.id===ha.id)||ha;
      onLogin({...ha,...storedVersion,role:'ADMIN'});return;
    }
    // Check stored users (username match)
    const u=users.find(u=>(u.username||'').toLowerCase()===username.toLowerCase()&&u.password===pw);
    if(!u){setErr(t('invalidUsernameOrPw'));return;}
    onLogin(u);
  };
  const hk=e=>{if(e.key==='Enter')submit();};



  return React.createElement('div',{className:'login-wrap'},
    React.createElement('div',{className:'login-box'},
      React.createElement('div',{style:{display:'flex',justifyContent:'center',marginBottom:'16px'}},
        React.createElement('img',{src:'data:image/png;base64,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',alt:"Anaya's",style:{width:'240px',height:'auto',objectFit:'contain'}})),
      /* lang button now shown as fixed floating button below */
      React.createElement('div',null,
            React.createElement('p',{className:'login-sub',style:{marginBottom:'20px'}},t('teamScheduling')),
            err&&React.createElement('div',{className:'login-error'},err),
            React.createElement('label',{className:'login-label'},t('username')),
            React.createElement('input',{className:'login-input',type:'text',value:username,onChange:e=>setUsername(e.target.value),onKeyDown:hk,placeholder:t('username'),autoFocus:true}),
            React.createElement('label',{className:'login-label'},t('password')),
            React.createElement('input',{className:'login-input',type:'password',value:pw,onChange:e=>setPw(e.target.value),onKeyDown:hk,placeholder:'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢'}),
            React.createElement('button',{className:'login-btn',onClick:submit},t('signIn')))
    ),
    React.createElement('div',{className:'login-version'},APP_VERSION),
    React.createElement('button',{
      className:'lang-float-btn',
      onClick:()=>setLang(l=>{const next=l==='en'?'es':'en';LANG=next;return next;})
    },lang==='en'?'ğŸ‡²ğŸ‡½ ES':'ğŸ‡ºğŸ‡¸ EN')
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
</script>
</body>
</html>
